/*! For license information please see 723.vendors.chunk.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[723],{12738:(e,t,n)=>{"use strict";var r;n.d(t,{$:()=>r}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(r||(r={}))},59443:(e,t,n)=>{"use strict";n.d(t,{Y1:()=>r,uq:()=>c});var r,i,a,o,s,c,l,u,d=n(42654),p=n(22232),f=n(8125),m=n(60705);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return m.SV.create(e.index,e.index+e.length)},e.eq=(0,d.fromEquals)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(n)}}}}(e.Y||(e.Y={}))}(o||(o={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(s||(s={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(c||(c={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,f.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(l||(l={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},93583:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r,i=n(27378),a=n(73805),o=n(64909),s=n(83078),c=n(52479),l=n(99391),u=n(60430),d=n(2844),p=n(16528),f=n(2834),m=n(9223);!function(e){e.Manager=function(t){var n=t.children,r=t.remSize,a=c.Dx(r).pipe(l.shareReplay({refCount:!0,bufferSize:1}));return u.P.useSingleton("RemSize.Manager"),u.P.useSubscriptionTo(a),i.createElement(e.Context.Provider,{value:a},n)},e.DefaultManager=function(t){var n=t.children;return u.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},n)},e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),(function(e,t){return e?14:t?18:16})),e.withRemSizeEffect=function(t,n){return void 0===n&&(n=e.defaultFontSizeSetter),t.pipe(f.b((function(e){return n(o.some(e))})),m.x(n.bind(null,o.none)),l.shareReplay({refCount:!0,bufferSize:1}))},e.defaultFontSizeSetter=function(t){e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=function(e,t){e.style.setProperty("--rem",(0,a.pipe)(t,o.map(String),s.QP))},e.setRootFontSize=function(e){document.documentElement.style.fontSize=(0,a.pipe)(e,o.map((function(e){return e+"px"})),s.QP)}}(r||(r={}))},34095:(e,t,n)=>{"use strict";n.d(t,{Ys:()=>u});var r=n(59312),i=n(27378),a=n(42726),o=n(90351),s=n(22823),c=n(13097),l=function(){return i.createElement("svg",{className:h.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},u=function(e){var t=e.checked,n=e.className,r=e.children,a=e.name;return i.createElement(d,{checked:t,name:a,className:n,checkedComponent:function(e){return i.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?h.rectangleFilledBlue:h.rectangle},e&&i.createElement(l,null))}},r)},d=function(e){var t=e.checked,n=e.checkedComponent,o=e.className,s=e.children,c=e.name;return i.createElement(a.F.label,(0,r.__assign)({},(0,a.Sh)(h.wrapper,o),{onClick:function(e){return e.stopPropagation()}},c?{"data-name":c+"-checkbox"}:{}),i.createElement(a.F.input,{type:"checkbox",checked:t,onChange:function(e){return t.modify((function(e){return!e}))},className:h.inputCheckbox}),t.view(n),i.createElement("div",null,s))},p={display:"flex",marginRight:s.u.rem(.5),paddingTop:s.u.rem(.18),width:s.u.rem(1),height:s.u.rem(1),border:"2px solid "+o.Il.CoreNeutral30,borderRadius:s.u.rem(c.mA),backgroundColor:"transparent",alignItems:"center"},f={paddingTop:s.u.rem(.1),borderColor:o.Il.CoreBlue50,borderRadius:s.u.rem(c.mA),backgroundColor:o.Il.CoreBlue50},m={width:s.u.percent(100),height:s.u.percent(100)},h=s.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[p],rectangleFilledBlue:[p,f],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[m],svg2:[{margin:"auto"}]})},9261:(e,t,n)=>{"use strict";n.d(t,{u_:()=>K,ay:()=>J,Pj:()=>Z});var r,i,a=n(59312),o=n(27378),s=n(45980),c=n(42726),l=n(25781),u=n(22232),d=n(90351),p=n(22823),f=n(71031),m=n(13097),h=n(39499),g=n(41439),v=n(53073),y=n(84347),b=n(92932),w=n(16528),_=n(52479),C=n(99391),S=n(42499),x=n(66081),A=n(66310),I=n(77176),k=n(67434),E=n(24209),T=n(49708),R=n(17343),L=n(28043),M=n(93508),N=n(95300),F=n(85985),P=n(2834),O=n(12126),B=n(2844),D=n(76974),W=n(13444),H=n(55935),U=n(55721),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},t._mount=function(e){t._el=e,t.props.onMount&&e&&t.props.onMount(e)},t._update=function(){requestAnimationFrame((function(){t._el&&y.update(t._el)}))},t}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,i=n.name,a=n.update,o=n.showWhenScrollable,s=n.scrollTo,c=n.className,l=this._el;y.initialize(l,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),(e=this._subs).push.apply(e,r.customize(l,{name:i,showWhenScrollable:o||!1,classes:this._classes})),this._subs.push(w.YC(this._el).pipe(x.e(200)).subscribe(this._update)),a&&this._subs.push(a.subscribe(this._update)),s&&this._subs.push(s.pipe(A.w(_.b2.rafScheduler)).subscribe((function(e){l.scrollTop=e,t._update()}))),c&&this._subs.push(_.Dx(c).pipe(I.U((function(e){return e?e.split(" "):[]})),k.R((function(e,t){var n,r;return e&&(n=l.classList).remove.apply(n,e),t&&(r=l.classList).add.apply(r,t),t}),[])).subscribe())},t.prototype.componentWillUnmount=function(){y.destroy(this._el),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.onScroll,r=e.name,i=e.showWhenScrollable;return o.createElement(c.F.div,(0,a.__assign)({},(0,c.Sh)(i&&this._classes.visible),{onScroll:n?function(){return n.next()}:void 0,mount:this._mount,role:"scrollbar-"+r}),t)},t}(o.Component);!function(e){var t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=function(e,n){var r=n.name,i=n.showWhenScrollable,a=n.classes,o=b.C8.Logging.getLogger("scrollBarY."+r,b.zW.LogLevel.DEBUG),s=e.querySelector(".ps__scrollbar-y"),c=e.querySelector(".ps__scrollbar-y-rail"),l=E.T(T.R(e,"mouseenter",{passive:!0}).pipe(R.h(!0)),T.R(e,"mouseleave",{passive:!0}).pipe(R.h(!1))).pipe(L.x(),M.O(!1)),d=E.T(T.R(c,"mouseenter",{passive:!0}).pipe(R.h(!0)),T.R(c,"mouseleave",{passive:!0}).pipe(R.h(!1))).pipe(L.x(),M.O(!1)),p=E.T(T.R(s,"mousedown",{passive:!0}).pipe(R.h(!0)),T.R(document,"mouseup",{passive:!0}).pipe(R.h(!1))).pipe(M.O(!1)),f=new N.X(!1),m=E.T(T.R(document,"paste",{passive:!0}),T.R(document,"mousedown",{passive:!0}).pipe(F.h((function(e){var t=e.target;return t!==s&&t!==c})),P.b((function(e){return o.trace("force hide event",e)})))).pipe(A.w((function(){return O.D([!0,!1])})),M.O(!1));return[E.T.apply(C,t.map((function(t){return T.R(e,t).pipe(I.U((function(e){return e.preventDefault(),e.stopPropagation(),!0})))}))).subscribe(f),B.aj(l,p,d,m).pipe(F.h((function(){return!i})),A.w((function(e){var t=e[0],n=e[1],r=e[2];return e[3]?D.of("forceHide"):n||r?r&&!n?D.of("show").pipe(W.g(600)):D.of("show"):t?E.T(f.pipe(H.T(1),U.p(100),R.h("show")),f.pipe(R.h("hide"),U.p(100),A.w((function(){return D.of("hide").pipe(W.g(600))})))):D.of("hide").pipe(W.g(600))})),L.x()).subscribe((function(t){switch(S.c.emit(t),o.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(a.hidden,a.fastTransition),e.classList.add(a.visible);break;case"hide":e.classList.remove(a.visible);break;case"forceHide":e.classList.remove(a.visible),e.classList.add(a.fastTransition);break;default:(0,u.vE)(t)}return t}))]}}(r||(r={})),function(e){function t(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.deltaX/6,n=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.deltaY),[t,n]}e.verticalScrollByWhellEvent=function(e){return T.R(e,"wheel",{passive:!0}).pipe(I.U(t),I.U(v.snd),P.b((function(t){return e.scrollTop-=t})))}}(i||(i={}));var X,G=n(14611),V=n(18244),Y=n(60430),q=n(66265),$=n(40151),j=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._overlayIndex=t._index++,n._subs=[],n._visibilityState=c.hg.create("hidden"),n}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(I.U((function(e){return"visible"===e})),L.x()).subscribe((function(n){return t._activeOverlays.modify((function(t){var r=new Set(t);return n?r.add(e._overlayIndex):r.delete(e._overlayIndex),r}))})),this.props.visible.pipe(H.T(1)).subscribe((function(t){var n=e.props.animate?"fadeOut":"hidden";e._visibilityState.set(t?"visible":n)}))),this._subs.push(this._visibilityState.pipe(A.w((function(e){return"visible"===e?T.R(document,"keydown"):$.c()})),F.h((function(e){return e.keyCode===l.R.ESC_CODE}))).subscribe((function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()})))},t.prototype.componentWillUnmount=function(){var e=this;t._activeOverlays.modify((function(t){var n=new Set(t);return n.delete(e._overlayIndex),n})),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.render=function(){var e=this;return o.createElement(c.F.Fragment,null,this._visibilityState.view((function(t){switch(t){case"visible":case"fadeOut":return o.createElement(c.F.div,(0,a.__assign)({role:"overlay-wrapper"},(0,c.Sh)(e.props.animate?e._getAnimatedTypeClass(t):e._getTypeClass(t),e._getPositionType(e.props.positionType)),{onClick:function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()},onTransitionEnd:function(){"fadeOut"===t&&e._visibilityState.set("hidden")}}),o.createElement(c.F.div,(0,a.__assign)({},(0,c.Sh)(e.props.animate&&e._getContentClass(t))),o.createElement("div",{className:me.scroll,role:"scrollbar-modal"},o.createElement(c.F.div,(0,a.__assign)({},(0,c.Sh)(e._getAlignmentClass(),e._getSmallResolutionClass())),e.props.children))));case"hidden":return null;default:return(0,u.vE)(t)}})))},t.prototype._getSmallResolutionClass=function(){switch(this.props.smallResolution){case"resize":return me.wrapperResize;case"cut":default:return""}},t.prototype._getAlignmentClass=function(){switch(this.props.alignment){case"top-center":return me.wrapperTopCenter;case"bottom-right":return me.wrapperBottomRight;case"none":return"";case"center":default:return me.wrapperCenter}},t.prototype._getTypeClass=function(e){if("visible"!==e)return me.wrapperTransparent;switch(this.props.overlayType){case"light":return me.wrapperLight;case"transparent":return me.wrapperTransparent;case"dark":default:return me.wrapperDark}},t.prototype._getPositionType=function(e){switch(e){case"absolute":return me.wrapperAbsolute;case"fixed":return me.wrapperFixed;default:return(0,u.vE)(e)}},t.prototype._getAnimatedTypeClass=function(e){var t="visible"===e;switch(this.props.overlayType){case"light":return G.f.rafSequence(t?[me.wrapperTransparent,me.wrapperLight]:[me.wrapperLight,me.wrapperTransparent],!0);case"transparent":return D.of(me.wrapperTransparent);case"dark":default:return G.f.rafSequence(t?[me.wrapperTransparent,me.wrapperDark]:[me.wrapperDark,me.wrapperTransparent],!0)}},t.prototype._getContentClass=function(e){var t=this.props.theme||me,n=t.contentFaded,r=t.content,i="visible"===e?[n,r]:[r,n];return G.f.rafSequence(i,!0)},t.defaultProps={visible:c.hg.create(!0)},t._activeOverlays=c.hg.create(new Set),t.activeCount=t._activeOverlays.view((function(e){return e.size})),t._index=0,t}(o.Component),Z=function(e){return o.createElement(j,(0,a.__assign)({},e,{visible:c.hg.create(!0),preventClose:!0}),e.children)},J=function(e){return o.createElement(j,(0,a.__assign)({},e,{visible:c.hg.create(!0),preventClose:!1}),e.children)};function K(e){var t=e.children,n=e.className,r=e.close;return o.createElement(c.F.div,(0,a.__assign)({},(0,c.Sh)(me.modal,n),{onClick:V.UW(s.constVoid)}),t,r?o.createElement("div",{className:me.closeIconButtonContainer},o.createElement(h.zx,{name:"modal-close",onClick:r},o.createElement(g.JO.Close,{className:me.closeIcon,width:13}))):null)}!function(e){e.Header=function(e){var t=e.children,n=e.className;return o.createElement(c.F.header,(0,a.__assign)({},(0,c.Sh)(me.header,n)),t)},e.Body=function(e){var t=e.children,n=e.className,r=e.wrapperClassName,i=e.name,s=Y.P.useElWatcher(),l=s.ref,u=s.onMount;return o.createElement(z,(0,a.__assign)({name:i},(0,c.Sh)(me.scrollBody,r),{showWhenScrollable:!0,update:l.pipe(q.oA,A.w(w.YC),R.h(_.PU))}),o.createElement(c.F.div,(0,a.__assign)({},(0,c.Sh)(me.body,n),{mount:u}),t))},e.Footer=function(e){var t=e.children,n=e.className;return o.createElement(c.F.div,(0,a.__assign)({},(0,c.Sh)(me.footer,n))," ",t," ")}}(K||(K={}));var Q={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:p.u.percent(100),height:p.u.percent(100),transition:"background "+p.u.seconds(.2),pointerEvents:"auto"},ee={position:"fixed",zIndex:m.DY},te={margin:p.u.rem(-.5)+" auto auto"},ne={background:"rgba(255, 255, 255, .7)"},re={background:"rgba(100, 107, 131, .4)"},ie={position:"absolute",top:p.u.rem(.5),right:p.u.rem(.5)},ae={stroke:f.FW},oe={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:p.u.rem(m.Jr),boxShadow:f.Re},se={position:"relative",overflow:"hidden",padding:p.u.rem(2.5)+" "+p.u.rem(2)+" "+p.u.rem(1),borderTopLeftRadius:p.u.rem(m.Jr),borderTopRightRadius:p.u.rem(m.Jr),backgroundColor:d.Il.CoreNeutral1},ce={position:"absolute",top:p.u.px(10),right:"@top"},le={padding:p.u.rem(2),backgroundColor:d.Il.CoreNeutral0},ue={display:"flex",padding:"0 "+p.u.rem(2),height:p.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:p.u.rem(m.Jr),borderBottomLeftRadius:p.u.rem(m.Jr),backgroundColor:d.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:p.u.rem(.5)}}},de={transitionDuration:p.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},pe={position:"relative",display:"flex",padding:p.u.rem(.5)+" 0",width:"100vw",height:"100vh"},fe={$nest:(X={},X["@media ("+m.pZ+")"]={margin:p.u.rem(2)+" auto auto"},X)},me=p.u.prefixedStylesheet("modal",{wrapper:[Q],wrapperFixed:[ee],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[te],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[Q,ne],wrapperDark:[Q,re],wrapperTransparent:[Q,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[ie],closeIcon:[ae],modal:[oe],header:[se],closeBtn:[ce],body:[le],scrollBody:[{position:"relative",flexGrow:1}],footer:[ue],contentBase:[de],contentFaded:[de,{opacity:0,transform:"scale(.8)"}],content:[de,{opacity:1,transform:"none"}],scroll:[pe],wrapperResize:[fe]})},41552:(e,t,n)=>{"use strict";n.d(t,{dC:()=>r,Iy:()=>i,EQ:()=>h});var r,i,a=n(45980),o=n(42726),s=n(64909),c=n(66310),l=n(18625),u=n(95300),d=n(76974),p=n(2834),f=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance",e.MutedAlerts="MutedAlerts"}(r||(r={})),function(e){e.setGoals=function(e){return{type:r.SetGoals,source:e}},e.performance={type:r.Performance},e.mutedAlerts={type:r.MutedAlerts}}(i||(i={}));var m,h=function(){function e(e){this._modalViews=e,this.state=o.hg.create(s.none),this._modalFactoryCache=new Map}return e.prototype.show=function(e){var t=this;return this.preload(e).pipe(c.w((function(e){return t.showPreloaded(e)})))},e.prototype.showPreloaded=function(e){var t=this;return l.P((function(){var n=new u.X("opened");return t.state.set(s.some(e({onClose:function(){t.state.set(s.none),n.next("closed"),n.complete()}}))),n}))},e.prototype.preload=function(e){var t=this,n=JSON.stringify(e);if(this._modalFactoryCache.has(n)){var r=this._modalFactoryCache.get(n);return d.of(r)}return l.P((function(){return t._modalViews.load(e)})).pipe(p.b((function(e){t._modalFactoryCache.set(n,e)})))},e.prototype.hideAll=function(){this.state.set(s.none)},e}();!function(e){var t=function(){function e(){this.state=o.hg.create(s.none),this.hideAll=a.constVoid}return e.prototype.show=function(e){return f.c()},e.prototype.showPreloaded=function(e){return f.c()},e.prototype.preload=function(e){return f.c()},e}();e.Mock=t}(m||(m={}))},38206:(e,t,n)=>{"use strict";n.d(t,{t:()=>v});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),c=n(42726),l=n(489),u=n(93283),d=n(79932),p=n(19962),f=n(22232),m=n(95574),h=n(64909),g=n(65772);!function(e){var t,n,r;function a(e,n){var r=n.position,a=n.point,o={width:Math.trunc(e.width),height:Math.trunc(e.height)};return p.UL.validate(t.match((function(){return(0,i.__assign)({top:a.y,right:a.x,bottom:a.y+o.height,left:a.x-o.width},o)}),(function(){return(0,i.__assign)({top:a.y-o.height,right:a.x,bottom:a.y,left:a.x-o.width},o)}),(function(){return(0,i.__assign)({top:a.y-o.height,right:a.x+o.width,bottom:a.y,left:a.x},o)}),(function(){return(0,i.__assign)({top:a.y,right:a.x+o.width,bottom:a.y+o.height,left:a.x},o)}))(r))}function o(t){return e.topLeft(p.UL.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,n,r,i){return function(a){switch(a){case e.topRight:return t();case e.bottomRight:return n();case e.bottomLeft:return r();case e.topLeft:return i();default:return(0,f.vE)(a)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:p.UL.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:p.UL.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:p.UL.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:p.UL.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:p.UL.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(p.UL.Point.empty),e.toRect=a,e.fromRect=o,e.inRect=function(e,t){var n=t.point;return p.UL.hasPoint(e,n)},e.toCss=function(e){var n=e.position,r=e.point;return t.match((function(){return{top:r.y,right:r.x}}),(function(){return{right:r.x,bottom:r.y}}),(function(){return{bottom:r.y,left:r.x}}),(function(){return{top:r.y,left:r.x}}))(n)},function(t){t.create=function(e,t){return(0,f.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(n,r){return p.UL.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.floor(r.right),y:Math.ceil(r.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(r.right),y:Math.ceil(r.top)}),e.bottomLeft({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(r.left),y:Math.floor(r.bottom)}),e.topRight({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.ceil(r.left),y:Math.floor(r.bottom)}))}))(n)}}(n=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return u.fromFoldable((0,d.getFirstSemigroup)(),l.array)(p.UL.Axis.toSides(e).map((function(e){return[e,n.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function n(e,t){return(0,s.pipe)(p.UL.intersection(e,t),h.map((function(e){var n=e.width/t.width,r=e.height/t.height,i=(Number.isNaN(n)?0:n/2)+(Number.isNaN(r)?0:r/2);return(0,f.kG)(i>=0,"quality can not be negavite: "+i),(0,f.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=n,t.byViewport=function(e,t){return{quality:(0,s.pipe)(n(e,t),h.getOrElse((function(){return 0})))+(0,s.pipe)(p.UL.scale(2,t),g.chain(p.UL.normalize),h.fromEither,h.chain((function(t){return n(e,t)})),h.getOrElse((function(){return 0}))),point:o(t)}},t.fromZone=function(e,n,r){return(0,s.pipe)(l.array.traverse(g.either)(r,(function(e){return a(n,e)})),g.chain((function(e){var t=e[0],n=e[1];return p.UL.join(t,n)})),g.chain((function(e){return p.xu.placeIntoRect(n,e)})),g.map((function(n){return n.map((function(n){return t.byViewport(e,n)}))})))}}(r=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,n){return(0,s.pipe)(n,u.map((function(n){return r.fromZone(e,t,n)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(n){return(0,s.pipe)(n,u.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,g.map((function(i){return i.filter((function(r,i){return t.toString().includes(i.toString())&&e===n})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:n}:e}),r)})),m.MH)}))).point}},e.preferBy=function(e,t){return function(n){return(0,s.pipe)(n,u.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,g.map((function(i){return i.reduce((function(r,i,a){return i.quality>r.point.quality||i.quality===r.point.quality&&t.toString().includes(a.toString())&&e===n?{point:i,side:n}:r}),r)})),m.MH)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(r||(r={}));var v,y=n(83078),b=n(8125),w=n(90351),_=n(22823),C=n(22168),S=n(60430),x=n(52479),A=n(77176),I=n(2844),k=n(28043);!function(e){!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};case"topRight":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.right)};case"topLeft":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.left)};case"left":return{align:"left",selector:r.Selector.preferBy("left",r.Selector.Placement.middle)};case"right":return{align:"right",selector:r.Selector.preferBy("right",r.Selector.Placement.middle)};case"auto":case"center":return{align:p.UL.Axis.vertical,selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};default:return(0,f.vE)(e)}}}(e.Alignment||(e.Alignment={})),e.ByPoint=function(e){var t=e.point,n=e.className,o=(0,i.__rest)(e,["point","className"]);return a.createElement(c.F.div,(0,i.__assign)({role:"positioned-container",style:t.pipe(A.U(y.dH(r.toCss,{})))},(0,c.Sh)(F.wrapper,n,t.pipe(A.U((function(e){return h.isNone(e)?F.hidden:""})))),o))};var t=function(t){var i=S.P.useRectWatcher(),s=i.rect,c=i.onMount,u=x.Dx(t.rect),d=x.Dx(t.pinTargetRect),p=l(t.align),f=n(u,s,p,t.selector||r.Selector.preferTopMiddle,d,"relative"===t.position);return a.createElement(e.ByPoint,{mount:c,className:t.className,point:f.pipe(A.U(h.map((function(e){return e.tangentialPoint}))))},t.withPin&&f.pipe(A.U((0,o.flow)(h.chain((function(e){return e.median})),h.map((function(t){return a.createElement(e.Pin,{point:t,key:"pin"})})),h.toNullable))),t.children)};e.ByAbsoluteRect=function(e){return a.createElement(t,(0,i.__assign)({},e,{position:"absolute"}))},e.ByRelativeRect=function(e){return a.createElement(t,(0,i.__assign)({},e,{position:"relative"}))},e.Pin=function(e){var t=x.Dx(e.point).pipe(A.U((function(e){return e.side})),A.U((function(e){return N[e]}))),n=x.Dx(e.point).pipe(A.U((function(e){return e.point})),A.U((function(e){var t=e.x;return{top:e.y,left:t}})));return a.createElement(c.F.i,(0,i.__assign)({role:"pin",style:n},(0,c.Sh)(t,N.wrapper)))};var n=function(e,t,n,i,o,c){return I.aj(e,a.useContext(C.l.Context).pipe(A.U((function(e){return e.rect}))),t.pipe(k.x(h.getEq(p.xu.eq).equals)),o).pipe(A.U((function(e){var t=e[0],a=e[1],o=e[2],l=e[3];return(0,s.pipe)(o,h.map((function(e){var o=r.QualifiedVariants.build(a,e,n(t)),u=i(o).point,d=(0,s.pipe)(r.toRect(e,u),h.fromEither,h.chain((function(e){return(0,s.pipe)(p.UL.getMedian(t,e),h.map((function(t){return{anchorMedian:t,bodyRect:e}})))})),h.chain((function(e){var t=e.anchorMedian,n=e.bodyRect;if(l){var i=p.UL.stickToSide(p.UL.Side.invert(t.side),l)(n);return u=r.fromRect(i),(0,s.pipe)(p.UL.getMedian(l,i),h.map((function(e){var t=e.side,n=e.point;return{side:t,point:p.UL.Point.relativeTo(n,i)}})))}return(0,s.pipe)(h.some(t),h.map((function(e){var t=e.side,r=e.point;return{side:t,point:p.UL.Point.relativeTo(r,n)}})))})));return{tangentialPoint:r.relativeTo(u,c?t:a),median:d}})))})))},l=function(e){return void 0===e&&(e=p.UL.Axis.both),(0,b.CI)(p.UL.Axis,e)?function(t){return r.Variants.byAxis(e,t)}:function(t){var n;return(n={})[e]=r.Zone.bySide(e,t),n}}}(v||(v={}));var E={position:"absolute",border:_.u.px(7)+" solid "+w.Il.BackgroundTooltip,transform:"translate("+_.u.px(-7)+", "+_.u.px(-7)+")"},T={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+_.u.px(7)+")"}}},R={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:"translateX("+_.u.px(-7)+")"}}},L={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+_.u.px(-7)+")"}}},M={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateX("+_.u.px(7)+")"}}},N=_.u.stylesheet({wrapper:[E],top:[T],right:[R],bottom:[L],left:[M]}),F=_.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63979:(e,t,n)=>{"use strict";n.d(t,{P:()=>C});var r=n(59312),i=n(27378),a=n(42726),o=n(22232),s=n(19962),c=n(90351),l=n(22823),u=n(71031),d=n(94503),p=n(41439),f=2*Math.PI*32,m=36,h="#f1f2fa",g="#fff",v=function(e,t,n){return e<t?t:e>n?n:e},y=function(e){switch(e){case C.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:h,outline:g};case C.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:h,outline:g};case C.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:h,outline:g};case C.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:h,outline:g};case C.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:h,outline:g};case C.ColorType.logan:return{type:"plain",value:"#a6adc9",background:h,outline:g};case C.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case C.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case C.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case C.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case C.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case C.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case C.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case C.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,o.vE)(e)}},b=function(e){switch(e){case C.FontSize.normal:return 32;case C.FontSize.small:return 24;default:return(0,o.vE)(e)}},w=function(e){switch(e){case C.IconSize.pdf:case C.IconSize.normal:case C.IconSize.outcome:return 5;case C.IconSize.small:return 3;case C.IconSize.extraSmall:return 10;default:return(0,o.vE)(e)}},_=function(e){switch(e){case C.IconSize.pdf:return 110;case C.IconSize.normal:return 52;case C.IconSize.outcome:return 32;case C.IconSize.small:return 24;case C.IconSize.extraSmall:return 16;default:return(0,o.vE)(e)}},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e,n,o,c,l,u=this.props,h=u.percentage,g=u.aimValue,C=void 0===g?100:g,S=u.colorType,x=void 0===S?t.ColorType.logan:S,A=u.fontSize,k=void 0===A?t.FontSize.normal:A,E=u.iconSize,T=void 0===E?t.IconSize.normal:E,R=u.description,L=u.theme,M=void 0===L?I:L,N=[i.createElement("circle",{key:"circle",id:"circle",cx:m,cy:m,r:32,fill:"none"})],F=b(k),P=w(T),O=v(h,0,100),B=v(C,O,100),D=O*f/100,W=B*f/100,H=360*P/f,U=O?f-D-2*P:f,z=y(x);if("plain"===z.type)e=z.value,n=e,o=z.outline,c=z.background,l=void 0===z.backgroundOpacity?1:z.backgroundOpacity;else{var X=z.value;this._gradientId=this._gradientId||"pb-gradient-"+t._nextGradientId++,N.push(i.createElement("linearGradient",(0,r.__assign)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},X.coordinates),i.createElement("stop",{stopColor:X.start,offset:"0%"}),i.createElement("stop",{stopColor:X.end,offset:"100%"}))),e="url(#"+this._gradientId+")",n="#2b2d38",o=z.outline,c=z.background,l=void 0===z.backgroundOpacity?1:z.backgroundOpacity}return i.createElement(d.a.Context.Consumer,null,(function(t){return i.createElement(p.a1,(0,r.__assign)({},(0,a.Sh)(I.iconWrapper,M.radialProgressBar),{width:_(T),viewBox:"0 0 72 72"}),i.createElement("defs",null,N),i.createElement("g",null,i.createElement("use",{className:I.valueCircle,stroke:O>=94&&o?o:c,strokeOpacity:l,strokeWidth:P,strokeDasharray:f,strokeDashoffset:f-W,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),o&&i.createElement("use",{className:I.valueCircle,stroke:o,strokeWidth:P,strokeDasharray:f,strokeDashoffset:U,transform:"rotate("+(-90-H)+" "+"36 "+"36)",strokeLinecap:"round",xlinkHref:"#circle"}),i.createElement("use",{className:I.valueCircle,stroke:e,strokeDasharray:f,strokeDashoffset:f-D,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:P,xlinkHref:"#circle"}),i.createElement("text",(0,r.__assign)({className:M.radialProgressText,y:"38",x:"36",fill:n,fontSize:F,fontStyle:"normal",textAnchor:"middle"},s.h5(t.has(d.a.Flag.supportsSVGDominantBaseline))),O),R&&i.createElement("text",{className:M.radialProgressDescription,fill:n,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},R)))}))},t._nextGradientId=0,t}(i.Component);!function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(C||(C={}));var S={width:l.u.percent(100),height:l.u.percent(100),fontWeight:"bold",fill:c.Il.CoreNeutral90},x={fontSize:l.u.rem(2),fill:c.Il.CoreNeutral90},A={fontWeight:"normal",fontSize:l.u.px(11),fill:u.UE},I=l.u.stylesheet({radialProgressBar:[S],radialProgressText:[x],radialProgressDescription:[A],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},54071:(e,t,n)=>{"use strict";n.d(t,{$:()=>p});var r,i=n(59312),a=n(27378),o=n(42726),s=n(22232),c=n(90351),l=n(22823),u=n(71031),d=n(52479);function p(e){var t=e.wrapperClassName,n=e.variation,r=e.isIdle,s=(e.ref,(0,i.__rest)(e,["wrapperClassName","variation","isIdle","ref"]));return a.createElement(o.F.span,{role:"spinner",className:t},d.ab(n,(function(e){return a.createElement(p.Svg,(0,i.__assign)({},s,{type:e,isIdle:r}))})))}!function(e){e.getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,s.vE)(t)}}},e.Svg=function(t){var n=t.className,r=t.size,c=void 0===r?64:r,l=t.strokeWidth,u=void 0===l?2:l,d=t.type,p=t.name,f=t.isIdle,m=(0,i.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),g=a.useRef(null),v=a.useRef(null);return a.useEffect((function(){return(0,s.kG)(null!==g.current,"groupEl should be already created"),v.current=g.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),a.useEffect((function(){(0,s.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;e.play&&(f?e.pause():"running"!==e.playState&&e.play())})),a.createElement("svg",(0,i.__assign)({"data-role":p},(0,o.Sh)(n),{viewBox:"25 25 50 50",width:c,height:c},m),a.createElement("g",{transform:"translate(50 50)"},a.createElement("g",{ref:g},a.createElement("circle",(0,i.__assign)({},(0,o.Sh)(I.path,f&&h,e.getClassName(I)(d)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:u,strokeMiterlimit:"10"})))))}}(p||(p={}));var f=200,m=l.u.keyframes({"0%":{strokeDasharray:"1px, "+l.u.px(f),strokeDashoffset:l.u.px(1)},"50%":{strokeDasharray:"89px, "+l.u.px(f),strokeDashoffset:l.u.px(-35)},"100%":{strokeDasharray:"89px, "+l.u.px(f),strokeDashoffset:l.u.px(-124)}}),h="spinnerIdle",g={animation:m+" 2s ease-in-out infinite",strokeDasharray:"1px, "+l.u.px(f),strokeDashoffset:l.u.px(1),strokeLinecap:"round",$nest:(r={},r["&."+h]={animationIterationCount:0},r)},v={stroke:c.Il.CoreRed50},y={stroke:c.Il.CoreGreen50},b={stroke:c.Il.CoreBlue50},w={stroke:c.Il.CoreNeutral0},_={stroke:u.lh},C={stroke:u.AX},S={stroke:c.Il.CoreYellow60},x={stroke:u.FW},A={stroke:c.Il.CoreCyan50},I=l.u.stylesheet({path:[g],red:[v],green:[y],blue:[b],white:[w],violet:[_],yellow:[C],orange:[S],gray:[x],cyan:[A]})},17674:(e,t,n)=>{"use strict";n.d(t,{X:()=>E});var r=n(59312),i=n(27378),a=n(45980),o=n(19962),s=n(64909),c=n(90351),l=n(22823),u=n(13097),d=n(38206),p=n(73805),f=n(42726),m=n(25781),h=n(83078),g=n(42499),v=n(52479),y=n(49708),b=n(85985),w=n(41398),_=n(24209),C=n(17343),S=n(38194),x=n(598),A=n(50628),I=n(66831),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!o.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return i.createElement(f.F.div,{role:"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=y.R(document,"keydown").pipe(b.h((function(e){return e.keyCode===m.R.ESC_CODE}))),n=y.R(document,"mousedown").pipe(w.M(this.context.state),b.h((function(t){var n=t[0],r=t[1];return(0,p.pipe)(r,s.map((function(e){return e.target})),s.filter((function(){return o.pK(n.target)})),h.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),r=_.T(t,n,y.R(document,"scroll"),g.c.observe.pipe(b.h((function(e){return"show"===e.detail})))).pipe(C.h(v.PU),S.B());this._subs=[this.context.hasContent.pipe(b.h(Boolean),x.c(r.pipe(A.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(b.h(Boolean),x.c(_.T(v.gw(!0,500),r.pipe(C.h(!1))).pipe(A.P())),b.h(Boolean)).subscribe(this.context.show)]},t.contextType=I.G.Context,t}(i.Component),E=function(){return i.createElement(k,null,(0,a.flow)(s.map((function(e){return i.createElement(d.t.ByAbsoluteRect,(0,r.__assign)({rect:o.UL.fromEl(e.target),className:L.container},d.t.Alignment.toSelector(e.alignment),{withPin:!0}),i.createElement("div",{className:L.content},e.content))})),s.toNullable))},T={position:"fixed",zIndex:u.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},R={padding:l.u.rem(.25)+" "+l.u.rem(1),borderRadius:l.u.rem(u.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:l.u.px(.25),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1)},L=l.u.stylesheet({container:[T],content:[R]})},69551:(e,t,n)=>{"use strict";var r;n.d(t,{Q:()=>r}),function(e){e.group=function(e){return Object.values(e.reduce((function(e,t){var n=t.group,r=t.category,i=t.categoryHuman,a=t.cost;return void 0===e[r]&&(e[r]={group:n,category:r,categoryHuman:i,count:0}),e[r].count+=a,e}),{})).sort((function(e,t){return t.count-e.count}))}}(r||(r={}))},27901:(e,t,n)=>{"use strict";n.d(t,{S:()=>Re});var r,i=n(59312),a=n(53073),o=n(45980),s=n(73805),c=n(42726),l=n(80358),u=n(84966),d=n(67394),p=n(89943),f=n(81670),m=n(8125),h=n(22232),g=n(64909),v=n(87088),y=n(65772),b=n(92932),w=n(76779),_=n(40620),C=n(1701),S=n(92843),x=n(68983),A=n(76220),I=n(38365),k=n(67434),E=n(2834),T=n(77176);!function(e){function t(t){return function(a){return(0,s.pipe)(t,S.v.foldMap(e.group)(r,i,n),(0,x.W)(e.group.concat)(a))}}e.group=I.dM.group,e.eq=I.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){var n=b.C8.Logging.getLogger("DocumentCounters");return e.pipe(k.R((function(e,n){return{alerts:n,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,n)))(e.counters)}}),{alerts:w.p.empty,counters:I.dM.group.empty}),E.b((function(e){var t=e.counters;I.dM.isValid(t)||n.error("Counters can not be below zero",I.dM.show.show(t))})),T.U((function(e){return e.counters})))};var n=function(e){return A.R.toUnmutedOnly(e.counters)},r=(0,o.flow)(n,e.group.inverse),i=function(t,i){return e.group.concat(n(i),r(t))}}(r||(r={}));var R,L=n(26001),M=n(93283),N=n(88903),F=n(64510),P=n(10002),O=n(58199),B=n(85985);!function(e){function t(e){var t=(0,s.pipe)(e,M.filterMap(g.fromNullable),M.filterWithIndex((function(e){return"GeneralScore"!==e})),M.mapWithIndex((function(e,t){return{lensId:(n=e,n===P.R.SpecialId.Plagiarism?y.right(P.R.SpecialId.Plagiarism):P.R.OutcomeId.toOutcomeId(n)),score:O.T.fromNumber(t)};var n})),M.partitionMap((0,L.Yt)(y.either))),n=t.left,r=t.right,i=(0,s.pipe)(r,M.map((function(e){var t=e.lensId,n=e.score;return(0,o.tuple)(t,n)})),(function(e){return new Map(Object.values(e))}));return(0,s.pipe)(N.fromOptions(g.fromPredicate((0,o.not)(M.isEmpty))(n),g.fromPredicate((0,o.not)(F.isEmpty))(i)),g.getOrElse((function(){return N.right(new Map)})))}e.empty=new Map,e.eq=F.getEq(P.R.Id.ord,O.T.ord),e.fromCapi=function(e){return e.pipe(B.h((0,m.Kg)(l.h.is("finish"),l.h.is("async_check_finished"),l.h.is("feedback_ack"))),T.U((function(e){return e.outcomeScores})),B.h(m.$K),T.U(t),E.b(N.mapLeft((function(e){M.isEmpty(e)||b.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),B.h((0,m.Kg)(N.isBoth,N.isRight)),T.U((function(e){return e.right})))}}(R||(R={}));var D,W=n(95053),H=n(52479),U=n(32952),z=n(38194),X=n(77843),G=n(93508),V=n(95093),Y=n(598),q=n(24209),$=n(50628),j=n(17343),Z=n(36919),J=n(41120),K=n(95686),Q=n(90049),ee=n(25938),te=n(64450),ne=n(37492),re=n(51072),ie=n(489),ae=n(80229),oe=n(44827),se=n(79932),ce=n(36991),le=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,h.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return g.none;for(var n=ce.s.operationLength(this._delta.ops[t]),r=e-(n-this._cursor.operationOffset);r>0&&t<this._delta.ops.length-1;)t++,r-=n=ce.s.operationLength(this._delta.ops[t]);return r>0?(this._cursor={index:t+1,operationOffset:0},g.none):(this._cursor={index:t,operationOffset:n+r},g.some(this._delta.ops[t]))},e}();!function(e){var t=g.getMonoid((0,se.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=function(e){return function(n){var r=new le(e);return n.ops.reduce((function(e,n){var i=e[0],a=e[1],o=r.next(a);return ce.s.isInsert(n)?[i.insert(n.insert,g.toUndefined(t.concat(g.chain(ce.s.getAttrs)(o),ce.s.getAttrs(n)))),0]:[i.push(n),ce.s.operationLength(n)]}),[new te.i,1])[0]}}}(D||(D={}));var ue=n(71102),de=n(17753);var pe,fe=(0,m.HP)(b.C8.Logging.getLogger),me=(0,o.flow)(ue.map((function(e){var t=e.beingAppliedAlert,n=e.undo,r=e.reversedAlternative;return Q.tryCatch((function(){var e={action:u.PZ.ACCEPTED,commit:function(){return fe("AlertManager.ops").debug("_applyTransformJson("+t.toLiteString()+"):commit()")},undo:n,reversedAlternative:t.registerReversedAlternative(r)},i=t.switchToApplied(e),a=de.xS.create(i.state.from,oe.h.create(t));return[i.id,a]}),y.toError)})),Q.sequenceSeqArray);function he(e){var t=d.r3.compose(e.alternatives.map(a.map((function(e){return e.alternative}))),e.currentFullText);return(0,s.pipe)(ce.s.nonEmpty(t.composedDelta)?g.some(t):g.none,g.map((function(t){var n=t.composedDelta,r=t.reversedAlternatives;return{changeWithFormatting:(0,s.pipe)(n,D.getEnrichedWithFormattingDelta(e.currentFullText),(function(t){return ee.RI.delta(t,e.originalTextLength)})),correctRevAlternatives:(0,s.pipe)(r,f.T.tapFailure((function(e){var t=e.rejected;return b.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",t)})),f.T.foldSuccess(ie.map((function(t){return{reversedAlternative:t.reversedAlternative,alternative:a.fst(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert}}))))}})))}!function(e){var t=(0,o.flow)((function(e,t){return y.tryCatch((function(){return de.xS.create(e,t)}),y.toError)}),y.map((function(e){return(0,o.tuple)(e[0].id,e)})),K.of);e.prepare=K.chain((0,o.tupled)(t)),e.prepareFromAlert=Q.chain((function(e){return t(e.state.from,oe.h.create(e))}))}(pe||(pe={}));function ge(e,t){return y.fromPredicate(e,(function(e){var n=new h.ej(t,e.toString());return b.C8.Logging.getLogger("AlertManager.ops").error(t,n),n}))}var ve=function(e){return ge(de.bZ.isNotDisposed,e)};function ye(e){return Q.chain(g.fold((0,o.constant)(Q.right(void 0)),e))}var be,we,_e,Ce=function(){function e(e,t,n,r){var a=this;this._positionManager=e,this._getContent=t,this._capiFeedbackClient=n,this._alertsRepo=r,this._log=b.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=function(e){return Q.tryCatch((function(){return a.events.next({updated:new Map(e)})}),y.toError)},this._sendSingleUpdate=Q.chain((function(e){return a._sendUpdate([e])})),this._flushChanges=Q.tryCatch((function(){return a.changes.next(ee.RI.flush())}),y.toError),this.changes=new U.xQ,this.events=new U.xQ,this.undoApplied=function(e,t){return(0,s.pipe)((function(){return a._positionManager.getTextLength()}),K.chain((function(t){var r={alertsToUpdate:[],reversedDelta:new te.i,undo:o.constVoid},i=e.filter(de.bZ.isApplied).reduce((function(e,t){var r=t.state.undoable;return de.VD.isWithAlternative(r)?(0,s.pipe)(r.reversedAlternative,g.fold((function(){u.wQ.withTransformJson(t._raw)&&a._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),n(e,t)}),(0,o.flow)((function(e){return e()}),y.map((function(e){return e.delta})),y.fold((function(e){a._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(function(r){n(e,t),(0,s.pipe)(r,d.r3.fromRawDelta,(function(t){return t.rebase(e.reversedDelta)}),g.fold((function(){e.reversedDelta=e.reversedDelta.compose(r)}),(function(t){var n=t.delta;e.reversedDelta=e.reversedDelta.compose(n)})))}))))):n(e,t),e}),r);return i.alertsToUpdate.length>0?(0,s.pipe)(Q.tryCatch((function(){var e=(0,s.pipe)(i.reversedDelta,D.getEnrichedWithFormattingDelta(a._getContent()));a.changes.next(ee.RI.delta(e,t))}),y.toError),Q.apFirst(a._flushChanges),Q.apFirst((0,s.pipe)(i.undo,K.map(y.right))),Q.apSecond((0,s.pipe)(i.alertsToUpdate,Q.sequenceSeqArray,Q.chain(a._sendUpdate)))):Q.right(void 0)})));function n(e,n){e.undo=(0,o.flow)(e.undo,n.state.undoable.undo),e.alertsToUpdate.push(pe.prepare((function(){return[oe.h.create(n),oe.h.create(n.changeState(t===de.bZ.State.Applied.Method.ByCard?de.bZ.State.init:de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))]})))}},this._dismissBatch=function(e,t){return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(e,ie.map((0,o.flow)(K.of,K.map(ve("Cannot send feedback for already disposed")),Q.chain((function(e){return(0,s.pipe)(a._applyFeedbackToAlert(e,u.PZ.IGNORE,de.l$.sidebar,a._commitToCapi(e,{kind:u.PZ.IGNORE,subtype:t})))})),pe.prepareFromAlert)),Q.sequenceSeqArray,Q.chain(a._sendUpdate))))},this._applyAlert=function(e){var t=e.alert,n=e.replacementText,r=e.source,i=e.method,o=e.feedbackSubtype;return(0,s.pipe)(t,ge(de.bZ.isRegistered,"can not apply alert in non registered state"),K.of,Q.apFirst(a._flushChanges),Q.chain((function(e){return a._switchToBeingApplied(e,r,i)})),Q.chain((function(e){var t=e.beingAppliedAlert,r=e.undo;return(0,s.pipe)(t.getReplaceEither.bind(t),Q.swap,Q.mapLeft((function(){return new Error("Cannot apply alert with tJSON")})),Q.map((function(e){a._log.debug("_applyAlert("+t.toLiteString()+", rrange: "+e+")");var i=e.start,s=e.end-e.start,c=(new te.i).retain(i).delete(n.length).insert(t.replaceText);return{alert:t,undo:r,reverseDelta:c,replacementText:n,removeLen:s,feedbackSubtype:o,pos:i}})))})),Q.chain(a._applyAlertData))},this._applyTransformJson=function(e){var t=e.alerts,n=e.source,r=e.method,c=e.feedbackSubtype;return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(t,Q.traverseSeqArray((function(e){return(0,s.pipe)(e.alternative,Q.map((function(t){return(0,o.tuple)(t,function(e){switch(e._raw.point){case"AllCapsBoldification":return d.JJ.fromAlternativeBoldified;default:return d.JJ.fromAlternative}}(e.alert))})))})))),Q.chain((function(e){return Q.tryCatch((function(){return{alternatives:e,alerts:t,originalTextLength:a._positionManager.getTextLength(),currentFullText:a._getContent()}}),y.toError)})),Q.map(he),ye((function(e){return(0,s.pipe)(e.correctRevAlternatives,ie.map((function(e){var t=e.alert,o=e.alternative,l=e.reversedAlternative;return(0,s.pipe)(a._switchToBeingApplied(t,n,r),Q.chainFirst((function(e){return Q.rightIO(a._sendApplyTransformJsonFeedback(e.beingAppliedAlert,o.alternativeIndex,c))})),Q.map((function(e){return(0,i.__assign)((0,i.__assign)({},e),{reversedAlternative:l})})))})),Q.sequenceSeqArray,Q.chain((function(t){return(0,s.pipe)(Q.tryCatch((function(){return a.changes.next(e.changeWithFormatting)}),y.toError),Q.apFirst(a._flushChanges),K.apSecond((0,s.pipe)(me(t),Q.chain(a._sendUpdate))))})))})))},this._alertFeedback=function(e,t,n){a._log.debug("_alertFeedback("+e.toLiteString()+", feedbackType: "+t.kind+", source: "+n+")"),de.bZ.isHidden(e)&&a._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});var r=a._commitToCapi(e,t);return(0,s.pipe)(e,ve("Cannot send feedback for already disposed"),K.of,Q.chain((function(e){return t.kind!==u.PZ.LOOKED||e.isRead?u.nw.willRemoveAlert(t.kind)?(0,s.pipe)(a._flushChanges,Q.apSecond(a._applyFeedbackToAlert(e,t.kind,n,r)),pe.prepareFromAlert,a._sendSingleUpdate):(0,s.pipe)(r,Q.rightIO):(0,s.pipe)(pe.prepare((function(){return[oe.h.create(e),(e.isRead=!0,oe.h.create(e))]})),a._sendSingleUpdate,K.apFirst(r))})))},this._alertBatchFeedback=function(e,t,n){return(0,s.pipe)(e,ie.filterMap((function(e){return e.rawId})),ae.fromArray,g.fold((0,o.constant)(o.constVoid),(function(e){return a._sendFeedback({kind:t,alertIds:e,subtype:n})})))},this._notifyAlertUpdated=(0,o.flow)((function(e){return[[e[0].id,e]]}),this._sendUpdate),this._releaseRef=function(e,t){return(0,s.pipe)(Q.tryCatch((function(){a._log.debug("_releaseRef "+e+" on ("+t.toLiteString()+") refs: "+t._refNames,{shouldBeRemoved:de.bZ.shouldBeRemoved(t)}),de.bZ.shouldBeRemoved(t)&&a.events.next({removed:new Map([[t.id,oe.h.create(t)]])})}),y.toError))},this._changeMuteState=function(e,t){var n=(0,s.pipe)(e,f.T.fromArray((0,o.flow)(ve("Cannot send Mute feedback for already disposed"),y.chain(ge((function(e){return g.isSome(e.muteCategory)||de.bZ.belongsToAnySpecialCategory(e)}),"Alert is not muting")))));return(0,s.pipe)(n,f.T.foldSuccess(ie.map((function(e){return pe.prepare((function(){return[oe.h.create(e),(e.mute=t,oe.h.create(e))]}))}))),Q.sequenceSeqArray,Q.map(ae.fromArray),ye(a._sendUpdate),Q.map((0,o.constant)(n)))},this._changeGapValue=function(e,t){return(0,s.pipe)(e,ge(de.bZ.isOneGap,"can not change gap value for a non one gap alert"),K.of,Q.chain((function(e){return pe.prepare((function(){return[oe.h.create(e),oe.h.create(e.changeGapValue(t))]}))})),a._sendSingleUpdate)},this._confirmApplied=(0,o.flow)(ie.map((function(e){return pe.prepare((function(){return[oe.h.create(e),oe.h.create(e.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))]}))})),Q.sequenceSeqArray,Q.chain(this._sendUpdate)),this._applyAlertData=function(e){var t=e.pos,n=e.removeLen,r=e.reverseDelta,i=e.undo,o=e.replacementText,c=e.alert,l=e.feedbackSubtype;return(0,s.pipe)(Q.tryCatch((function(){var e=a._positionManager.getTextLength(),s=!1,d={action:u.PZ.ACCEPTED,replacement:o,commit:function(){s||a._log.debug("_applyAlert("+c.toLiteString()+"):commit()")},reversedAlternative:g.none,undo:function(){s=!0,a._log.debug("_applyAlert("+c.toLiteString()+"):undo()");var t=a._positionManager.getTextLength();t!==e&&a._log.error("Text has changed while uncommitted apply is present. Expected: "+e+", actual: "+t);var n=ee.RI.delta(r,t);a.changes.next(n),a.changes.next(ee.RI.flush()),i()}};return a._sendApplyTextFeedback(c,o,l)(),a.changes.next(ee.RI.delta((new te.i).retain(t).delete(n).insert(o),e)),a.changes.next(ee.RI.flush()),e=a._positionManager.getTextLength(),d}),y.toError),Q.chain((function(e){return Q.tryCatch((function(){return c.switchToApplied(e)}),y.toError)})),pe.prepareFromAlert,a._sendSingleUpdate)},this._sendApplyFeedback=function(e,t){return e.state.method===de.bZ.State.Applied.Method.ByCard?a._commitToCapi(e,t):o.constVoid},this._sendApplyTextFeedback=function(e,t,n){return a._sendApplyFeedback(e,{kind:u.PZ.ACCEPTED,replacementText:t,subtype:n})},this._sendApplyTransformJsonFeedback=function(e,t,n){var r={kind:u.PZ.ACCEPTED,alternativeIndex:t,subtype:n},o=de.bZ.isOneGap(e)?(0,i.__assign)((0,i.__assign)({},r),{gapValue:e.gapValue}):r;return a._sendApplyFeedback(e,o)}}return e.prototype._applyFeedbackToAlert=function(e,t,n,r){var i=this;return Q.tryCatch((function(){i._alertsRepo.removeFromCapiMapping(e);var a=i._createFeedbackUndoable(e,t,r);return e.changeState(de.bZ.State.Applied.create(a,n,de.bZ.State.Applied.Method.ByCard,oe.h.create(e)))}),y.toError)},e.prototype._createFeedbackUndoable=function(e,t,n){var r=this;return{action:t,replacement:e.replaceText,commit:n,undo:function(){return r._alertsRepo.addToCapiMapping(e)}}},e.prototype._commitToCapi=function(e,t){var n=this;return(0,s.pipe)(e.rawId,g.fold((0,o.constant)((function(){return n._log.debug("skip feedback for local alert",e)})),(function(e){return n._sendFeedback((0,i.__assign)({id:e},t))})))},e.prototype._sendFeedback=function(e){var t=this;return function(){re.Vi(t._capiFeedbackClient.sendFeedback(e)).catch((function(e){ne.EP.isDroppedError(e)?t._log.debug("Stopped listening for feedback message acknowledge",e):ne.YG.isNotConnectedError(e)?t._log.warn("Failed to send alert feedback as CAPI was not connected",e):t._log.error("Failed to send alert feedback",e)}))}},e.prototype._switchToBeingApplied=function(e,t,n){var r=this;return Q.tryCatch((function(){return r._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,n)}),y.toError)},e}(),Se=n(83078);!function(e){e.toString=y.fold((function(e){return"rid:"+e.id}),(function(e){return"aid:"+e.toString()}))}(be||(be={})),function(e){e.match=function(e){return function(t){return t instanceof de.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}}(we||(we={})),function(e){e.defaultValidator=de.bZ.isDuplicatedBy}(_e||(_e={}));var xe,Ae,Ie=function(){function e(t,n,r){var i=this;this._positionManager=t,this._alertsRepo=n,this._alertDuplicateValidator=r,this._log=b.C8.Logging.getLogger("AlertManager.pipeline",b.zW.LogLevel.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=function(e){return i._log.trace("process, to process = "+e.length),i._collectChanges(i._processAlertsBatch(e))},this.reset=function(e){return i._cleanupPendingAlerts(e),i._finishAlertsChecking()},this._processAlertsBatch=function(t){var n=i._processBatch(t),r=n.toAdd,a=n.toUpdate,c=n.toAddOrUpdate,u=n.toRemoveUnfiltered,d=n.toChangeUnfiltered,p=n.toDispose,f=n.rangeChanges,m=function(e){return(0,s.pipe)(i._alertsRepo.getByAlertId(e),g.getOrElse((function(){return r.get(e)||a.get(e)||p.get(e)})))};d.forEach((function(t){return(0,s.pipe)(g.fromNullable(c.get(t.id)),g.fold((function(){return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t.id),g.map((function(n){var r=n.copy();r.patchWithRawAlert(e._prepareUpdate(r,t)),a.set(r.id,r),c.set(t.id,r)})),g.getOrElse((function(){return i._log.info("Change from CAPI: Cannot find internal AlertId.")})))}),(function(n){var r=e._prepareUpdate(n,t);a.has(n.id)?n.patchWithRawAlert(r):n.updateAlertWithManagedData(r)})))}));var v=u.reduce((function(e,t){var n=(0,s.pipe)(t,y.fold((function(e){var t=e.id;return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t),g.map((function(e){return de.bZ.isRegistered(e)?e:void 0})),g.getOrElse((function(){return i._heuristicallyRemovedAlerts.has(t)?void i._heuristicallyRemovedAlerts.delete(t):c.get(t)})))}),m));return void 0===n?(y.isLeft(t)?i._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(t.left)):i._log.error("Cannot find existing alert by id",t.right),e):((0,s.pipe)(i._getMergeTarget(t,c),g.filter(ke((function(e){return e.lensId!==n.lensId?(i._log.warn("Trying to merge alerts from different lenses",{source:n,target:e}),!1):g.isNone(n.rawId)?(i._log.warn("Trying to merge into local alert",{source:n,target:e}),!1):n.references>e.references}))),g.fold((function(){e.set(n.id,{alert:n,reason:(0,s.pipe)(t,y.swap,g.fromEither,g.chain((function(e){return e.hint})),g.chain((function(e){return e===l.A.NotFixed?g.some(de.bZ.State.Removed.Reason.capiDismiss):g.none})),g.getOrElse((function(){return de.bZ.State.Removed.Reason.capiDone})))})}),y.fold((function(e){i._log.debug("swap raw alerts with new alert",{source:n.toString(),newTarget:e.toString()}),i._alertsRepo.swapRaw(n,e);var t=Se.MH(n.rawId);(0,h.kG)(void 0===a.get(e.id),"Added alert should not be present in the updated alerts map",(function(){return a.get(e.id).toString()}));var o=n.copy();a.set(o.id,o),c.set(t,o),r.delete(e.id),p.set(e.id,e)}),(function(t){i._log.debug("swap raw alerts with existing alert",{source:n.toString(),existingTarget:t.toString()}),i._alertsRepo.swapRaw(n,t),e.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),b=new Map;return f&&f.forEach((function(e,t){(0,s.pipe)(t,m,g.fromPredicate((function(n){return n?de.bZ.isInteractable(n)?!a.has(n.id)||(i._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(i._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(i._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1)})),g.chain((function(n){return(0,s.pipe)(n.onRangeChange(e),g.map((function(e){switch(e.state){case de.bZ.Transition.State.Pending:return b.set(n.id,[n,e.removedRanges]);case de.bZ.Transition.State.Dispose:return(0,s.pipe)(n.rawId,g.fold((function(){return i._log.debug("dispose by range change on unknown rid",n.id)}),(function(e){return i._heuristicallyRemovedAlerts.set(e,n)}))),v.set(t,{alert:n,reason:de.bZ.State.Removed.Reason.textChange});default:return(0,h.vE)(e)}})))})))})),v.forEach((function(e){var t=e.alert;i._log.trace("check cancellations from toRemove: "+t.toLiteString()),(0,s.pipe)(t.rawId,g.fold((function(){r.get(t.id)&&(i._log.debug("cancel add local alert for: "+t.toLiteString()),r.delete(t.id),v.delete(t.id),p.set(t.id,t)),(0,h.kG)(!1===a.has(t.id),"Added local alert should not be present in the updated alerts map",(function(){return a.get(t.id).toString()}))}),(function(e){var n=c.get(e);n&&(c.delete(e),r.delete(n.id)?(i._log.debug("cancel add for: "+n.toLiteString()),i._log.debug("cancel remove for: "+t.toLiteString()),v.delete(t.id),p.set(t.id,t),p.set(n.id,n)):a.delete(n.id)?(i._log.debug("cancel update for: "+n.toLiteString()),n.id!==t.id&&(i._log.debug("marking update to dispose: "+n.toLiteString()),p.set(n.id,n))):i._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",n))}))),i._log.trace("check if local orphan toRemove: "+t.toLiteString()),(0,s.pipe)(i._alertsRepo.getByAlertId(t.id),g.fold((function(){i._log.debug("cancel delete for: "+t.toLiteString()),v.delete(t.id)}),o.constVoid))})),p.size>0&&i._log.debug("_cancelAlerts, to cancel = "+p.size,{alerts:Array.from(p.values()).map((function(e){return e.toLiteString()}))}),p.forEach((function(e){b.delete(e.id)&&i._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){i._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:r,toUpdate:a,toRemove:v,toStartChecking:b}},this._collectChanges=function(e){var t=e.toAdd,n=e.toUpdate,r=e.toRemove,a=e.toStartChecking,o=i._addAlerts(Array.from(t.values()),r),s=o.alertsToAdd,c=o.alertsToUpdate,l=o.alertsToRemove;return n.size>0&&i._updateAlerts(Array.from(n.values()),c),a.size>0&&i._startAlertsChecking(Array.from(a.values()),c,s),l.size>0&&i._removeAlerts(l,c),{added:s,updated:c}},this._validateAlertAdd=function(e){try{var t=!de.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==u.wQ.Impact.Critical&&e._raw.impact!==u.wQ.Impact.Advanced&&g.isSome(e.rawId)&&i._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),t||(i._log.error("CAPI provides corrupted alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,s.pipe)(e.rawId,g.exists((function(e){return g.isSome(i._alertsRepo.getByRawAlertId(e))})))?(i._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===P.R.Type.Plagiarism&&O.T.isMax(e.progress)?(i._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){i._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){i._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=function(e){var t=e.id;i._recheckedAlerts.delete(t)&&i._log.debug("Stopped watching checking state for alert",t)},this._applyRemoveToAlert=function(e){var t=e.alert,n=e.reason;return i._alertsRepo.removeFromCapiMapping(t),n!==de.bZ.State.Removed.Reason.textChange&&t.clearCapiId(),t.changeState(de.bZ.State.Removed.create(n))},this._finishAlertChecking=function(e){(0,h.kG)(i._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),i._log.debug("Stopped watching checking state for alert",e.id);var t=oe.h.create(e);return de.xS.create(t,oe.h.create(e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.IDLE))))}}return e._prepareUpdate=function(e,t){var n=(0,i.__assign)((0,i.__assign)({},e.toRawAlert()),{rev:t.rev});return u.wQ.withTransformJson(n)&&(0,s.pipe)(t.transformJson,Se.bw((function(e){return n.transformJson=e}))),(0,s.pipe)(t.extraProperties,Se.bw((function(e){return n.extra_properties=e}))),(0,s.pipe)(t.muted,Se.bw((function(e){return n.muted=e}))),n},e.prototype._processBatch=function(e){var t=this;return e.reduce((function(e,n){return we.match({alertAddOrUpdate:function(n){(0,s.pipe)(n.rawId,g.fold((function(){e.toAdd.set(n.id,n)}),(function(r){(0,s.pipe)(t._alertsRepo.getByRawAlertId(r),g.filter((function(e){return e.allowUpdate})),g.map((function(){(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((function(n){t._log.debug("got overlap in batch on update"),e.toUpdate.delete(n.id),e.toDispose.set(n.id,n)}))),e.toUpdate.set(n.id,n)})),g.getOrElse((function(){(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((function(n){t._log.info("got overlap in batch on add"),e.toAdd.delete(n.id),e.toDispose.set(n.id,n)}))),e.toAdd.set(n.id,n)}))),e.toAddOrUpdate.set(r,n)})))},rangeChange:function(t){(0,h.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:function(t){e.toRemoveUnfiltered.push(t)},alertChange:function(t){e.toChangeUnfiltered.push(t)}})(n),e}),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})},e.prototype._getMergeTarget=function(e,t){var n=this;return(0,s.pipe)(e,y.swap,g.fromEither,g.chain((function(e){return e.mergedIn})),g.chain((function(e){var r=(0,s.pipe)(n._alertsRepo.getByRawAlertId(e),g.map((function(e){return y.right(e)})),g.alt((function(){return(0,s.pipe)(g.fromNullable(t.get(e)),g.map((function(e){return y.left(e)})))})));return g.isNone(r)&&n._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),g.filter(ke((function(e){return!!e.allowUpdate||(n._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)}))))},e.prototype._addAlerts=function(e,t){var n=this;return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,ie.filter(this._validateAlertAdd),ie.reduce({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},(function(e,t){n._log.trace("Adding alert: "+t.toLiteString());var r=n._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),i=n._tryToMatchInvalid(t,r);switch(n._log.trace("Adding alert match result",{inc:t.id,match:i}),i.type){case xe.Type.Merged:var a=i.result[1];de.bZ.isNotRegistered(a.alert)?de.bZ.isRemoved(a.alert)&&n._log.warn("unexpected merge into removed alert",{alert:a,newAlert:t}):n._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,i.result);break;case xe.Type.Restored:a=i.result[1];(0,h.kG)(!e.alertsToRemove.has(a.id),"can't update alert which we wanted to remove earlier"),n._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,i.result);break;case xe.Type.Unmatched:var o=i.result,c=r.filter((function(t){return de.bZ.isDuplicateCandidate(t)&&n._alertDuplicateValidator(o,t)&&!e.alertsToRemove.has(t.id)}));(0,h.kG)(o.allowDuplicates||de.bZ.isApplicableAlert(o),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),c.length>0&&n._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:c.map((function(e){return e.toString()}))});var l=o.allowDuplicates?{result:Ae.Add,toRemove:g.none}:n._tryAddAlert(o,c);switch(l.result){case Ae.Add:case Ae.OverwriteExisting:n._log.debug("AllAlerts: Append alert to all alerts",o.toLiteString()),n._alertsRepo.addToCapiMapping(o),(0,h.kG)(!e.alertsToRemove.has(o.id),"can't add alert which we wanted to remove earlier",(function(){return o.toLiteString()})),n._alertsRepo.add(o),e.alertsToAdd.set(o.id,oe.h.create(o)),(0,s.pipe)(l.toRemove,Se.bw((function(t){if(e.alertsToAdd.has(t.id)){n._alertsRepo.removeFromCapiMapping(t);var r=t.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.canceled));n._terminateAlertChecking(r),n._alertsRepo.remove(r)}else n._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case Ae.Skip:n._log.debug("Skip alert with low priority",o.id);break;default:(0,h.vE)(l.result)}break;default:(0,h.vE)(i)}return e})))},e.prototype._updateAlerts=function(e,t){var n=this;this._log.debug("_updateAlerts, to update = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,ie.reduce(t,(function(e,t){return n._log.trace("Updating alert: "+t.toLiteString()),(0,s.pipe)(n._alertsRepo.getByRawAlertId(Se.MH(t.rawId)),g.fold((function(){return n._log.warn("tried to update unknown alert",t)}),(function(n){var r=t._raw;t.dispose();var i=e.has(n.id)?e.get(n.id)[0]:oe.h.create(n);n.enqueueRawAlertForUpdate(r),e.set(n.id,de.xS.create(i,oe.h.create(n)))}))),e})))},e.prototype._startAlertsChecking=function(e,t,n){var r=this;this._log.debug("_startAlertsChecking, to update = "+e.length,{alerts:e.map((function(e){var t=e[0],n=e[1];return[t.toLiteString(),n]}))});var i=function(e,t){var n=e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.CHECKING));return r._recheckedAlerts.add(e.id),oe.h.create(t.size>0?n.enqueueRangesRemove(t):n)};(0,s.pipe)(e,ie.reduce({updatedAlerts:t,addedAlerts:n},(function(e,t){var n=t[0],a=t[1];return(0,s.pipe)(r._alertsRepo.getByAlertId(n.id),g.fold((function(){r._log.warn("tried to start checking unknown alert",{alert:n,ranges:a})}),(function(){if(e.addedAlerts.has(n.id))e.addedAlerts.set(n.id,i(n,a));else{var t=e.updatedAlerts.has(n.id)?e.updatedAlerts.get(n.id)[0]:oe.h.create(n);e.updatedAlerts.set(n.id,de.xS.create(t,i(n,a)))}}))),e})))},e.prototype._removeAlerts=function(e,t){var n=this;e.forEach((function(e,r){(0,s.pipe)(n._alertsRepo.getByAlertId(r),g.fold((function(){n._log.warn("tried to remove unknown alert",e)}),(function(){var i=t.has(r)?t.get(r)[0]:oe.h.create(e.alert),a=n._applyRemoveToAlert(e);n._terminateAlertChecking(a),t.set(r,de.xS.create(i,oe.h.create(a)))})))}))},e.prototype._getAlertsWithMatchingRanges=function(e){var t=this;return(0,s.pipe)(this._positionManager.findIntersections(e),ie.filter((0,m.W9)(J.P.is,J.x.isVisible)),ie.filterMap((function(e){return t._alertsRepo.getByAlertId(e.meta.alertId)})),ie.filter((function(e){return!(de.bZ.isApplied(e)&&e.getAppliedRanges().length>0)})))},e.prototype._tryToMatchInvalid=function(e,t){var n=this;return(0,h.kG)(!e.isValid,"added alert should be invalid"),(0,h.kG)(de.bZ.isRegistered(e),"added alert should be in registered state",(function(){return e.toString()})),(0,s.pipe)(g.fromNullable(t.find((function(t){return!t.isValid&&t.canBeMergedWith(e)}))),g.fold((function(){return{result:e,type:xe.Type.Unmatched}}),(function(t){(0,h.kG)((0,s.pipe)(t.rawId,Se.wo((0,o.flow)(n._alertsRepo.getByRawAlertId,g.isNone))),"CAPI mapping should not contain invalid alerts"),n._log.debug("Merging new alert ("+e+") into the existing one aid("+t+")");var r=oe.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&de.bZ.isCapiDone(t)?{result:de.xS.create(r,oe.h.create(t.changeState(de.bZ.State.init))),type:xe.Type.Restored}:{result:de.xS.create(r,oe.h.create(t)),type:xe.Type.Merged}})))},e.prototype._tryAddAlert=function(e,t){return(0,s.pipe)(ae.fromArray(t),g.map((function(t){(0,h.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert","got "+t.map((function(e){return e.toString()}))+" with input ("+e.toString()+")");var n=t[0];return n.extraProperties.priority<=e.extraProperties.priority?{result:Ae.OverwriteExisting,toRemove:g.some(n)}:(e.dispose(),{result:Ae.Skip,toRemove:g.none})})),g.getOrElse((function(){return{result:Ae.Add,toRemove:g.none}})))},e.prototype._cleanupPendingAlerts=function(e){var t=this;e.removed.forEach((function(e){t._heuristicallyRemovedAlerts.delete(e)&&t._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()},e.prototype._finishAlertsChecking=function(){var e=this;return(0,s.pipe)(Array.from(this._recheckedAlerts.values()),ie.filterMap((function(t){var n=e._alertsRepo.getByAlertId(t);g.isNone(n)&&(e._log.error("tried to finish checking on missing alert",t),e._recheckedAlerts.delete(t));var r=(0,s.pipe)(n,g.filter((function(e){return de.bZ.isRegistered(e)})),g.map((function(t){return(0,o.tuple)(t.id,e._finishAlertChecking(t))})));return g.isNone(r)&&e._log.error("tried to update checking state on non-registered alert",t),r})),(function(e){return{updated:new Map(e)}}))},e}();function ke(e){return y.fold(e,e)}!function(e){!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(e.Type||(e.Type={}))}(xe||(xe={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(Ae||(Ae={}));var Ee=function(){var e=this;this._log=b.C8.Logging.getLogger("AlertManager.repository",b.zW.LogLevel.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=function(t){e._allAlerts.set(t.id,t)},this.remove=function(t){e._log.trace("AllAlerts: Clean alert from all alerts",t.toLiteString()),(0,h.kG)(0===t.references,"can not dispose alert in use",(function(){return t.toString()})),(0,h.kG)(!1===t.isValid,"can not dispose valid alert",(function(){return t.toString()})),(0,h.kG)(e._allAlerts.delete(t.id),"alert should exist in alerts list",(function(){return t.toString()})),t.dispose()},this.addToCapiMapping=function(t){t.isValid||(0,s.pipe)(t.rawId,g.fold((function(){return e._log.debug("skip register of local alert in capi mapping",t)}),(function(n){e._log.trace("register alert in capi mapping",t.toLiteString()),(0,h.kG)(void 0===e._capiAlertsIdMapping.get(n),"unexpected overlap of rawid alert",(function(){return t.toString()})),t.validate(),e._capiAlertsIdMapping.set(n,t.id)})))},this.removeFromCapiMapping=function(t){t.isValid&&((0,s.pipe)(t.rawId,Se.bw((function(n){e._log.trace("clean valid alert capi mapping for: "+t.toLiteString()),(0,h.kG)(e._capiAlertsIdMapping.delete(n),"valid alert should had valid raw id",(function(){return t.toString()}))}))),t.invalidate())},this.getByAlertId=function(t){return g.fromNullable(e._allAlerts.get(t))},this.getByRawAlertId=function(t){return(0,s.pipe)(g.fromNullable(e._capiAlertsIdMapping.get(t)),g.chain(e.getByAlertId))},this.swapRaw=function(t,n){var r=(0,s.pipe)(t.rawId,g.exists((function(t){return e._capiAlertsIdMapping.has(t)}))),i=(0,s.pipe)(t.rawId,g.exists((function(t){return e._capiAlertsIdMapping.has(t)})));(0,h.kG)(r||i,"At least one of the swapped alerts should be registered in the system");var a=t._raw;t.silentPatchWithRawAlert(n._raw),n.silentPatchWithRawAlert(a),r&&e._capiAlertsIdMapping.set(Se.MH(t.rawId),t.id),i&&e._capiAlertsIdMapping.set(Se.MH(n.rawId),n.id)},this.toArray=function(){return Array.from(e._allAlerts.values())},this.toMap=function(){return e._allAlerts},this.toJSON=function(){return{allAlerts:Array.from(e._allAlerts.entries()),idMapping:Array.from(e._capiAlertsIdMapping.entries())}}},Te=n(16185),Re=function(){function e(e,t,n,i,u,d,h,S){var x=this;void 0===S&&(S=_e.defaultValidator),this._positionManager=e,this._alternativeManager=t,this._getContent=n,this._capiEvents=i,this._capiClient=u,this._documentCounters=d,this._transformRawAlert=h,this._alertDuplicateValidator=S,this._state=c.hg.create(C.r.empty),this.state=this._state.view(C.r.toCheckingResult),this.lensesScores=c.hg.create(R.empty),this._log=b.C8.Logging.getLogger("AlertManager",b.zW.LogLevel.TRACE),this._subs=[],this._addAlerts=new U.xQ,this._removeAlerts=new U.xQ,this._changeAlerts=new U.xQ,this._flush=new U.xQ,this._alertsPerRevision=0,this._alertsRepo=new Ee,this._pipeline=new Ie(this._positionManager,this._alertsRepo,this._alertDuplicateValidator),this._invalidateAlerts=function(){x.flushAlerts();var e=p.uK(x._getAllAlertsAsArray(),(function(e){return e.isValid})),t=e[0],n=e[1];x._log.debug("Invalidate alerts...",{valid:t.length,invalid:n.length}),t.forEach((function(e){x._alertsRepo.removeFromCapiMapping(e),e.clearCapiId()})),n.forEach((function(e){return e.clearCapiId()}))},this._removeInvalidAlerts=function(e){x._log.debug("Removing invalid alerts by type '"+e+"'...");var t=x._getTypeFilter(e),n=x._getAllAlertsAsArray().filter((function(e){return!e.isValid&&de.bZ.isRegistered(e)&&t(e)}));n.forEach((function(e){return x._removeAlertBuffered(y.right(e.id))})),x._log.debug(n.length+" invalid alerts removed"),x.flushAlerts(),x._log.isEnabled(b.zW.LogLevel.TRACE)&&x._log.trace("Removed alerts",n.map((function(e){return e.toString()})))},this._onCapiEvent=function(e){try{switch("alert_received"===e.kind&&x._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void x._log.warn("got alert with empty mapping",{pname:e.alert.pname});x._addAlertBuffered(de.bZ.create(x._transformRawAlert(e.alert),x._ops,x._positionManager,x._alternativeManager));break;case"alert_removed":x._log.debug("Remove from capi #"+e.alertId+", merged in #"+g.getOrElse((function(){return"None"}))(e.mergedIn)+", hint: "+g.getOrElse((function(){return"None"}))(e.hint)),(0,s.pipe)(x._alertsRepo.getByRawAlertId(e.alertId),g.exists(de.bZ.isBulkApplied))||x._removeAlertBuffered(y.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":x._log.debug("Alert change from capi #"+e.alertId),x._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:g.fromNullable(e.extraProperties),transformJson:g.fromNullable(e.transformJson),muted:g.fromNullable(e.muted)});break;case"finish":x._log.debug("Alerts per revision (#"+e.revision+"): "+x._alertsPerRevision),x._alertsPerRevision=0,"idle"===x._capiClient.checkingState&&x._emitDomainEvent(x._pipeline.reset(e))}}catch(t){x._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=function(e){(0,s.pipe)(e,x._prepareDiff,_.v.createDiff,f.T.recover((function(e){return x._log.error("conflicts on diff creating",e)})),(function(e){return x._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e}),C.r.applyDiff,v.map(f.T.recover((function(e){return x._log.error("conflicts on diff apply",e)}))),(function(e){return x._state.modify(e)}))},this._prepareDiff=function(e){var t=e.added,n=e.updated,r=void 0===n?new Map:n,i=e.removed,c=void 0===i?new Map:i;return r.forEach((function(e,t){(0,s.pipe)(e,a.snd,de.bZ.fromAlertModel,de.bZ.shouldBeRemoved)&&(r.delete(t),c.set(t,e[0]))})),c.forEach((0,o.flow)(de.bZ.fromAlertModel,x._disposeAlert)),{added:t,updated:r,removed:c}},this._disposeAlert=function(e){if(de.bZ.isApplied(e)&&e.state.undoable.commit(),de.bZ.isNotRegistered(e))try{x._alertsRepo.remove(e)}catch(t){x._log.error("can not remove alert",t),de.bZ.isNotDisposed(e)&&e.dispose()}else x._log.error("unexpected remove of registered alert",e.toString())},this._ops=new Ce(this._positionManager,this._getContent,this._capiClient,this._alertsRepo),this.loadScores=function(e){x.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;var A=e.rangeChanged.pipe(T.U((function(e){return e.affected})),B.h((function(e){return e.length>0})),T.U((function(e){return W.vM((function(e){return e.meta.alertId}),e.filter(J.P.is))})),B.h((function(e){return e.size>0})),E.b((function(e){return x._log.debug("Range[s] changed",e)})),z.B()),I=X.F(250).pipe(G.O(0),V.T(this._flush)),k=H.RX(this._log);this._subs.push(k("_alertsInvalidation",this._capiEvents.pipe(B.h(l.h.is("session_started")),E.b(this._invalidateAlerts),Y.c(q.T(this._capiEvents.pipe(B.h(l.h.is("finish")),$.P(),j.h("alert")),this._capiEvents.pipe(B.h(l.h.is("async_check_finished")),$.P(),j.h("plagiarism")))),E.b(this._removeInvalidAlerts))),k("_capiEvents",this._capiEvents.pipe(E.b(this._onCapiEvent))),k("_alertsProccesing",this._addAlerts.pipe(V.T(this._removeAlerts),V.T(this._changeAlerts),V.T(A),Z.f(I),B.h(m.Dw),T.U(this._pipeline.process),E.b(this._emitDomainEvent))),k("_alertsBuffer",A.pipe(V.T(this._capiEvents.pipe(B.h(l.h.is("before_finish","before_async_check_finish","async_check_finished")))),j.h(H.PU),E.b(this._flush))),k("_alertOpsAlertChanges",this._ops.events.pipe(E.b(this._emitDomainEvent))),k("_lensesScoresChanges",R.fromCapi(this._capiEvents).pipe(E.b(H.wW(this.lensesScores)))),k("documentCountersChanges",r.fromAlerts(this._state.view(_.v.iso.wrap)).pipe(E.b(H.wW(this._documentCounters))))),(0,m.iR)("alerts",(function(){return x.toString()})),(0,m.iR)("triggerRemove",(function(e){x._removeAlertBuffered(y.right(e))}))}return e.prototype.flushAlerts=function(){this._flush.next()},e.prototype.loadAlerts=function(e){var t=this,n=new Map;return(0,m.Dw)(e)&&(this._log.debug(e.length+" external alert(s) where loaded"),e.map(Te.I.splitById).map((function(e){var n=e.id,r=e.local;return{id:n,alert:de.bZ.create((0,s.pipe)(r,u.wQ.matchBy(o.identity,(function(e){return(0,i.__assign)((0,i.__assign)({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,s.pipe)(e.transformJson.alternatives,g.map(d.r3.Group.fromSerialized))}})}),o.identity),t._transformRawAlert),t._ops,t._positionManager,t._alternativeManager)}})).forEach((function(e){var r=e.id,i=e.alert;t._addAlertBuffered(i),r&&n.set(r,i.id)}))),n},e.prototype.toString=function(){return JSON.stringify(this,void 0,2)},e.prototype.toJSON=function(){return{repo:this._alertsRepo}},e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._getTypeFilter=function(e){switch(e){case"alert":return function(e){return!de.bZ.isPlagiarism(e)};case"plagiarism":return function(e){return de.bZ.isPlagiarism(e)};default:return(0,h.vE)(e)}},e.prototype._addAlertBuffered=function(e){this._log.trace("_addAlert("+e.toLiteString()+")"),this._addAlerts.next(e)},e.prototype._changeAlertBuffered=function(e){this._log.trace("_changeAlert("+e.id+")"),this._changeAlerts.next(e)},e.prototype._removeAlertBuffered=function(e){this._log.trace("_removeAlert("+be.toString(e)+")"),this._removeAlerts.next(e)},e.prototype._getAllAlertsAsArray=function(){return this._alertsRepo.toArray().filter(de.bZ.isNotRemoved)},e}()},53487:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r,i=n(73805),a=n(64909),o=n(76779),s=n(17753);!function(e){e.create=function(e){var t=function(t){return(0,i.pipe)(e.get(),o.p.get(t),a.map(s.bZ.fromAlertModel))},n=function(e){return(0,i.pipe)(t(e),a.filter(s.bZ.isInteractable))},r=function(e){return(0,i.pipe)(t(e),a.filter(s.bZ.isRegistered))};return{getById:t,getRegistered:r,getInteractable:n,isRegistered:function(e){return(0,i.pipe)(r(e),a.isSome)},isInteractable:function(e){return(0,i.pipe)(n(e),a.isSome)}}}}(r||(r={}))},24273:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,k:()=>y});var r,i=n(489),a=n(65772),o=n(90049),s=n(22902),c=n(71102),l=n(45980),u=n(73805),d=n(84966),p=n(64909),f=n(95574),m=n(81670),h=n(92932),g=n(17753),v=n(10002);!function(e){e.getSubTypeFromLens=function(e){return v.R.isPriority(e)||v.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}}(r||(r={}));var y=function(){function e(e,t){var n=this;this._alertsReader=e,this._ops=t,this._log=h.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=function(e){return(0,u.pipe)(e,n._alertsReader.getById,a.fromOption((function(){return new Error("alert "+e+" not found in the repo")})))},this.undoBulk=(0,l.flow)(c.filterMap((0,l.flow)(this._alertsReader.getById,p.filter(g.bZ.isBulkApplied))),(function(e){return n._ops.undoApplied(e,g.bZ.State.Applied.Method.Bulk)()}),a.getOrElse((function(e){throw n._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,l.flow)(this._findAlert,a.map((function(e){return e.getHighlightRanges()}))),this.hasNewRangesForUpdate=(0,l.flow)(this._findAlert,a.map((function(e){return e.hasNewRangesForUpdate}))),this.applyPendingRangesUpdate=(0,l.flow)(this._findAlert,a.map((function(e){return e.applyPendingRangesUpdate()}))),this.getAppliedRanges=(0,l.flow)(this._alertsReader.getById,a.fromOption((function(){return new Error("alert not found in the repo")})),a.filterOrElse(g.bZ.isApplicableAlert,(function(e){return new Error("alert is not applicable: "+e.alertType)})),a.map((function(e){return e.getAppliedRanges()})))}return e.prototype.apply=function(e,t,n,r){var i=this;return this._log.trace("apply",e),(0,u.pipe)(this._findAlert(e),a.chain(a.fromPredicate(g.bZ.isApplicableAlert,(function(){return new Error("cannot apply not applicable alert")}))),a.chain((function(e){return(0,u.pipe)(f.vM((function(){return e.apply(t,r,n)})),a.mapLeft((function(r){return i._log.error("apply single alert error",{error:r,alert:e.toLiteAlert(),alternativeIndex:t,source:n}),r})))})))},e.prototype.applyBulk=function(e,t){var n=this;this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);var r=(0,u.pipe)(e,m.T.fromArray((function(e){return(0,u.pipe)(n._findAlert(e),a.mapLeft((function(t){return(0,l.tuple)(t,{id:e})})),a.chain(a.fromPredicate(g.bZ.isRegisteredApplicableAlert,(function(e){return(0,l.tuple)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())}))),a.chain(a.fromPredicate((function(e){return d.wQ.withTransformJson(e._raw)}),(function(e){return(0,l.tuple)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())}))),a.mapLeft((function(e){var t=e[0],r=e[1];return n._log.error(t.message,r),t})))})));return(0,u.pipe)(r,m.T.flatMap(i.getMonoid(),(function(e){return(0,u.pipe)(n._ops._applyTransformJson({alerts:e.map((function(e){return{alert:e,alternative:g.bZ.getApplicableAlternative(e,0)}})),source:g.l$.api,method:g.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),o.fold((function(t){return function(){return n._log.error("applyBulk error",t),m.T.of([],e.map((function(e){return e.id})))}}),(function(){return function(){return m.T.of(e.map((function(e){return e.id})))}})))()})))},e.prototype.confirmApplied=function(e){var t=this;return this._log.trace("commitApplied",e),(0,u.pipe)(e,m.T.fromArray((0,l.flow)(this._findAlert,a.map(g.Ev.castApplied))),a.mapLeft((function(e){return new Error("Error on trying to confirm applied alerts: "+e.rejected.join(","))})),a.chain((function(e){return t._ops._confirmApplied(e)()})))},e.prototype.dismissBatch=function(e,t){var n=this;return this._log.trace("dismissBatch",e),(0,u.pipe)(e.map((0,l.flow)(this._findAlert,a.map((function(e){return[e]})))),(0,s.fold)(w),a.chain((function(e){return n._ops._dismissBatch(e,t)()})))},e.prototype.applyFeedback=function(e,t,n){var r=this;return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,u.pipe)(this._findAlert(e),a.chain((function(e){return r._ops._alertFeedback(e,t,n)()})))},e.prototype.sendBatchFeedback=function(e,t,n){var r=this;return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,u.pipe)(e,m.T.fromArray(this._findAlert),m.T.tapFailure((function(e){return r._log.error("Cannot send batch feedback for alerts",e.rejected)})),m.T.foldSuccess((function(e){return a.right(r._ops._alertBatchFeedback(e,t,n)())})))},e.prototype.takeReference=function(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,u.pipe)(this._findAlert(e.id),a.chain((function(e){return e.takeReference(t)})))},e.prototype.changeMuteState=function(e,t){var n=this;return this._log.trace("changeMuteState",e),(0,u.pipe)(e,m.T.fromArray((function(e){return n._findAlert(e.id)})),m.T.flatMap(i.getMonoid(),(function(e){return(0,u.pipe)(n._ops._changeMuteState(e,t)(),a.mapLeft((function(e){return n._log.error("Can not change mute state",e),e})),f.MH)})))},e.prototype.changeGapValue=function(e,t){var n=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._changeGapValue(e,t)()})))},e}(),b=i.getMonoid(),w=(0,a.getApplyMonoid)(b)},44659:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(12738),i=n(51072),a=n(32952),o=function(){function e(t,n,i,a,o,s,c,l){var u=e.NamedChangesSink.factory(l),d={pm:u(e.Receiver.PM,o),dm:u(e.Receiver.PM,s),capi:u(e.Receiver.CAPI,a),dox:u(e.Receiver.DOX,i),userTextSilent:u(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.silent)),userTextEcho:u(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.echo))};e.Producer.create(e.Producer.UserText,{changes:t.changes})(d.dm,d.pm,d.capi,d.dox),e.Producer.create(e.Producer.ALERT_APPLY,c)(d.userTextEcho),e.Producer.create(e.Producer.DOX,i)(d.dm,d.pm,d.userTextSilent,d.capi),n.subscribe((function(e){"before_alert"===e.kind&&t.flushChanges()}))}return e.init=function(t,n,r,i,o,s,c){var l=new a.xQ;return new e(t,n,r,i,o,s,c,l),l},e._duplexToSync=function(e,t){return{pushChanges:function(n){e.pushChanges(n,t)}}},e}();!function(e){!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.changes.subscribe((function(t){n.forEach((function(n){return n.pushChanges(e,t)}))}))}}}(e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:function(r,a){try{var o=t.pushChanges(a);"function"==typeof o&&(o=i.Vi(o)),void 0!==o&&o.catch((function(t){return n.next({exception:t,details:{from:r,to:e}})}))}catch(t){n.next({exception:t,details:{from:r,to:e}})}}}}e.factory=function(e){return function(n,r){return t(n,r,e)}},e.create=t}(e.NamedChangesSink||(e.NamedChangesSink={}))}(o||(o={}))},52485:(e,t,n)=>{"use strict";n.d(t,{$:()=>F});var r,i,a=n(73805),o=n(49524),s=n(59312),c=n(65948),l=n(32952),u=n(95300),d=n(24209),p=n(76974),f=n(25656),m=n(18625),h=n(66310),g=n(50628),v=n(77176),y=n(2834),b=n(85985),w=n(95093),_=n(62962),C=n(95343),S=n(13444),x=n(25938),A=n(64450),I=n(83078),k=n(36991),E=n(64909),T=n(22232),R=n(65772),L=n(92932),M=n(12738),N=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=L.C8.Logging.getLogger("DuplexImpl",L.zW.LogLevel.DEBUG),this._maybePrimarySourceContent=E.none,this._secondarySourceContent=x.RI.unsafeRes(new A.i),this._syncFlash=new l.xQ,this._syncTimer=i.getImmediateTimer(),this.state=new u.X("idle"),this._changesToSecondarySource=new l.xQ,this._changesToSecondarySourceSync=new l.xQ,this.changesToPrimarySource=new l.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe((0,h.w)((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=E.some(e.reset),d.T(t._syncTimer.timer,t._syncFlash).pipe((0,g.P)(),(0,v.U)((function(){var n=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:x.RI.delta(n,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),p.of({fullText:e.fullText,change:e.change});default:return(0,T.vE)(e)}})),(0,y.b)((function(e){var n=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=E.none,t._secondarySourceContent=n})),(0,v.U)((function(e){return e.change})),(0,b.h)((function(e){return e.delta.ops.length>0})),(0,w.T)(this._changesToSecondarySourceSync),(0,y.b)((function(){t._log.debug("Emit change to secondary source")})),(0,_.n)(),(0,C.x)())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),c.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,a.pipe)(this._maybePrimarySourceContent,E.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,T.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,a.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),R.map((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(x.RI.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var n=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return E.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=E.some(this._secondarySourceContent)),(0,a.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,a.pipe)(x.RI.res(t.delta.compose(e.delta)),R.fold((function(){return R.left(new Error("Got non-document delta after apply"))}),(function(t){return R.right([e,t])}))):R.left(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),R.fold((function(e){return n._changesToSecondarySourceSync.next(n._secondarySourceContent),R.left(e)}),(function(e){var r=e[0],i=e[1];return n._secondarySourceContent=i,t===M.$.Mode.echo&&n._changesToSecondarySourceSync.next(r),n.changesToPrimarySource.next(r),R.right(void 0)})));case"reset":return E.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=E.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),R.right(void 0);case"flush":return this.changesToPrimarySource.next(e),R.right(void 0);default:(0,T.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return R.right({kind:"reset",reset:e})},e.change=function(e){return R.right((0,s.__assign)({kind:"change"},e))},e.error=function(e){return R.left(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,n,r){if(x.RI.isFlush(r))return R.right(r);if(0===e.length)return x.RI.isReset(r)?t.change({fullText:r,change:r}):0===r.prevLen?(0,a.pipe)(x.RI.res(r.delta),R.fold((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:r})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+r.prevLen);if(E.isNone(n))return x.RI.isDelta(r)&&e.length!==r.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+r.prevLen):(0,a.pipe)(x.RI.res(e.delta.compose(r.delta)),R.fold((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:r})})));if(x.RI.isDelta(r)&&I.MH(n).length!==r.prevLen)return t.error("Cannot apply delta for wrong text length");var i=x.RI.isReset(r)?r.delta:I.MH(n).delta.compose(r.delta);return k.s.deltaEq.equals(i,e.delta)?t.change({fullText:e,change:x.RI.delta(new A.i,e.length)}):(0,a.pipe)(x.RI.res(i),R.fold((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,n,r){var i=x.RI.unsafeRes((new A.i).insert(r));if(0===e.length)return t.change({fullText:i,change:i});if(E.isNone(n)){var a=e.delta.diff(i.delta);return t.change({fullText:i,change:x.RI.delta(a,e.length+k.s.calcDiffLength(a))})}return k.s.deltaEq.equals(i.delta,e.delta)?t.change({fullText:i,change:x.RI.delta(new A.i,e.length)}):t.reset(i)}}(r||(r={})),function(e){e.getImmediateTimer=function(){return{timer:p.of(void 0),reset:f.Z}},e.getAuditTimer=function(e){var t=E.none;return{timer:m.P((function(){var n=(0,a.pipe)(t,E.fold((function(){return e}),(function(t){var n=Date.now()-t;return n>e?0:n})));return t=(0,a.pipe)(t,I.vx(E.some(Date.now()))),p.of(void 0).pipe((0,S.g)(n),(0,y.b)((function(){t=E.none})))})),reset:function(){return t=E.none}}}}(i||(i={}));var F,P=n(95574),O=n(8125),B=n(44659);!function(e){e.connectAsPrimarySourceToDuplex=function(e){var t=new l.xQ,n=L.C8.Logging.getLogger("DenaliEditorToDuplexConnector",L.zW.LogLevel.DEBUG),i=new N(r.deltaChangeProcessor),s=B.R.NamedChangesSink.factory(t),c=B.R.Producer.create(B.R.Producer.UserText,{changes:i.changesToPrimarySource})(s(B.R.Receiver.DEd,{pushChanges:function(t){e.pushChanges(t,"user")}})),u=B.R.Producer.create(B.R.Producer.DEd,e)(s(B.R.Receiver.UserText,{pushChanges:function(t){var r=i.pushChanges({from:"primary",change:t});(0,a.pipe)(r,P.L9((function(r){return n.error("Cannot pass invalid change from master",r,t),i.pushChanges({from:"primary",change:e.getContents()})})),R.fold((function(e){n.fatal("Cannot reset duplex with full context",e)}),o.y))}}));return{duplex:i,fails:t,dispose:function(){c.unsubscribe(),u.unsubscribe()}}},e.duplexAsUserSource=function(e){return{changes:e.changesToSecondarySource,pushChanges:function(t,n){return e.pushChanges({from:"secondary",change:t,mode:n})},flushChanges:O.ZT,getContents:function(){return e.getSecondarySourceContents()}}},e.connectAsPrimarySourceWithoutDuplex=function(e){return{changes:e.changes,pushChanges:function(t,n){e.pushChanges(t,n===M.$.Mode.echo?"user":"api")},getContents:function(){return e.getContents()},flushChanges:function(){return e.flushChanges()}}}}(F||(F={}))},99516:(e,t,n)=>{"use strict";n.d(t,{n:()=>r,A:()=>i});var r,i,a=n(45980),o=n(25938),s=n(36991),c=n(8125),l=n(97523),u=n(24209),d=n(99391);!function(e){e.noopSync={pushChanges:c.ZT},e.ignoreResult=function(e){return{pushChanges:function(t){e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.flow)(e.pushChanges,l.map(c.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:function(t){(o.RI.isDelta(t)?o.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((function(t){return e.pushChanges(t)}))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:u.T.apply(d,e.map((function(e){return e.changes})))}}}(i||(i={}))},66654:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r,i,a=n(45980),o=n(73805),s=n(92843),c=n(68983),l=n(64909),u=n(64510),d=n(10002),p=n(76220),f=n(44827);!function(e){e.modelToCounters=function(e){return f.h.isRegistered(e)?e.counters:p.R.empty}}(r||(r={})),function(e){e.monoid=u.getMonoid(d.R.Id.ord,d.R.Meta.group),e.eq=u.getEq(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.isEmpty,e.lookup=u.lookup(d.R.Id.ord),e.applyDiff=function(t){return function(r){return function(l){return(0,o.pipe)(r,s.v.foldMap(e.monoid)(i(t),p(t),n(t)),(0,c.W)(e.monoid.concat)(l),u.filter((0,a.not)(d.R.Meta.isEmpty)))}}},e.updatePercentiles=function(e){return function(t){var n=t;return e.forEach((function(e,t){n=(0,o.pipe)(n,u.modifyAt(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),l.fold((function(){return(0,o.pipe)(n,u.insertAt(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))}),a.identity))})),n}};var t=(0,a.flow)(r.modelToCounters,d.R.Meta.fromAlertCounters),n=function(e){return function(n){return f(e)(n,t)}},i=function(e){return function(n){return f(e)(n,(0,a.flow)(t,d.R.Meta.group.inverse))}},p=function(t){return function(r,a){return e.monoid.concat(n(t)(a),i(t)(r))}},f=function(e){return function(t,n){return(0,o.pipe)(e,u.filter((function(e){return e(t.alert)})),u.map((function(){return n(t)})))}}}(i||(i={}))},926:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),a=n(42726),o=n(76779),s=n(73343),c=n(93508),l=n(57091),u=n(67434),d=n(52479),p=n(66654);!function(e){e.defaultState={alerts:o.p.empty,lenses:p.w.monoid.empty},e.get=function(r,i,a){return i.pipe(c.O(new Map),l.a(r.pipe(c.O(o.p.empty),u.R((function(e,n){return t(n,a.lensFilters)(e)}),e.defaultState)),n))},e.getMock=function(t,n){var r=a.hg.create(e.defaultState);return e.get(t,n,s.t.create(s.t.defaultLensFilters,s.t.defaultTextFilters)).subscribe(d.wW(r)),r};var t=function(e,t){return function(n){var r=o.p.Diff.toRegistered(o.p.diff(n.alerts,e));return{alerts:e,lenses:p.w.applyDiff(t)(r)(n.lenses)}}},n=function(e,t){return(0,i.__assign)((0,i.__assign)({},t),{lenses:p.w.updatePercentiles(e)(t.lenses)})}}(r||(r={}))},38365:(e,t,n)=>{"use strict";n.d(t,{dM:()=>r,j:()=>i});var r,i,a,o,s=n(42654),c=n(76606),l=n(73805),u=n(42726),d=n(89826),p=n(48837),f=n(64909),m=n(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,paid:p.Kh,criticalPriority:p.Kh,advancedPriority:p.Kh,freePriority:p.Kh,paidPriority:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=s.getStructEq({critical:s.eqNumber,advanced:s.eqNumber,free:s.eqNumber,paid:s.eqNumber,unread:s.eqNumber,criticalPriority:s.eqNumber,advancedPriority:s.eqNumber,freePriority:s.eqNumber,paidPriority:s.eqNumber,muted:s.eqNumber}),e.show=c.aM({critical:c.yt,advanced:c.yt,free:c.yt,paid:c.yt,criticalPriority:c.yt,advancedPriority:c.yt,freePriority:c.yt,paidPriority:c.yt,unread:c.yt,muted:c.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(r||(r={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){var n=(0,l.pipe)(t.goals,f.exists((function(e){return e.size>0}))),r=(0,l.pipe)(t.emotions,f.exists((function(e){return e.size>0})));return d.R$.equals(t,d.R$.unset)||(0,l.pipe)(t.domain,m.wo((function(e){return"general"===e})))&&!(f.isSome(t.audience)||f.isSome(t.style)||n||r)?0:Number(n||0)+Number(r||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:function(){return u.hg.create({kind:e.CheckingKind.Document,type:"idle"})}}}(o||(o={}))},82578:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r,i,a=n(42726),o=n(89826),s=n(64909);!function(e){e.unwrap=function(e){return a.Ri.create(s.getOrElse((function(){return e})),s.some)}}(r||(r={})),function(e){e.create=function(e,t,n,i){var c=r.unwrap(t.style),l=r.unwrap(t.audience),u=r.unwrap(t.domain),d=a.hg.create(e),p=d.lens("style").lens(c),f=d.lens("domain").lens(u),m={audience:{items:o.R$.audiences,current:d.lens("audience").lens(l),default:s.some(t.audience)},formality:{items:o.R$.formalityLevels,current:p,default:s.some(t.style),shouldDisable:function(e){return f.view((function(t){return!!t&&!o.R$.isStyleValidWithDomain(t,e)}))}},domain:{items:o.R$.domains,current:f,default:s.some(t.domain),shouldDisable:function(e){return p.view((function(t){return n.isFree?"general"!==e:!o.R$.isStyleValidWithDomain(e,t)}))}},intent:{items:o.R$.goals,current:d.lens("goals")},tone:{items:o.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:m,showSetGoalsLoader:a.hg.create(!n.demoMode&&i)}}}(i||(i={}))},81766:(e,t,n)=>{"use strict";n.d(t,{_F:()=>h});var r=n(45980),i=n(73805),a=n(64909),o=n(45442),s=n(23124),c=n(40644),l=n(38524),u=n(77176),d=n(28043),p=n(2844),f=n(93508),m=n(57091),h=function(e,t,n,r,i,a){return o.Z.composeKnot({content:g(e,t,i,a),root:v(t,n,r)})},g=function(e,t,n,i){var p=t.view(l.nL.Prism.items),f=t.pipe(u.U((function(e){return e.itemsOrd}))),m=t.pipe(u.U((0,r.flow)(l.In.getActiveItem,a.map(c.X.getId)),d.x())),h=t.view("activeAlertsCount").view((function(e){return 0===e}));return o.Z.fromSideEffect((function(t){switch(t.action.action.action.kind){case s.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case s.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}),y(p,f,m,h,n,i))},v=function(e,t,n){return o.Z.fromSideEffect((function(e){t.next(e.element)}),p.aj(n,e.view("cardsHeight")).pipe(u.U((function(e){return{disableUserActions:e[0],height:e[1]}})),f.O({disableUserActions:!1,height:0})))},y=function(e,t,n,r,o,s){return e.pipe(m.a(n,r,t),u.U((function(e){var t=e[0],n=e[1],r=e[2],c=e[3],l=t.getAt(0);return t.filter((function(e){return e.positionState.visible||e.positionState.watched&&function(e,t){return!!(0,i.pipe)(t,a.exists((function(t){return t.id===e.id})))||(0,i.pipe)(t,a.exists((function(e){return e.positionState.isHeightValid})))}(e,l)})).map(o.viewState({activeCard:n,isLastItem:r,ord:c}),s(c))})))}},5304:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),a=n(27378),o=n(42726),s=n(8125),c=n(64909),l=n(51465),u=n(22823),d=n(23124),p=n(95053),f=n(77176);!function(e){var t;function n(e){return l.UI.List.make(p.aW.getFoldableWithIndex(),r(e))}function r(t){return l.UI.Knot.make(e.IdProvider,{cell:l.UI.Knot.make(d.H.Cell,{item:l.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(t){return l.UI.Knot.make(e.ScrollableBox,{content:n(t)})},e.ScrollableBox=l.UI.Grid.make((function(e){var n=e.notify,r=e.view,l=e.slots;return a.createElement(o.F.div,(0,i.__assign)({},(0,o.Sh)(r("disableUserActions").pipe(f.U((0,s.RN)(h.disableUserActions,void 0))),h.scrollContent),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:function(e){return n({kind:t.onMount,element:c.fromNullable(e)})()}}),l.content)})),e.cell=r,e.CardStyleProvider=l.UI.Grid.make((function(e){var t=e.slots;return a.createElement("div",{className:h.cardWrapper},t.children)})),e.IdProvider=l.UI.Grid.make((function(e){var t=e.slots,n=e.state;return a.createElement(o.F.div,{"data-id":n},t.cell)}))}(r||(r={}));var m={margin:u.u.rem(.5)+" 0",background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:u.u.rem(-.5),width:u.u.rem(.5),height:u.u.percent(100),background:"none",content:"''"}}},h=u.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[m]})},60997:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});var r,i=n(51465);!function(e){e.BulkAccept=function(e){return i.UI.Node.make((function(){return null}))}}(r||(r={}))},8824:(e,t,n)=>{"use strict";n.d(t,{p:()=>$c});var r,i,a,o,s,c,l,u,d,p,f,m=n(27378),h=n(42726),g=n(51465),v=n(40644),y=n(45980),b=n(73805),w=n(8125),_=n(92932),C=n(28043),S=n(77176),x=n(59312),A=n(64909),I=n(73313),k=n(66910),E=n(22823),T=n(13097),R=n(64437),L=E.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),M=E.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),N=E.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),F=E.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),P=E.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),O=E.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),B=E.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),D=E.u.keyframes({"0%, 100%":{opacity:0}}),W=E.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),H=E.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),U=E.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),z=E.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),X=E.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),G=E.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),V={position:"relative",margin:E.u.rem(.5)+" "+E.u.rem(2)+" "+E.u.rem(.5)+" 0",userSelect:"none"},Y={position:"absolute",width:E.u.percent(100),pointerEvents:"none"},q={opacity:0,animation:L+" "+E.u.seconds(T.v4/4/1e3)+" "+"linear "+E.u.seconds(T.v4/1e3)+" forwards"},$={transformOrigin:"top",animation:M+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},j={transformOrigin:"bottom",animation:N+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},Z={transformOrigin:"top",willChange:"contents"},J={animation:F+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},K={animation:P+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},Q={animation:O+" "+E.u.seconds(T.v4/1e3)+" "+"linear reverse forwards"},ee={animation:O+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},te={animation:B+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},ne={animation:B+" "+E.u.seconds(T.v4/1e3)+" "+"linear reverse forwards"},re={transformOrigin:"top",animation:W+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",willChange:"contents",$nest:(r={},r["& ."+R.g.successWrapperSelector+" > *"]={animation:H+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},r)},ie={position:"absolute",width:E.u.percent(100),transformOrigin:"top",animation:U+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",pointerEvents:"none",$nest:(i={},i["& ."+R.g.fullCardSelector+" > :not(."+R.g.alignButtonHiddenSelector+")"]={animation:z+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},i["& ."+R.g.fullCardSelector+" > ."+R.g.alignButtonHiddenSelector]={animation:D+" "+E.u.seconds(T.v4/1e3)+" "+"linear none"},i["& ."+R.g.fullCardSelector]={transform:"translateY("+E.u.rem(-1)+")"},i)},ae={transformOrigin:"top",animation:X+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",willChange:"contents",$nest:(a={},a["& ."+R.g.fullCardSelector+" > :not(."+R.g.alignButtonHiddenSelector+")"]={animation:G+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},a["& ."+R.g.fullCardSelector+" > ."+R.g.alignButtonHiddenSelector]={animation:D+" "+E.u.seconds(T.v4/1e3)+" "+"linear none"},a)},oe=E.u.stylesheet({wrapper:[V],animationWrapper:[{position:"relative"}],shade:[Y],focused2renderedMain:[q],focused2renderedShade:[Y,$],focused2renderedShadeClockwise:[Y,j],rendered2focusedMainBase:[Z],rendered2focusedMain:[Z,J],rendered2focusedMainClockwise:[Z,K],addedMain:[Q],rendered2removedShade:[Y,ee],openedMain:[te],closedMain:[ne],focused2successMain:[re],focused2successShade:[ie],success2FocusedMain:[ae]}),se=new Map([[M,oe.focused2renderedShade],[N,oe.focused2renderedShadeClockwise],[O,oe.rendered2removedShade],[U,oe.focused2successShade]]),ce=E.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),le=E.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),ue=E.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),de=E.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),pe=E.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),fe=E.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),me=E.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),he=E.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),ge=E.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),ve=E.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),ye=E.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),be={opacity:0,animation:ce+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},we={transformOrigin:"top",animation:M+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(o={},o["& ."+R.g.bundleInnerContainerSelector]={animation:le+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(s={},s["& ."+R.g.bundleFakeCard1Selector]={animation:ue+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},s["& ."+R.g.bundleFakeCard2Selector]={animation:de+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},s)},o)},_e={transformOrigin:"top",animation:pe+" "+E.u.seconds(T.v4/1500)+" "+"linear forwards",$nest:(c={},c["& ."+R.g.bundleInnerContainerSelector]={animation:le+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(l={},l["& ."+R.g.bundleFakeCard1Selector]={animation:ue+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},l["& ."+R.g.bundleFakeCard2Selector]={animation:de+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},l)},c)},Ce={animation:fe+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(u={},u["& ."+R.g.bundleInnerContainerSelector]={animation:me+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(d={},d["& ."+R.g.bundleFakeCard1Selector]={animation:he+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},d["& ."+R.g.bundleFakeCard2Selector]={animation:ge+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},d)},u)},Se={animation:ve+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(p={},p["& ."+R.g.bundleInnerContainerSelector]={animation:me+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(f={},f["& ."+R.g.bundleFakeCard1Selector]={animation:he+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},f["& ."+R.g.bundleFakeCard2Selector]={animation:ge+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},f)},p)},xe={animation:ye+" "+E.u.seconds(T.v4/1e3)+" "+"linear forwards"},Ae=E.u.stylesheet({focused2renderedBundleMain:[be],focused2renderedBundleShade:[Y,we],focused2renderedBundleShadeClockwise:[Y,_e],rendered2focusedBundleMain:[Z,Ce],rendered2focusedBundleMainClockwise:[Z,Se],rendered2focusedBundleShade:[Y,xe]}),Ie=new Map([[M,Ae.focused2renderedBundleShade],[pe,Ae.focused2renderedBundleShadeClockwise],[ye,Ae.rendered2focusedBundleShade]]);function ke(e){var t=e.from,n=e.transition;if(!e.incomplete)return{};var r=Re("transitionClassMapper");return(0,b.pipe)(t,A.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return r.error("Impossible transition: "+e+" -> "+n.type),{main:oe.addedMain};case"focused":return{main:n.clockwise?oe.rendered2focusedMainClockwise:oe.rendered2focusedMain};case"removed":return{shade:oe.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:oe.focused2renderedMain,shade:n.clockwise?oe.focused2renderedShadeClockwise:oe.focused2renderedShade};case"removed":return{main:"",shade:n.clockwise?oe.focused2renderedShadeClockwise:oe.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?oe.focused2renderedShadeClockwise:oe.focused2renderedShade};case"focused":return{main:oe.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:oe.focused2successMain,shade:oe.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return r.error("Impossible transition: "+e+" -> "+n.type),{main:oe.addedMain};default:return{}}default:return{}}})),A.getOrElse((function(){switch(n.type){case"added":return{main:oe.addedMain};case"focused":return{main:oe.openedMain};default:return{}}})))}var Ee,Te,Re=(0,w.HP)(_.C8.Logging.getLogger),Le=function(e){var t=e.children;return m.createElement(h.F.div,{role:"animation-wrapper",className:oe.animationWrapper},t)},Me=function(e){return v.X.isAlertCard(e)?e.activeAlert.id:e.id},Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._elementState=I.f.emptyWithName("card"),t}return(0,x.__extends)(t,e),t.prototype._stateToElement=function(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;default:return null}},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.card;e.actions.next({type:k.l.Type.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId})},t.prototype.render=function(){var e=this,t=this.props,n=t.actions,r=t.card;if(!r.visualState.incomplete)return m.createElement(Le,null,m.createElement("div",{key:r.visualState.transition.type},this._stateToElement(r.visualState.transition.type)));var i=v.X.isAlertCard(r)&&v.X.isBundle(r)?function(e){var t=e.from,n=e.transition;return e.incomplete?(0,b.pipe)(t,A.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return Re("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:oe.addedMain};case"focused":return{main:n.clockwise?Ae.rendered2focusedBundleMainClockwise:Ae.rendered2focusedBundleMain,shade:Ae.rendered2focusedBundleShade};case"removed":return{shade:oe.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:Ae.focused2renderedBundleMain,shade:n.clockwise?Ae.focused2renderedBundleShadeClockwise:Ae.focused2renderedBundleShade};case"removed":return{main:"",shade:n.clockwise?oe.focused2renderedShadeClockwise:oe.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?oe.focused2renderedShadeClockwise:oe.focused2renderedShade};case"focused":return{main:oe.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:oe.focused2successMain,shade:oe.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return Re("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:oe.addedMain};default:return{}}default:return{}}})),A.getOrElse((function(){switch(n.type){case"added":return{main:oe.addedMain};case"focused":return{main:oe.openedMain};default:return{}}}))):{}}(r.visualState):ke(r.visualState),a=i.main,o=i.shade,s=h.hg.create(void 0===o?A.none:(0,b.pipe)(r.visualState.from,A.map((function(e){return{state:e,className:o}}))));return!a&&A.isNone(s.get())&&requestAnimationFrame((function(){return n.next({type:k.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})})),m.createElement(I.f.Context.Provider,{value:this._elementState},m.createElement(Le,null,s.view((0,y.flow)(A.map((function(t){var i=t.state,a=t.className;return m.createElement("div",{className:a,key:"shade"+i+Me(r),onAnimationEnd:function(e){Ie.get(e.animationName)!==a&&se.get(e.animationName)!==a||(n.next({type:k.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId}),requestAnimationFrame((function(){return s.set(A.none)})))}},e._stateToElement(i))})),A.toUndefined)),m.createElement("div",{className:a,key:"expanded"===r.visualState.transition.type?"focused":r.visualState.transition.type,onAnimationEnd:function(){return n.next({type:k.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})},onTransitionEnd:function(){"presuccess"===r.visualState.transition.type&&n.next({type:k.l.Type.startTransitionTo,id:r.id,transition:{type:"success",clockwise:r.visualState.transition.clockwise}})}},this._stateToElement(r.visualState.transition.type))))},t}(m.Component),Fe=n(90351),Pe=n(71031),Oe=n(41439),Be=n(45836),De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._createCardToggler=function(e){return function(){return t.props.actions.next({type:k.l.Type.hover,kind:e,id:t.props.cardId})}},t}return(0,x.__extends)(t,e),t.prototype.componentWillUnmount=function(){this._createCardToggler("unhover")()},t.prototype.render=function(){var e=this.props,t=e.getActiveAlert,n=e.cardId,r=e.actions,i=e.children,a=e.counter,o=e.className;return m.createElement(h.F.div,(0,x.__assign)({"data-aid":n,onClick:function(e){var n=t();r.next({type:k.l.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:e.clientX,y:e.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,h.Sh)(o,je.wrapper,je.miniCard)),m.createElement(Be.XY,{className:je.contentWrapper},i),m.createElement("div",{className:je.iconContainer},a&&m.createElement("div",{className:He},a),m.createElement("div",{className:ze},m.createElement(Oe.JO.Arrow,{className:je.activeTopIcon}),m.createElement(Oe.JO.Arrow,{className:je.activeBottomIcon}))))},t}(m.Component),We="baseMiniCounterContainer",He=E.u.joinClasses([We,E.u.style({position:"absolute",height:E.u.percent(100),top:0,right:0,zIndex:T.VN,margin:"auto 0",background:Fe.Il.CoreNeutral0,opacity:1})]),Ue="baseMiniActivateBtnSelector",ze=E.u.joinClasses([Ue,E.u.style({position:"absolute",top:0,right:0,height:E.u.percent(100),zIndex:T.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:Fe.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),Xe={position:"relative",display:"flex",overflow:"hidden",borderRadius:E.u.rem(T.fx),background:Fe.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:(Ee={"&:hover":{background:Fe.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:E.u.seconds(.2)}},Ee["&:hover ."+Ue]={opacity:1},Ee["&:hover .baseMiniCounterContainer"]={opacity:0},Ee)},Ge={overflow:"hidden",margin:"0 "+E.u.rem(3)+" 0 "+E.u.rem(2),color:Pe.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:E.u.rem(1.5)},Ve={position:"absolute",top:0,right:E.u.rem(.5),bottom:0,display:"flex"},Ye={display:"flex",margin:E.u.rem(.1)+" 0 "+E.u.rem(-1.25),transform:"rotate(180deg)"},qe={$nest:{"&:before":{position:"absolute",width:E.u.px(10),height:E.u.px(10),borderRadius:E.u.percent(50),content:"''",transform:"scale(.5)"}}},$e={$nest:{"&:before":{margin:"auto 0 auto "+E.u.rem(.75)}}},je=E.u.stylesheet({wrapper:[Xe],contentWrapper:[Ge],iconContainer:[Ve],activeTopIcon:[Ye],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[qe],miniCard:[qe,$e]}),Ze=n(79844),Je=n(39499),Ke=n(57091);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(Te||(Te={}));var Qe,et,tt,nt=function(e){var t=e.actions,n=e.isLastCard,r=m.useContext(Ze.m.Context).successLens.fixedText.titles,i=h.hg.create(Te.stage0),a=function(){return t.next({type:k.l.Type.switchToNext})};return m.createElement(h.F.div,{className:ut.successWrapper},m.createElement(Be.P1,{className:ut.successText,onAnimationEnd:function(){i.set(Te.stage1)}},r[(0,w.TN)(r.length)]),m.createElement(h.F.span,null,i.view((function(e){return e>=Te.stage1&&m.createElement("span",{onAnimationEnd:function(){return i.set(Te.stage2)}},m.createElement(Oe.JO.CheckmarkAnimated,{className:ut.successCheckMark}))}))),m.createElement(h.F.span,{className:ut.successBtnHolder},n.pipe(Ke.a(i,(function(e,t){return t<Te.stage2?null:e?m.createElement(Je.zx.Caps,{className:ut.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):m.createElement(Je.zx.Caps,{className:ut.successBtn,name:"next",key:"next-card",onClick:a},"Next")})))))},rt=E.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),it={fontWeight:"bold",lineHeight:E.u.rem(2),animation:rt+" "+E.u.seconds(.2)+" linear forwards"},at={position:"relative",borderRadius:E.u.rem(T.Jr),background:Fe.Il.CoreNeutral0,boxShadow:"0 "+E.u.rem(.625)+" "+E.u.rem(T.mJ)+" 0 rgba(198, 203, 222, .45)"},ot={display:"flex",padding:E.u.rem(1.5)+" "+E.u.rem(2),alignItems:"center"},st={marginLeft:E.u.rem(1),minWidth:0,minHeight:0,width:E.u.rem(1.325),height:E.u.rem(1.325),animation:rt+" "+E.u.seconds(.2)+" linear forwards"},ct={float:"right",width:E.u.rem(4),textAlign:"center",animation:rt+" "+E.u.seconds(.2)+" linear forwards"},lt={backgroundColor:Fe.Il.CoreGreen50,color:Fe.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:Pe.mb}}},ut=(0,x.__assign)((0,x.__assign)({},E.u.stylesheet({successText:[it],successCheckMark:[st],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[ct],doneBtn:[ct,lt]})),{fullCard:E.u.joinClasses([R.g.fullCardSelector,E.u.style(at)]),successWrapper:E.u.joinClasses([R.g.successWrapperSelector,E.u.style(at,ot)])});!function(e){e.Mini=De,e.Card=Ne,e.Success=nt}(Qe||(Qe={})),function(e){e.Item=function(e){var t=e.className,n=e.children,r=e.onChange,i=e.checked,a=e.tabIndex,o=e.id;return m.createElement(h.F.label,(0,x.__assign)({},(0,h.Sh)(yt.radio,t)),i.view((function(e){return m.createElement(m.Fragment,{key:"radio-"+o},m.createElement("input",{onChange:r,tabIndex:a||-1,type:"radio",checked:e,className:yt.radioInputHidden}),m.createElement("span",{className:gt}))})),n)},e.Group=function(t){var n=t.items,r=t.selectedItemIndex,i=t.itemWrapperClassName,a=t.onChange;return m.createElement(h.F.Fragment,null,n.map((function(t,n){return m.createElement(e.Item,{id:n,key:n,onChange:function(){r.set(n),a&&a(n)},checked:r.view((function(e){return n===e})),className:i},t)})))}}(tt||(tt={}));var dt,pt,ft,mt,ht="radioInput",gt=E.u.joinClasses([ht,E.u.style({display:"inline-block",boxSizing:"border-box",minWidth:E.u.rem(1),width:E.u.rem(1),height:E.u.rem(1),border:E.u.rem(.125)+" solid "+Pe.FW,borderRadius:E.u.percent(50),backgroundColor:Fe.Il.CoreNeutral0,content:"' '"})]),vt={outline:"none",appearance:"none",$nest:(et={},et["&:checked + .radioInput"]={border:E.u.rem(.25)+" solid "+Fe.Il.CoreBlue50},et)},yt=E.u.stylesheet({radioInputHidden:[vt],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]}),bt=n(18244),wt=function(e){var t=ke(e.visualState).shade;m.useEffect((function(){t||e.onFocus()}),[]);var n=e.theme||{};return m.createElement(h.F.div,{className:n.container},e.header,m.createElement(h.F.div,{className:n.innerContainer},m.createElement(h.F.div,(0,x.__assign)({},(0,h.Sh)(Rt.wrapper,n.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),m.createElement(h.F.div,(0,x.__assign)({},(0,h.Sh)(Rt.grid,n.content)),m.createElement("div",{className:Rt.mainContent},e.body),m.createElement("div",{className:Rt.footerContent},e.footer),m.createElement("div",{className:Rt.actions},e.subActions,m.createElement("div",{className:Rt.spacerOne}),e.navigation,m.createElement("div",{className:Rt.spacerFloat}),e.mainActions))),e.extra))},_t="& > * + *",Ct=.75,St={position:"relative"},xt={padding:E.u.rem(1)+" "+E.u.rem(.5)+" "+E.u.rem(Ct)+" "+E.u.rem(1)},At={padding:"0 "+E.u.rem(.5)+" 0 "+E.u.rem(1),$nest:(dt={},dt[_t]={marginTop:E.u.rem(Ct)},dt)},It={padding:"0 "+E.u.rem(.5)+" 0 "+E.u.rem(1),$nest:(pt={},pt[_t]={marginTop:E.u.rem(Ct)},pt)},kt={display:"flex",marginLeft:E.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},Et={width:E.u.rem(1),flexShrink:1},Tt={$nest:(ft={},ft[_t]={marginTop:E.u.rem(Ct)},ft)},Rt=(0,x.__assign)((0,x.__assign)({},E.u.stylesheet({mainContent:[At],footerContent:[It],actions:[kt],spacerOne:[Et],spacerFloat:[{flex:1}],grid:[Tt]})),{fullCard:E.u.joinClasses([R.g.fullCardSelector,E.u.style(St)]),wrapper:E.u.joinClasses([R.g.fullCardSelector,E.u.style(St,xt)])}),Lt=n(6322),Mt=n(84966),Nt=n(83078),Ft=n(18208),Pt=n(94503),Ot=n(17753),Bt=n(41199),Dt=n(50536);!function(e){var t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(mt||(mt={}));var Wt,Ht=n(83305);!function(e){e.Regular=function(e){return m.createElement("span",(0,x.__assign)({},(0,h.Sh)(Vt.badge,e.className)),e.children)},e.New=function(t){var n=t.className;return m.createElement(e.Regular,{className:n},"New")},e.NewWrapper=function(t){var n=t.children;return m.createElement("div",null,m.createElement(e.New,null),n)},e.Premium=function(t){var n=t.className;return m.createElement(e.Regular,(0,x.__assign)({},(0,h.Sh)(Vt.premiumBadge,n)),m.createElement(Oe.JO.PaidLink,{className:Vt.premiumBadgeIcon,width:12}),"PREMIUM")},e.Business=function(t){var n=t.className;return m.createElement(e.Regular,(0,x.__assign)({},(0,h.Sh)(n)),"BUSINESS")}}(Wt||(Wt={}));var Ut={display:"inline-block",padding:E.u.rem(Fe.Zh.BadgeY)+" "+E.u.rem(Fe.Zh.BadgeX),height:E.u.rem(Fe.L3.Badge),borderRadius:E.u.rem(T.mA),background:Fe.Il.CoreGreen10,color:Fe.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:Fe._5.Badge,letterSpacing:Fe.LK.Badge,fontWeight:Fe.U9.Badge,fontSize:E.u.rem(Fe.Bf.Badge),lineHeight:E.u.rem(Fe.L3.Badge)},zt={marginRight:Fe.Zh.BadgeX,maxWidth:E.u.rem(Fe.L3.Badge),maxHeight:E.u.rem(Fe.L3.Badge),minWidth:E.u.rem(Fe.L3.Badge),minHeight:E.u.rem(Fe.L3.Badge),verticalAlign:"top"},Xt={background:Fe.Il.CoreYellow20,color:Fe.Il.CoreYellow80},Gt={fill:Fe.Il.CoreYellow80},Vt=E.u.stylesheet({badge:[Ut],badgeIcon:[zt],premiumBadge:[Ut,Xt],premiumBadgeIcon:[zt,Gt]}),Yt=n(58199),qt=n(52479),$t=n(99391),jt=n(76974),Zt=n(2844),Jt=n(93508),Kt=n(66310);function Qt(e){var t=e.value,n=e.initValue,r=void 0===n?Yt.g.MIN:n,i=e.wrapperClass,a=e.progressClass,o=e.isLoading,s=void 0===o?jt.of(!1):o,c=en(t,r);return m.createElement(h.F.div,(0,x.__assign)({},(0,h.Sh)(pn.wrapper,i)),m.createElement(tn,{width:c,progressClass:a,isLoading:s}))}function en(e,t){void 0===t&&(t=Yt.g.MIN);var n=h.hg.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return n.set(!0)}))})),Zt.aj(qt.Dx(e),n,(function(e,n){return n?e:t}))}function tn(e){var t=e.width,n=e.progressClass,r=e.isLoading,i=t.pipe(S.U((function(e){return e+"%"}))),a=t.pipe(S.U(Yt.g.prism.reverseGet),S.U((function(e){return e>0?e+.75+"%":0})),Jt.O(0)),o=r.pipe(Kt.w((function(e){return e?i:"0"}))),s=t.pipe(S.U(Yt.g.isMin),$t.shareReplay({bufferSize:1,refCount:!0}));return m.createElement(m.Fragment,null,m.createElement(h.F.div,(0,x.__assign)({},(0,h.Sh)(pn.borderContainer,s.pipe(S.U((0,w.RN)(pn.borderContainerZeroWidth,pn.borderContainerWithMinWidth)))),{style:{width:a}})),m.createElement(h.F.div,(0,x.__assign)({},(0,h.Sh)(n||pn.defaultProgress,pn.progressBar,s.pipe(S.U((0,w.RN)(pn.progressBarZeroWidth,pn.progressBarWithMinWidth)))),{style:{width:i}})),m.createElement(h.F.div,{className:pn.loading,style:{width:o}}))}var nn,rn=E.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),an={position:"relative",width:E.u.percent(100),height:E.u.rem(.25),borderRadius:E.u.rem(T.Jr),backgroundColor:Pe.xO},on={position:"relative",top:0,height:E.u.percent(100),borderRadius:E.u.rem(T.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},sn={minWidth:E.u.px(4)},cn={position:"absolute",backgroundColor:Fe.Il.CoreNeutral0},ln={minWidth:E.u.px(6)},un={position:"absolute",minWidth:0,backgroundImage:Pe.b6,backgroundSize:"20px 20px",transition:"none",animation:rn+" 1s linear infinite"},dn={backgroundImage:Pe.Xd},pn=E.u.stylesheet({wrapper:[an,an],progressBar:[on],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[sn],borderContainer:[on,cn],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[ln],loading:[on,un],defaultProgress:[dn]}),fn=n(32577),mn=n(22232);!function(e){!function(e){e.sparkles="sparkles",e.priority="priority"}(e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(nn||(nn={}));var hn,gn,vn={position:"relative",width:E.u.percent(100)},yn={position:"relative",margin:"0 0 "+E.u.rem(.5)},bn={display:"flex",boxSizing:"border-box",padding:E.u.rem(1)+" "+E.u.rem(2)+" "+E.u.rem(1)+" "+E.u.rem(.75),width:E.u.percent(100),borderRadius:E.u.rem(T.fx),background:Fe.Il.BackgroundNotification,color:Fe.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},wn={width:E.u.percent(100)},_n={display:"inline-block",width:E.u.percent(100)},Cn={margin:E.u.rem(-.5)+" "+E.u.rem(.75)+" "+E.u.rem(-.5)+" 0"},Sn={position:"absolute",top:0,right:0,marginTop:E.u.rem(.5),marginRight:E.u.rem(.4),marginLeft:E.u.rem(.5)},xn={stroke:Pe.FW},An={margin:"0 0 "+E.u.rem(.5),color:Fe.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:E.u.rem(Fe.xv.BodySize),lineHeight:E.u.rem(1.25)},In={marginTop:E.u.rem(-.1),marginBottom:E.u.rem(-.25),color:Fe.Il.CoreNeutral0,fontSize:E.u.rem(Fe.xv.BodySize),lineHeight:E.u.rem(1.25)},kn=E.u.prefixedStylesheet("notifications",{wrapper:[vn],notification:[yn],flexibleNotification:[yn,{display:"flex",width:"auto"}],contentWrapper:[bn],miniContentWrapper:[bn,{position:"relative",width:"auto"}],fullWidthNotification:[yn,bn,wn],content:[_n],miniContent:[{flex:1}],alertIcon:[Cn],closeIconWrapper:[Sn],closeIcon:[xn],header:[An],description:[In]});!function(e){e.Wrapper=function(t){var r=t.notification,i=t.onClose,a=t.children,o=t.theme,s=void 0===o?{}:o;m.useEffect((function(){return r.actions.next("shown")}),[]);var c={wrapper:s.wrapper||n.wrapper,content:void 0!==s.content?Object.assign({},n.content,s.content):n.content};return m.createElement("div",{className:c.wrapper},m.createElement(e.Base,{metadata:r.metadata,onClose:i,theme:c.content},a))},e.Base=function(n){var r=n.metadata,i=n.onClose,a=n.theme,o=n.children;return m.createElement("div",{className:a.wrapper},t(r,a.icon),m.createElement("div",{className:a.content},o),!function(e){return e.priority===nn.Priority.high||e.priority===nn.Priority.highest}(r)&&m.createElement(e.CloseButton,{onClick:i,className:a.close}))};var t=function(t,n){switch(t.icon){case nn.Icon.sparkles:return m.createElement(Oe.JO.Sparkles,{className:n});case void 0:case nn.Icon.priority:return m.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,mn.vE)(t.icon)}};e.AdHoc=function(t){var r=t.title,i=t.children,a=t.className,o=t.onClose;return m.createElement("div",(0,x.__assign)({},(0,h.Sh)(n.content.wrapper,a)),m.createElement("div",{className:n.content.content},m.createElement(e.TitledContent,{title:r},i)),m.createElement(e.CloseButton,{onClick:o,className:n.content.close}))},e.PriorityIcon=function(e){var t=e.priority,n=e.className;switch(t){case nn.Priority.lowest:case nn.Priority.low:return m.createElement(Oe.JO.NotificationInfo,{className:n});case nn.Priority.average:return m.createElement(Oe.JO.NotificationWarning,{className:n});case nn.Priority.high:case nn.Priority.highest:return m.createElement(Oe.JO.NotificationError,{className:n});default:return(0,mn.vE)(t)}},e.CloseButton=function(e){var t=e.onClick,n=e.className;return m.createElement(Je.zx,{name:"closeNotification",className:n,onClick:t},m.createElement(Oe.JO.Close,{className:kn.closeIcon,width:12}))},e.TitledContent=function(t){var n=t.title,r=t.children;return r?m.createElement(m.Fragment,null,m.createElement(Be.P1,{className:kn.header},n),m.createElement(e.Content,null,r)):m.createElement(Be.P1,{className:kn.description},n)},e.Content=function(e){var t=e.children;return m.createElement(Be.XY,{className:kn.description},t)};var n={wrapper:kn.wrapper,content:{wrapper:kn.fullWidthNotification,icon:kn.alertIcon,content:kn.content,close:kn.closeIconWrapper}}}(hn||(hn={})),function(e){e.Wrapper=function(e){var t=e.notification,n=e.onClose,r=e.children;return m.useEffect((function(){return t.actions.next("shown")}),[]),m.createElement("div",{className:kn.flexibleNotification},m.createElement(hn.Base,{metadata:t.metadata,onClose:n,theme:{wrapper:kn.miniContentWrapper,icon:kn.alertIcon,content:kn.miniContent,close:kn.closeIconWrapper}},r))}}(gn||(gn={}));var En,Tn=n(63979),Rn=n(54071),Ln=n(60653),Mn=n(66831),Nn=n(60430),Fn=n(66265),Pn=n(49708),On=n(2834),Bn=n(95093),Dn=n(17343),Wn=n(40151),Hn=n(10002),Un=n(16323),zn={$nest:{"&:before":{position:"absolute",width:E.u.px(10),height:E.u.px(10),borderRadius:E.u.percent(50),content:"''",transform:"scale(.5)"}}},Xn={opacity:1,transition:"opacity .3s"},Gn={color:Fe.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:Fe.xv.SubheadingLetterSpacing,fontSize:E.u.rem(Fe.xv.SubheadingSize),lineHeight:E.u.rem(Fe.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:E.u.rem(.25)}}},Vn={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:E.u.px(2),left:E.u.rem(-1.1),margin:"auto 0"}}},Yn={$nest:{"&:before":{top:0,bottom:0,left:E.u.rem(-1.1),margin:E.u.rem(.25)+" 0 auto 0"}}},qn={margin:"0 "+E.u.rem(.4)+" 0 "+E.u.rem(.2),width:E.u.rem(.85),height:E.u.rem(.85),objectFit:"contain"},$n={position:"absolute",top:0,bottom:0,left:E.u.rem(-1),margin:"auto",background:Fe.Il.CoreNeutral0,transform:"translateX(-50%)"},jn={left:E.u.rem(-1),minWidth:E.u.rem(1),minHeight:E.u.rem(1),fill:Fe.Il.CoreYellow50},Zn={minWidth:"initial",minHeight:"initial",padding:E.u.rem(.3)+" "+E.u.rem(.25),cursor:"pointer",borderRadius:E.u.percent(100),marginLeft:E.u.rem(.5),$nest:{"&:hover":{background:Fe.Il.CoreNeutral10}}},Jn={display:"flex",alignItems:"center",padding:"0 "+E.u.rem(.25),borderRadius:E.u.rem(T.fx),cursor:"pointer",background:Fe.Il.CoreYellow20,color:Fe.Il.CoreYellow80,marginLeft:E.u.rem(.5),$nest:{"&:hover":{background:Fe.Il.CoreYellow10}}},Kn={minWidth:"initial",minHeight:"initial",fill:Fe.Il.CoreYellow80,marginLeft:E.u.rem(.3)},Qn={display:"flex",alignItems:"flex-start",top:E.u.rem(.125),minWidth:"initial",minHeight:"initial",background:Fe.Il.CoreNeutral0},er={color:Fe.Il.CoreNeutral90,textTransform:"none",letterSpacing:Fe.xv.SmallLetterSpacing,fontWeight:Fe.xv.SmallWeight,fontSize:E.u.rem(Fe.xv.SmallSize),lineHeight:E.u.rem(Fe.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},tr={color:Fe.Il.CoreNeutral50,textTransform:"none"},nr={width:E.u.rem(1),height:E.u.rem(1)},rr={display:"inline-flex",padding:"0 "+E.u.rem(.25),borderRadius:E.u.rem(T.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},ir={display:"inline-flex",marginLeft:E.u.rem(.1),minWidth:0,minHeight:0},ar=E.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[Xn],moreHidden:[Xn,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[Gn],lens:[Gn,Vn],lensMinimal:[Yn],voxLogo:[qn],cardLogo:[$n],premiumIcon:[jn],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[Zn],newPremiumLabel:[Jn],newPremiumLabelIcon:[Kn],takeawayIcon:[Qn],minimalTitle:[er],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[tr],toneLogo:[$n,nr],fluencyLabel:[Gn,rr],fluencyInfo:[ir],dot:[zn]});!function(e){e.none="none",e.persistent="persistent",e.new="new"}(En||(En={}));var or=function(e){var t=e.className,n=e.vox,r=e.isMinimalCard,i=m.useContext(Ze.m.Context).vox.styleGuide;return m.createElement("div",(0,x.__assign)({},(0,h.Sh)(t,ar.voxTitle,r?ar.minimalTitle:void 0)),m.createElement("span",null,n.companyName," ",i))},sr=function(e){var t=e.logoUrl,n=e.className;return m.createElement("img",(0,x.__assign)({src:t},(0,h.Sh)(n,ar.voxLogo)))},cr=function(e){var t=e.title,n=e.layoutDensity;return m.createElement(Be.XY,{className:(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return ar.minimalTitle}),(function(){return ar.toneTitle})))},m.createElement(Un.d,{emojiClassName:ar.toneLogo},t))};function lr(e){return Hn.R.outcomeTypeMatch(e.lensType)({correctness:R.m.dotCorrectness,clarity:R.m.dotClarity,premium:R.m.dotAdvanced,engagement:R.m.dotEngagement,delivery:R.m.dotDelivery,vox:R.m.dotVox})}function ur(e,t,n,r,i){var a=e.extraProperties;return Bt.$.isDemoPremium(e)?function(e,t){return{style:R.m.dot,description:m.createElement("div",{className:(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return ar.minimalTitle}),(function(){})))},m.createElement(Oe.JO.Paid,(0,x.__assign)({width:14},(0,h.Sh)(ar.cardLogo,ar.premiumIcon))),e.lensName)}}(e,n):A.isSome(a.tone)?function(e,t){return{style:lr(e),description:m.createElement(cr,{title:e.title,layoutDensity:t})}}(e,n):t?A.isSome(a.vox)?function(e,t){return{style:R.m.dotVox,description:m.createElement(m.Fragment,null,(0,b.pipe)(e.logoUrl,A.fold((function(){return null}),(function(e){return m.createElement(sr,{logoUrl:e,className:ar.cardLogo})}))),m.createElement(or,{vox:e,isMinimalCard:t===v.X.RenderOptions.Density.minimal}))}}(a.vox.value,n):Bt.$.isTakeaway(e)?function(e,t,n){return{style:lr(e),description:m.createElement("div",{className:(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return ar.minimalTitle}),(function(){})))},Bt.$.isTakeaway(e)&&m.createElement(Oe.JO.Megaphone,(0,x.__assign)({width:16},(0,h.Sh)(ar.cardLogo,ar.takeawayIcon))),t===v.X.RenderOptions.Density.minimal?n:e.lensName)}}(e,n,i):Bt.$.isFree(e)?(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return function(e,t){return{style:lr(e),description:t||m.createElement(Be.XY,{className:ar.minimalTitle},e.miniCardTitle)}}(e,i)}),(function(){return function(e){return{style:lr(e),description:e.lensName}}(e)}))):function(e,t,n){return{style:lr(e),description:m.createElement("div",(0,x.__assign)({},(0,h.Sh)(ar.dualItemLabel,(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return ar.minimalTitle}),(function(){}))))),m.createElement("span",{className:ar.dualItemLabel},e.lensName,m.createElement(mr,{highlightStyle:t})))}}(e,r,n):null}var dr,pr=function(e){var t=e.label;return m.createElement("span",{className:ar.fluencyLabel},t,m.createElement(Je.RZ,{iconWidth:10,buttonClass:ar.fluencyInfo,iconClass:ar.fluencyInfo,title:m.useContext(Ze.m.Context).card.fluency.tooltip}))},fr=function(e){var t=e.style,n=e.description;return m.createElement("span",(0,x.__assign)({},(0,h.Sh)(ar.lens,ar.dot,t)),n)},mr=function(e){var t=e.highlightStyle;if(t===En.none)return null;var n=m.useContext(Ze.m.Context),r=t===En.new?m.createElement("div",{className:ar.newPremiumLabel},n.premiumAlertLabel.new,m.createElement(Oe.JO.Paid,{className:ar.newPremiumLabelIcon,width:12})):m.createElement(Oe.JO.Paid,{className:ar.premiumPersistentTooltipIcon,width:10});return m.createElement(Ln.u,{align:"topCenter",title:n.premiumAlertLabel.tooltip.includedWithPaid},r)},hr=function(e){var t=e.style,n=e.description,r=e.extraStyle;return m.createElement("span",(0,x.__assign)({},(0,h.Sh)(r,ar.lensMinimal,ar.lens,ar.dot,t)),n)},gr=function(e){return(0,b.pipe)(ur(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),A.fromNullable,A.map((function(t){return m.createElement("div",{className:e.className},(0,b.pipe)(e.activeAlert.extraProperties.fluencyMessage,A.fold((function(){return(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return m.createElement(hr,(0,x.__assign)({},t))}),(function(){return m.createElement(fr,(0,x.__assign)({},t))})))}),(function(n){return(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.match(m.createElement(m.Fragment,null,m.createElement(fr,(0,x.__assign)({},t)),m.createElement(pr,{label:n})),m.createElement(fr,(0,x.__assign)({},t)),m.createElement(hr,{style:t.style,extraStyle:ar.minimalTitle,description:e.activeAlert.miniCardTitle})))}))))})),A.getOrElse((function(){return m.createElement("div",{"data-purpose":"label-placeholder"})})))},vr=["b","i","br","ul","li"];!function(e){e.renderToHtml=function(e,t){var n=t?{allowedTags:vr.concat(["a"]),linkRegExp:t}:{allowedTags:vr};return bt.yG(e,n)}}(dr||(dr={}));var yr=function(e){var t=e.card,n=t.activeAlert,r=t.id,i=t.visualState,a=e.actions,o=e.mode,s=e.className,c=m.useContext(Ze.m.Context);return m.createElement(Je.zx.Tertiary,{key:"toggle-more",name:wr(i,c),title:"mini"===o?wr(i,c):"",className:s,onClick:bt.hz((function(){var e=v.X.isCardOpen(i);a.next({type:k.l.Type.startTransitionTo,id:r,transition:{type:e?"focused":"expanded",clockwise:!0}}),e||a.next({type:k.l.Type.alertFeedback,alertId:n.id,feedbackType:Mt.PZ.EXPANDED})}))},v.X.isCardOpen(i)?m.createElement(Oe.JO.Arrow,{key:"more",className:ar.lessIcon}):m.createElement(Oe.JO.QuestionMark,{key:"expand"}),"default"===o&&wr(i,c))},br=function(e){var t=e.visualState,n=e.children,r=e.className;return m.createElement("div",{className:(v.X.isCardOpen(t)?ar.more:ar.moreHidden)+" "+r},n)};function wr(e,t){var n=t.card;return v.X.isCardOpen(e)?n.less:n.more}var _r=function(e,t,n,r,i,a){return(0,x.__assign)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:E.u.rem(2),borderRadius:i,backgroundColor:Fe.Il.CoreNeutral0,boxShadow:r,content:"' '"},a&&"bottom"!==a?{top:n}:{bottom:n})},Cr="0 "+E.u.rem(.25)+" "+E.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",Sr={marginRight:E.u.rem(1),flexShrink:0,maxWidth:E.u.percent(100)},xr={padding:"0 "+E.u.rem(1)},Ar={padding:"0 "+E.u.rem(1.9)+" 0 "+E.u.rem(1)},Ir={position:"absolute",top:E.u.rem(.27),right:E.u.rem(.5)},kr={display:"grid",width:E.u.percent(100),gridGap:E.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},Er={minWidth:E.u.rem(7)},Tr={marginLeft:E.u.rem(.5)},Rr={color:Fe.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:E.u.rem(1.5)},Lr={$nest:{"&:before":_r(E.u.rem(.5),-10,E.u.rem(-.5),Cr,E.u.rem(T.Jr)),"&:after":_r(E.u.rem(1),-20,E.u.rem(-1),Cr,E.u.rem(T.Jr))}},Mr={transition:"opacity .2s"},Nr=E.u.prefixedStylesheet("super",{updateAllBtnCommon:[Sr],updateAllBtn:[Sr,xr],updateAllBtnLoading:[Sr,Ar],updateBtnSpinner:[Ir],optionsContainer:[kr],optionLabel:[Er],optionRadio:[Tr],optionSecondaryAttribute:[Rr],optionExample:[Rr,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[Lr],loadingWrapper:[Mr],loadingWrapperInvisible:[Mr,{opacity:0,pointerEvents:"none"}]}),Fr=n(17629),Pr=function(e){var t=e.examples,n=e.layoutDensity;return m.createElement(Be.ZT,{nodeType:"table",styleType:Be.ZT.Type.Base,className:Yr.wrapper},t.map((function(e,t){return m.createElement("tbody",{key:t,className:Yr.group},e.map((function(e,t){var r=e.text,i=e.title,a=e.color;return m.createElement("tr",{key:t,className:(0,b.pipe)(n,v.X.RenderOptions.Density.matchL((function(){return Yr.item}),(function(){return Yr.itemCompact}),(function(){return Yr.itemMinimal})))},(0,b.pipe)(i,A.map((function(e){return m.createElement("td",{className:Fr.J.colorMatch(a)(Yr)},function(e){return e.split("/").reduce((function(e,t,n){return 0!==n&&e.push(m.createElement("br",{key:n})),e.push(t),e}),[])}(e))})),A.toNullable),m.createElement("td",(0,x.__assign)({colSpan:A.isNone(i)?2:void 0,className:Yr.content},bt.yG(r))))})))})))},Or={$nest:{"&:not(:last-child):after":{display:"block",height:E.u.rem(1.75),content:"''"}}},Br={$nest:{"&:not(:last-child)":{borderBottom:E.u.rem(.5)+" solid transparent"}}},Dr={display:"flex",flexDirection:"column",lineHeight:E.u.rem(1.3125)},Wr={padding:0,verticalAlign:"top",lineHeight:E.u.rem(1.25)},Hr={paddingRight:E.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},Ur={color:Fe.Il.CoreNeutral50,fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},zr={color:Fe.Il.CoreRed50},Xr={color:Fe.Il.CoreGreen60},Gr={color:Fe.Il.CoreNeutral90},Vr={color:Fe.Il.CoreNeutral90},Yr=E.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[Or],item:[Br],itemCompact:[Br,{display:"flex",flexDirection:"column"}],itemMinimal:[Br,Dr],baseBlock:[Wr],title:[Wr,Hr],content:[Wr,Ur],red:[Wr,Hr,zr],green:[Wr,Hr,Xr],yellow:[Wr,Hr,Gr],fallback:[Wr,Hr,Vr]}),qr=n(489),$r=n(55415),jr=n(53521),Zr=n(72618);function Jr(e){return e?function(t){return e+"/"+t}:y.identity}var Kr,Qr=function(e){return m.createElement(Be.ZT,(0,x.__assign)({},ti(e),{value:e.value,onChange:e.onChange}))},ei=function(e){return m.createElement(Qr,(0,x.__assign)({},e,{nodeType:"input"}))},ti=function(e){return(0,x.__assign)({"data-name":(n=e.name,r=m.useContext(I.f.Context).name,void 0===n?n:"string"==typeof n?Jr(r)(n):n.view(Jr(r))),mount:(t=e.autofocus,t?function(e){return e&&requestAnimationFrame((function(){return e.focus()}))}:void 0),styleType:Be.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,h.Sh)(ri.inputField,e.className));var t,n,r},ni={width:E.u.percent(100),outline:"none",border:"1px solid "+Pe.xO,borderRadius:E.u.rem(T.fx),background:Fe.Il.CoreNeutral0,$nest:{"&::placeholder":{color:Pe.FW,opacity:1},"&:focus":{borderColor:Fe.Il.CoreBlue50}}},ri=E.u.stylesheet({inputField:[ni],textArea:[{resize:"none"}]}),ii=(0,n(51657).createTypeStyle)(),ai=function(e){var t;return{$nest:(t={},t['&[data-indent="'+e+'"]']={marginLeft:E.u.rem(.5*e)},t)}},oi=function(e,t,n,r){var i;return{$nest:(i={},i['&[data-indent="'+t+'"]']={counterIncrement:"card-list"+t,counterReset:r,$nest:{"&:before":{content:"'"+e+"' '\\A\\00a0' counter(card-list"+t+", "+n+") '. '"}}},i)}},si=function(e){return[oi(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),oi(e,5,"lower-roman","card-list6 card-list7 card-list8"),oi(e,6,"decimal","card-list7 card-list8"),oi(e,7,"lower-alpha","card-list8"),oi(e,8,"lower-roman","none")]},ci="cards-replacements_labels-",li={list:ci+"list",item:ci+"item",diff:ci+"diff",columnList:ci+"columnList",itemInsert:ci+"itemInsert",deleteAll:ci+"deleteAll",crossed:ci+"crossed",deleteQuote:ci+"deleteQuote",deletePunctuation:ci+"deletePunctuation",deleteDoubleComma:ci+"deleteDoubleComma",deleteApostrophe:ci+"deleteApostrophe",deleteLetter:ci+"deleteLetter",deletePunctuationBeforeLetter:ci+"deletePunctuationBeforeLetter",itemOriginal:ci+"itemOriginal",itemOriginalContent:ci+"itemOriginalContent",removeOrContainer:ci+"removeOrContainer",itemContext:ci+"itemContext",itemContextShifted:ci+"itemContextShifted",or:ci+"or",arrowInsertsList:ci+"arrowInsertsList",cozyArrowInsertsList:ci+"cozyArrowInsertsList",inlineHeader:ci+"inlineHeader",fullSentenceBackground:ci+"fullSentenceBackground",minimalFullSentenceBackground:ci+"minimalFullSentenceBackground",fullSentenceDelete:ci+"fullSentenceDelete",fullSentenceHidden:ci+"fullSentenceHidden",fullSentenceListItem:ci+"fullSentenceListItem",fullSentenceBulletListItem:ci+"fullSentenceBulletListItem",fullSentenceDashedListItem:ci+"fullSentenceDashedListItem",fullSentenceOrderedListItem:ci+"fullSentenceOrderedListItem",fullSentenceOrderedListItemWithFormatting:ci+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:ci+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:ci+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:ci+"fullSentenceInsert",fullSentenceInsertPunctuation:ci+"fullSentenceInsertPunctuation",itemRemove:ci+"itemRemove",oneGapInsert:ci+"oneGapInsert",oneGapInput:ci+"oneGapInput"},ui={position:"relative",overflow:"hidden",margin:"0 "+E.u.rem(.5)+" "+E.u.rem(.5)+" 0",padding:E.u.rem(.25)+" "+E.u.rem(.5),borderRadius:E.u.rem(T.fx),color:Fe.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:E.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},di={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:E.u.rem(.3125),width:"1px",height:"120%",background:Fe.Il.CoreNeutral0,content:"''",opacity:.8}}},pi={position:"relative",marginRight:E.u.rem(.5),whiteSpace:"nowrap"},fi={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:E.u.rem(1)+" 0",padding:E.u.rem(.5),maxHeight:E.u.rem(12),borderRadius:E.u.rem(T.fx),background:Fe.Il.CoreNeutral10,color:Fe.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},mi={textDecoration:"line-through",position:"relative",marginRight:E.u.rem(.5),maxWidth:"calc(100% - "+E.u.rem(.5)+")",color:Fe.Il.CoreRed40,textDecorationLine:"line-through",overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:E.u.rem(.5),color:Fe.Il.CoreNeutral50,content:"'→'",verticalAlign:"middle"}}},hi=[ai(0),ai(1),ai(2),ai(3),ai(4),ai(5),ai(6),ai(7),ai(8)],gi={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:T.g_+", "+T.xL},vi={background:Fe.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:Fe.Il.CoreGreen50},"&[data-disabled='true']":{background:Fe.Il.CoreGreen40}}},yi={$nest:{"&:after":{transform:"rotate(-25deg)"}}},bi={paddingRight:E.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},wi={paddingRight:E.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},_i={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},Ci={display:"flex",flexBasis:"100%"},Si={margin:"0 "+E.u.rem(.5)+" "+E.u.rem(.5)+" 2px",color:Fe.Il.CoreNeutral60},xi={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},Ai={marginBottom:E.u.rem(.25),color:Fe.Il.CoreNeutral60,fontWeight:400,fontSize:E.u.rem(.8),lineHeight:E.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},Ii={color:Fe.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},ki={background:Fe.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:Fe.Il.CoreRed40}}},Ei={$nest:{"&:before":{content:"'¶\\A\\00a0-\\00a0'"}}},Ti={$nest:{"&:before":{content:"'¶\\A\\00a0\\2022\\00a0'"}}},Ri={width:"100%",marginTop:E.u.rem(.5),marginBottom:E.u.rem(.25),$nest:{"&[data-disabled='true']":{background:Fe.Il.CoreNeutral40}}},Li={marginTop:E.u.rem(.5),lineHeight:"calc("+E.u.rem(2)+" - "+E.u.px(2)+")",padding:"0 "+E.u.rem(.5),border:E.u.important(E.u.px(1)+" solid "+Fe.Il.CoreNeutral50),color:Fe.Il.CoreNeutral90,$nest:{"&:placeholder-shown":{borderColor:E.u.important(Fe.Il.CoreNeutral20)}}},Mi=ii.style(ui,vi),Ni={list:E.u.joinClasses([li.list,E.u.style(gi),ii.style(gi)]),item:E.u.joinClasses([li.item,E.u.style(ui),ii.style(ui)]),itemInsert:E.u.joinClasses([li.itemInsert,E.u.style(ui,vi),Mi]),deleteAll:E.u.joinClasses([li.deleteAll,E.u.style({textDecoration:"line-through"}),ii.style({textDecoration:"line-through"})]),crossed:E.u.joinClasses([li.crossed,E.u.style(di)]),deleteQuote:E.u.joinClasses([li.deleteQuote,E.u.style(di,yi),ii.style(di,yi)]),deletePunctuation:E.u.joinClasses([li.deletePunctuation,E.u.style(di,bi),ii.style(di,bi)]),deleteDoubleComma:E.u.joinClasses([li.deleteDoubleComma,E.u.style({textDecoration:"line-through"}),ii.style({textDecoration:"line-through"})]),deleteApostrophe:E.u.joinClasses([li.deleteApostrophe,E.u.style(di,wi),ii.style(di,wi)]),deleteLetter:E.u.joinClasses([li.deleteLetter,E.u.style(_i),ii.style(_i)]),deletePunctuationBeforeLetter:E.u.joinClasses([li.deletePunctuationBeforeLetter,E.u.style({textDecoration:"line-through"}),ii.style({textDecoration:"line-through"})]),itemOriginal:E.u.joinClasses([li.itemOriginal,E.u.style(mi),ii.style(mi)]),itemOriginalContent:E.u.joinClasses([li.itemOriginalContent,E.u.style({color:Fe.Il.CoreNeutral90}),ii.style({color:Fe.Il.CoreNeutral90})]),removeOrContainer:E.u.joinClasses([li.removeOrContainer,E.u.style(Ci),ii.style(Ci)]),itemContext:E.u.joinClasses([li.itemContext,E.u.style(pi)]),itemContextShifted:E.u.joinClasses([li.itemContextShifted,E.u.style(pi,{marginRight:"2px"}),ii.style(pi,{marginRight:"2px"})]),or:E.u.joinClasses([li.or,E.u.style(Si),ii.style(Si)]),arrowInsertsList:E.u.joinClasses([li.arrowInsertsList,E.u.style(xi),ii.style(xi)]),columnList:E.u.joinClasses([li.columnList,E.u.style(xi,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),ii.style(xi)]),cozyArrowInsertsList:E.u.joinClasses([li.arrowInsertsList,E.u.style(xi,{flex:2,flexBasis:"0%"}),ii.style(xi)]),inlineHeader:E.u.joinClasses([li.inlineHeader,E.u.style(Ai),ii.style(Ai)]),fullSentenceBackground:E.u.joinClasses([li.fullSentenceBackground,E.u.style(fi),ii.style(fi)]),minimalFullSentenceBackground:E.u.joinClasses([li.minimalFullSentenceBackground,E.u.style(fi,{lineHeight:E.u.rem(1.3125)}),ii.style(fi,{lineHeight:E.u.rem(1.3125)})]),fullSentenceDelete:E.u.joinClasses([li.fullSentenceDelete,E.u.style(Ii),ii.style(Ii)]),fullSentenceHidden:E.u.joinClasses([li.fullSentenceHidden,E.u.style({display:"none"})]),fullSentenceListItem:E.u.joinClasses([li.fullSentenceListItem,E.u.style.apply(E.u,hi),ii.style.apply(ii,hi)]),fullSentenceBulletListItem:E.u.joinClasses([li.fullSentenceBulletListItem,E.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),ii.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:E.u.joinClasses([li.fullSentenceDashedListItem,E.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),ii.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:E.u.joinClasses([li.fullSentenceOrderedListItem,E.u.style.apply(E.u,(0,x.__spreadArrays)(si(""),hi)),ii.style.apply(ii,(0,x.__spreadArrays)(si(""),hi))]),fullSentenceOrderedListItemWithFormatting:E.u.joinClasses([li.fullSentenceOrderedListItemWithFormatting,E.u.style.apply(E.u,(0,x.__spreadArrays)(si("¶"),hi)),ii.style.apply(ii,(0,x.__spreadArrays)(si("¶"),hi))]),fullSentenceBulletListItemWithFormatting:E.u.joinClasses([li.fullSentenceBulletListItemWithFormatting,E.u.style.apply(E.u,(0,x.__spreadArrays)(hi,[Ti])),ii.style.apply(ii,(0,x.__spreadArrays)(hi,[Ti]))]),fullSentenceDashedListItemWithFormatting:E.u.joinClasses([li.fullSentenceDashedListItemWithFormatting,E.u.style.apply(E.u,(0,x.__spreadArrays)(hi,[Ei])),ii.style.apply(ii,(0,x.__spreadArrays)(hi,[Ei]))]),fullSentenceInsert:E.u.joinClasses([li.fullSentenceInsert]),fullSentenceInsertPunctuation:E.u.joinClasses([li.fullSentenceInsertPunctuation]),diff:E.u.joinClasses([li.diff,E.u.style({fontWeight:"bolder"}),ii.style({fontWeight:"bolder"})]),itemRemove:E.u.joinClasses([li.itemRemove,E.u.style(ui,ki)]),oneGapInsert:E.u.joinClasses([li.oneGapInsert,E.u.style(ui,vi,Ri),Mi]),oneGapInput:E.u.joinClasses([li.oneGapInput,E.u.style(Li)])};function Fi(e,t){if(e.length<=4)return null;var n=function(e,t){if(e===t)return;var n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}var i=r<n?r:n,a=function(e,t,n){var r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i),o=function(e,t,n,r,i){var a=0;for(;e[n-a-1]===t[r-a-1]&&i-a>=0;)a+=1;return a}(e,t,n,r,i);a+o>n&&(o-=a+o-n);a+o>r&&(o-=a+o-r);return{from:a,to:n-o,oldFragment:e.substr(a,n-o-a),newFragment:t.substr(a,r-o-a)}}(e,t);if(void 0===n)return null;var r=n.from,i=n.to,a=n.oldFragment,o=n.newFragment,s=1===o.length&&r>0&&e[r-1]===o,c=1===a.length&&0===o.length&&t[r-1]===a,l=r,u=o;return(s||c)&&(l=r-1),s&&(u=o+o),c&&(u=a),u.length>3?null:[e.substring(0,l),u,e.substring(i)]}E.u.cssRule("."+li.fullSentenceInsert+", ."+li.fullSentenceInsertPunctuation,{color:Fe.Il.CoreGreen60,fontWeight:600}),E.u.cssRule("."+li.fullSentenceDelete+" + ."+li.fullSentenceInsert,{marginLeft:E.u.rem(.25)}),E.u.cssRule("."+li.fullSentenceOrderedListItemWithFormatting+",\n."+li.fullSentenceDashedListItemWithFormatting+",\n."+li.fullSentenceBulletListItemWithFormatting,{color:Fe.Il.CoreGreen60,fontWeight:600}),function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["'”’]/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'”][.,;]/)}(t)?e.deleteQuote:function(e){var t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'”“.,;:!?\\\/…\-—()]+$/)}(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(Kr||(Kr={}));var Pi=function(e){var t=e.transform,n=e.title,r=e.disabled,i=e.boldifier,a=void 0===i?Hi:i,o=e.classes,s=void 0===o?Ni:o,c=e.onClick;return m.createElement(Je.zx,{animationMode:Zr.m.FromClickPoint,name:"apply-insert",onClick:c,title:n,disabled:r,className:s.itemInsert},t.map((function(e,t){return m.createElement(m.Fragment,{key:t},a(e,Ni.diff))})))},Oi=function(e){var t=e.transform,n=e.title,r=e.classes,i=void 0===r?Ni:r,a=e.onClick;return m.createElement(Je.zx,(0,x.__assign)({animationMode:Zr.m.FromClickPoint,name:"apply-remove"},{onClick:a,title:n,className:i.itemRemove}),t.map((function(e,t){return m.createElement(Xi,{key:t,element:e})})))},Bi=function(e){var t=e.transform,n=e.title,r=e.classes,i=void 0===r?Ni:r,a=e.onClick,o=e.children;return m.createElement("div",{className:i.removeOrContainer},t.map((function(e,r){return"text"===e.type?m.createElement("span",{key:r,className:r===t.length-1?i.itemContextShifted:i.itemContext},e.text):m.createElement(Je.zx,(0,x.__assign)({key:r,animationMode:Zr.m.FromClickPoint,name:"apply-remove-or"},{onClick:a,title:n,className:i.itemRemove}),m.createElement(Xi,{element:e}))})),o)},Di=function(){return m.createElement("span",{className:Ni.or},m.useContext(Ze.m.Context).card.or)},Wi=function(e){var t=e.transform,n=e.boldifier,r=void 0===n?Hi:n;return m.createElement("div",{className:Ni.itemOriginal},m.createElement("span",{className:Ni.itemOriginalContent},t.map((function(e,t){return m.createElement(m.Fragment,{key:t},r(e,Ni.diff))}))))},Hi=$r.ei("text"),Ui=function(e,t){var n=e.text;return"text"===e.type?n:m.createElement("span",{className:t},n)};function zi(e,t){return function(n){return m.createElement(ji,{index:t,oldText:e,newText:n.text})}}var Xi=function(e){var t=e.element,n=e.strikeClass;return"delete"===t.type?m.createElement("span",(0,x.__assign)({},(0,h.Sh)(Kr.getClass(Ni,t.text),n)),t.text):m.createElement(m.Fragment,null,t.text)};var Gi,Vi,Yi=/^\W/,qi=(0,y.flow)((0,w.RN)((function(e){switch(e.type){case jr.GP.Delete:return Ni.fullSentenceDelete;case jr.GP.Insert:return Yi.test(e.text)?Ni.fullSentenceInsertPunctuation:Ni.fullSentenceInsert;case jr.GP.Text:case jr.GP.List:return"";default:return(0,mn.vE)(e)}}),(function(e){switch(e.type){case jr.GP.Delete:return Ni.fullSentenceHidden;case jr.GP.List:case jr.GP.Text:case jr.GP.Insert:return"";default:return(0,mn.vE)(e)}})),(function(e){return function(t){return(0,x.__assign)({children:t.text},(0,h.Sh)(e(t)))}}),qr.map),$i=(0,y.flow)((0,w.RN)((function(e){switch(e.type){case jr.GP.Delete:return Ni.fullSentenceHidden;case jr.GP.List:return"bullet"===e.kind?Ni.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?Ni.fullSentenceDashedListItemWithFormatting:Ni.fullSentenceOrderedListItemWithFormatting;case jr.GP.Insert:case jr.GP.Text:return"";default:return(0,mn.vE)(e)}}),(function(e){switch(e.type){case jr.GP.Delete:return Ni.fullSentenceHidden;case jr.GP.List:return"bullet"===e.kind?Ni.fullSentenceBulletListItem:"dashed"===e.kind?Ni.fullSentenceDashedListItem:Ni.fullSentenceOrderedListItem;case jr.GP.Insert:case jr.GP.Text:return"";default:return(0,mn.vE)(e)}})),(function(e){return function(t){return t.type===jr.GP.List?(0,x.__assign)((0,x.__assign)({},(0,h.Sh)(e(t))),{"data-indent":t.indent}):(0,x.__assign)({children:t.text},(0,h.Sh)(e(t)))}}),qr.map),ji=function(e){var t=e.index,n=void 0===t?0:t,r=e.oldText,i=e.newText,a=Fi(r,i);return m.createElement(m.Fragment,null,a?[a[0],m.createElement("span",{key:n,className:Ni.diff},a[1]),a[2]]:i)},Zi=function(e){return m.createElement(Be.XY,{className:(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Ni.minimalFullSentenceBackground}),(function(){return Ni.fullSentenceBackground})))},(0,b.pipe)(e.replacements.kind===jr._k.WithFormatting?$i(e.showDiff)(e.replacements.labels):qi(e.showDiff)(e.replacements.labels),(0,qr.mapWithIndex)((function(e,t){return m.createElement("span",(0,x.__assign)({key:e},t))}))))},Ji=function(e){var t=m.useContext(Ze.m.Context).card,n=""===e.gapValue;return m.createElement(m.Fragment,null,m.createElement(ei,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:function(t){return e.onChange(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:Ni.oneGapInput}),m.createElement(Pi,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:Ui,onClick:e.onApply,classes:{itemInsert:Ni.oneGapInsert,inlineHeader:Ni.inlineHeader},disabled:n,transform:Ki(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Ki=function(e,t,n){return(0,x.__spreadArrays)(e,[{type:jr.GP.Insert,text:Qi(e)+(t||"…")+Qi(n)}],n)},Qi=function(e){return e.length?" ":""},ea=function(e){var t=e.replacementsLabels,n=e.layoutDensity,r=e.onClick,i=m.useContext(Ze.m.Context).card.todoAction(t.tooltipText);switch(t.type){case jr.b$.Type.InsertList:return m.createElement(Be.Xk,{className:Ni.list},t.labels.map((function(e,t){return m.createElement(Pi,(0,x.__assign)({},{key:t,title:i,onClick:r(t)},{transform:e}))})));case jr.b$.Type.DeleteList:return m.createElement(Be.Xk,{className:Ni.list},t.labels.map((function(e,t){return m.createElement(Oi,(0,x.__assign)({},{key:t,title:i,onClick:r(t)},{transform:e}))})));case jr.b$.Type.Arrow:return function(e,t,n,r){var i=e.labels,a=e.original,o=e.onlyReplacements,s=(1===a.length?[a[0].text,i[0][0].text].map(zi):[Ui,Ui])[0];return m.createElement(Be.Xk,{className:Ni.list},!o&&m.createElement(Wi,{transform:a}),m.createElement("div",{className:n===v.X.RenderOptions.Density.cozy?Ni.cozyArrowInsertsList:i.length>2?Ni.columnList:Ni.arrowInsertsList},i.map((function(e,n){return m.createElement(Pi,(0,x.__assign)({},{key:n,title:t,onClick:r(n)},{transform:e,boldifier:s}))}))))}(t,i,n,r);case jr.b$.Type.InsertOr:return m.createElement(Be.Xk,{className:Ni.list},m.createElement(Pi,(0,x.__assign)({transform:t.labels[0]},{title:i,onClick:r(0)},{boldifier:Ui})),m.createElement(Di,null),m.createElement(Pi,(0,x.__assign)({transform:t.labels[1]},{title:i,onClick:r(1)},{boldifier:Ui})));case jr.b$.Type.DeleteOr:return m.createElement(Be.Xk,{className:Ni.list},t.labels.map((function(e,n){return m.createElement(Bi,(0,x.__assign)({},{key:n,title:i,onClick:r(n)},{transform:e}),n===t.labels.length-2&&m.createElement(Di,null))})));case jr.b$.Type.FullSentence:case jr.b$.Type.OneGap:return null;default:return(0,mn.vE)(t)}},ta=(0,w.HP)(_.C8.Logging.getLogger);!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=function(t){return(0,b.pipe)(A.fromNullable(t.match(e.actionRegex)),A.chain((function(e){switch(e[1]){case"set-goals":return A.some(k.l.Type.openSetGoals);default:return A.none}})))}}(Vi||(Vi={}));var na=function(e){var t=e.description,n=e.prefix,r=e.actions,i=e.layoutDensity,a=m.useContext(Ze.m.Context),o=m.useContext(Mn.G.Context),s=Nn.P.useElWatcher(),c=s.ref,l=s.onMount;Nn.P.useSubscriptionTo(c.pipe(Fn.oA,Kt.w((function(e){return Array.from(e.getElementsByTagName("a")).reduce((function(e,t){var n=Pn.R(t,"click").pipe(On.b((function(e){return e.preventDefault()})));return(0,b.pipe)(A.fromNullable(t.getAttribute("href")),A.chain(Vi.parse),A.fold((function(){return ta("Description").error("Invalid action",t),e.pipe(Bn.T(n))}),(function(i){return e.pipe(Bn.T(o.getTooltipObservable(t,a.card.actionDescription[i],"auto",A.none),n.pipe(Dn.h({type:i}),On.b(r))))})))}),Wn.E)}))));var u=(0,b.pipe)(i,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return wo.minimalDescription}),(function(){return wo.description})));return void 0!==n?m.createElement(Be.XY,{mount:l,className:u},n,m.createElement("span",(0,x.__assign)({},dr.renderToHtml(t,Vi.actionRegex)))):m.createElement(Be.XY,(0,x.__assign)({mount:l,className:u},dr.renderToHtml(t,Vi.actionRegex)))},ra=function(e){var t=e.card,n=e.isChecking;return Ot.bZ.isRated(t.activeAlert)?m.createElement(Qt,{value:v.X.isCardPresuccess(t.visualState)?Yt.g.MAX:t.meta.percentile,initValue:v.X.isCardPresuccess(t.visualState)?t.meta.percentile:Yt.g.MIN,isLoading:n}):null},ia=function(e){var t=e.card,n=en(v.X.isCardPresuccess(t.visualState)?Yt.g.MAX:t.meta.percentile,v.X.isCardPresuccess(t.visualState)?t.meta.percentile:Yt.g.MIN);return m.createElement(h.F.Fragment,null,n.pipe(S.U(Yt.g.prism.reverseGet),S.U((function(e){return m.createElement(Tn.P,{percentage:e,colorType:Tn.P.ColorType.neoBlue,iconSize:Tn.P.IconSize.extraSmall,theme:{radialProgressBar:wo.circleProgress,radialProgressText:wo.circleText}})}))))},aa=function(e){var t=e.card,n=e.feedbackActions;return m.createElement(m.Fragment,null,m.createElement(Je.zx.Ghost,{name:"takeaway-like",onClick:bt.hz((function(){var e;return n.next({type:k.l.Type.takeawayCorrectlyDetected,alertId:t.activeAlert.id,takeawayText:null!==(e=t.activeAlert.highlightTexts[0])&&void 0!==e?e:""})}))},m.createElement(Oe.JO.YesCircle,null)," Yes"),m.createElement(Je.zx.Ghost,{name:"takeaway-dislike",onClick:bt.hz((function(){return n.next({type:k.l.Type.takeawayIncorrectlyDetected,alertId:t.activeAlert.id})}))},m.createElement(Oe.JO.NoCircle,null)," No"))},oa=function(e){var t=e.card,n=e.feedbackActions,r=m.useContext(Ze.m.Context);return m.createElement(m.Fragment,null,m.createElement(Je.zx.Ghost,{name:"resolve",title:r.resolve,onClick:bt.hz((function(){return n.next({type:k.l.Type.takeawayResolve,alertId:t.activeAlert.id,isLikelyToBeRead:Bt.$.isLikelyToBeReadTakeaway(t.activeAlert)})}))},m.createElement(Oe.JO.YesCircle,null)),m.createElement(Je.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:bt.hz((function(){return n.next({type:k.l.Type.takeawayDismiss,alertId:t.activeAlert.id,isLikelyToBeRead:Bt.$.isLikelyToBeReadTakeaway(t.activeAlert)})}))},m.createElement(Oe.JO.Ignore,null)))},sa=function(e){var t=e.card,n=e.feedbackActions,r=m.useContext(Ze.m.Context);return m.createElement(m.Fragment,null,m.createElement(Je.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:bt.hz((function(){return n.next({type:k.l.Type.alertIgnore,alertId:t.activeAlert.id,id:t.id,eligibleForDismissSurvey:v.X.isEligibleForDismissSurvey(t)})}))},m.createElement(Oe.JO.Ignore,null)),m.createElement(da,{activeAlert:t.activeAlert,onMute:(0,b.pipe)(t.muteCategory,A.map((function(e){return bt.hz((function(){return n.next({type:k.l.Type.muteAlertCategory,categoryId:e})}))}))),onWrong:bt.hz(bt.hz((function(){return n.next({type:k.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Mt.PZ.WRONG_SUGGESTION})}))),onOffensive:bt.hz(bt.hz((function(){return n.next({type:k.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Mt.PZ.OFFENSIVE_CONTENT})}))),onVisibilityChange:function(e){return n.next({type:k.l.Type.moreActionsButtonToggle,mode:e?"open":"closed"})}}))},ca=function(e){var t=e.onClick,n=m.useContext(Ze.m.Context);return m.createElement(Je.zx.Flat,{name:"mute",onClick:t},m.createElement(Oe.JO.Mute,null),n.card.mute)},la=function(e){var t=e.onClick,n=m.useContext(Ze.m.Context);return m.createElement(Je.zx.Flat,{name:"incorrect",onClick:t},m.createElement(Oe.JO.Report,null),n.card.wrong)},ua=function(e){var t=e.activeAlert,n=e.onClick,r=m.useContext(Ze.m.Context);return(0,b.pipe)(t.extraProperties.vox,Nt.dH((function(){return null}),m.createElement(Je.zx.Flat,{name:"offensive",onClick:n},m.createElement(Oe.JO.Report,null),r.card.offensive)))},da=function(e){var t=e.activeAlert,n=e.onMute,r=e.onWrong,i=e.onOffensive,a=e.onVisibilityChange,o=t.getTransform(),s=A.isSome(n);return s||A.isSome(o)?m.createElement(fn.L,{label:m.createElement(Je.zx.Ghost,{name:"moreActions"},m.createElement(Oe.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:wo.dropdownContainer},name:"moreActions",onVisibilityChange:a},(0,b.pipe)(n,A.map((function(e){return m.createElement(ca,{onClick:e})})),Nt.QP),(0,b.pipe)(o,A.map((function(){return m.createElement(m.Fragment,null,s&&m.createElement(fn.L.Delimiter,null),m.createElement(la,{onClick:r}),m.createElement(ua,{activeAlert:t,onClick:i}))})),Nt.QP)):null},pa=function(e){var t=e.card,n=e.onClick,r=e.mode,i=void 0===r?"default":r,a=m.useContext(Ze.m.Context),o=m.useContext(Pt.a.Context),s=m.useCallback((function(e){o.has(Pt.a.Flag.onlyTrustedEvents)&&!e.isTrusted||n()}),[]),c=t.renderOptions.features.has(v.X.RenderOptions.Features.showAnonymousUserFooters)?{disabled:!0,title:a.card.disabledForAnonymous}:{title:"mini"===i?a.card.addToDict:""};return t.activeAlert.extraProperties.hasAddToDictionary?m.createElement(Je.zx.Tertiary,(0,x.__assign)({},c,{name:"add-to-dict",onClick:s}),m.createElement(Oe.JO.Dict,null),a.card.addToDict):null},fa=function(e){var t=e.title,n=e.checkingInProgress,r=e.checkingMessage,i=e.applyMessage,a=e.onClick;return m.createElement(Je.zx.Primary,{key:"update-all",name:"update-all",title:t,className:n.pipe(S.U((0,w.RN)(Nr.updateAllBtnLoading,Nr.updateAllBtn))),disabled:n,children:n.pipe(S.U((0,w.RN)(m.createElement(m.Fragment,{key:"update-all-checking"},Ft.kC(r),m.createElement(Rn.$,{size:18,strokeWidth:2,wrapperClassName:Nr.updateBtnSpinner,variation:"white"})),m.createElement(m.Fragment,{key:"update-all-checked"},Ft.kC(i))))),onClick:bt.hz(a)})},ma=function(e){var t=e.card;return(0,b.pipe)(Sa(t.activeAlert,t.renderOptions.layoutDensity),A.map((function(e){return m.createElement(br,{key:"card-actions-details",visualState:t.visualState,className:wo.more},e)})),A.toNullable)},ha=function(e){var t=e.card,n=e.actions;return Ca(t.activeAlert,t.renderOptions.layoutDensity)?m.createElement(yr,{key:"card-actions-button",mode:"default",actions:n,card:t}):m.createElement(pa,{key:"card-actions-button",card:t,mode:"default",onClick:bt.hz((function(){return n.next({type:k.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Mt.PZ.ADD_TO_DICTIONARY})}))})},ga=function(e){return m.createElement(Ht.TG,{alignment:"bottom",eventType:"onclick",stepId:mt.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",findFirstButton:{dotPosition:"rightTop"},themes:{containerWrapperClassName:wo.onboardingNotification}},e.children)},va=function(e){var t=e.onClick,n=e.rl,r=e.layoutDensity;return m.createElement(ga,null,m.createElement(ea,{replacementsLabels:n,onClick:t,layoutDensity:r}))},ya=function(e){var t=e.text;return m.createElement(Be.P1,(0,x.__assign)({className:wo.title},dr.renderToHtml(t)))},ba=function(e){var t=e.text;return m.createElement(Be.P1,(0,x.__assign)({className:wo.titleMinimal},dr.renderToHtml(t)))},wa=function(e){var t=e.alert;return m.createElement(Be.H4,(0,x.__assign)({className:wo.title},dr.renderToHtml(t.title)))},_a=function(e){var t=e.alert,n=e.meta,r=e.options,i=e.children;return m.createElement(gr,{bundle:n.bundleInfo,className:wo.label,activeAlert:t,showCardLabel:r.features.has(v.X.RenderOptions.Features.showLabel),premiumAlertLabelHighlight:r.features.has(v.X.RenderOptions.Features.showNewPremiumCardLabels)?En.new:r.features.has(v.X.RenderOptions.Features.showPersistentPremiumCardLabels)?En.persistent:En.none,layoutDensity:r.layoutDensity},i)};function Ca(e,t){return!e.extraProperties.hasAddToDictionary&&(!Bt.$.isTakeawayWithoutFeedback(e)&&(!(!A.isSome(e.examples)&&!A.isSome(e.details))||!(t!==v.X.RenderOptions.Density.minimal||!A.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}var Sa=function(e,t){if(!Ca(e,t))return Nt.cS();var n=(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return wo.minimalDescription}),(function(){return wo.description})));return A.some(m.createElement(m.Fragment,null,(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return A.isNone(e.details)?m.createElement(Be.XY,(0,x.__assign)({className:n},dr.renderToHtml(e.explanation,Vi.actionRegex))):null}),(function(){return null}))),(0,b.pipe)(e.details,A.map((function(e){return m.createElement(Be.XY,(0,x.__assign)({className:n},dr.renderToHtml(e)))})),A.toNullable),(0,b.pipe)(e.examples,A.map((function(e){return m.createElement(Pr,{layoutDensity:t,examples:e})})),A.toNullable)))},xa=function(e){var t=e.isChecking;return m.createElement(h.F.Fragment,null,t.pipe(S.U((function(e){return m.createElement(Rn.$,{className:e?wo.spinner:wo.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2})}))))},Aa=function(e){var t=m.useState(!0),n=t[0],r=t[1];return n?m.createElement(Na,{type:e.type,actions:e.actions,onClose:function(){return r(!1)}}):null},Ia=function(e){var t=e.card,n=e.actions;return Bt.$.isDemoPremium(t.activeAlert)?m.createElement(Da,{card:t,actions:n}):!Bt.$.isFree(t.activeAlert)&&t.renderOptions.features.has(v.X.RenderOptions.Features.showPremiumTrialFooters)?m.createElement(Oa,{actions:n}):t.renderOptions.features.has(v.X.RenderOptions.Features.showAnonymousUserFooters)?m.createElement(Pa,{actions:n,card:t}):(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.cozy)((function(){return m.createElement(Fa,{card:t,actions:n})}),(function(){return(0,b.pipe)(t.activeAlert.extraProperties.fluencyMessage,A.fold((function(){return m.createElement(Fa,{card:t,actions:n})}),(function(e){return m.createElement(Ba,{fluencyLabel:e})})))})))};function ka(e,t,n){n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}var Ea,Ta=function(e){var t=e.card,n=e.actions,r=m.useContext(Ze.m.Context).card.matchesNavigation;return m.createElement(h.F.Fragment,null,(0,b.pipe)(t,S.U((function(e){return m.createElement("div",{key:e.activeAlert.id,className:wo.bundleNavWrapper},m.createElement(Be.XY,{className:wo.bundleTitle},v.X.bundleTitle(e)),m.createElement("div",{className:wo.bundleNavMatchesRow},m.createElement(Je.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:wo.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:function(){return ka("left",e,n)}},m.createElement(Oe.JO.Arrow,{className:wo.bundleNavLeftButtonIcon})),m.createElement(Be.ck,{className:wo.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),m.createElement(Je.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:wo.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:function(){return ka("right",e,n)}},m.createElement(Oe.JO.Arrow,{className:wo.bundleNavRightButtonIcon}))))}))))},Ra=function(e){var t=e.card,n=e.actions,r=e.isChecking;return m.createElement(m.Fragment,null,(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Ot.bZ.isRated(t.activeAlert)?m.createElement(m.Fragment,null,m.createElement(ia,{card:t}),m.createElement(ba,{text:t.activeAlert.miniCardTitle})):m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},m.createElement(ba,{text:t.activeAlert.miniCardTitle}))}),(function(){return m.createElement(m.Fragment,null,m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(ya,{text:t.activeAlert.title}),m.createElement(ra,{card:t,isChecking:r}))}))),m.createElement(na,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}))},La=function(e){var t=e.card,n=e.actions,r=m.useContext(Ze.m.Context),i=Bt.$.isTakeawayWithoutFeedback(t.activeAlert)?r.card.takeaway.defaultTitle:t.activeAlert.title,a=(0,b.pipe)(t.activeAlert,A.fromPredicate(Bt.$.isTakeaway),A.chain((function(e){return A.fromNullable(e.highlightTexts[0])}))),o=(0,b.pipe)(t.activeAlert,A.fromPredicate((0,w.W9)(Bt.$.isUnlikelyToBeReadTakeaway,Bt.$.isLikedTakeaway)),A.map((function(){return t.meta.explanation})));return m.createElement(m.Fragment,null,(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},m.createElement(ba,{text:v.X.miniTitle(t,r)}))}),(function(){return m.createElement(m.Fragment,null,m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(ya,{text:i}))}))),(0,b.pipe)(a,A.fold(y.constNull,(function(e){return m.createElement(Ma,{text:e,layoutDensity:t.renderOptions.layoutDensity})}))),(0,b.pipe)(o,A.fold(y.constNull,(function(e){return m.createElement(na,{description:e,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},Ma=function(e){var t=e.text,n=e.layoutDensity;return m.createElement("div",{className:wo.highlightedTextBox},m.createElement(Be.XY,{className:(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return wo.minimalHighlightedTextInnerBox}),(function(){return wo.highlightedTextInnerBox})))},t))},Na=function(e){var t=m.useContext(Ze.m.Context),n=t.card.onboarding[e.type],r=n.title,i=n.content;return m.useLayoutEffect((function(){return function(){return e.actions.next({type:k.l.Type.onboardingClose,value:e.type})}}),[]),m.createElement(hn.AdHoc,{key:"new-notification",title:m.createElement(m.Fragment,null,r,m.createElement(Wt.Regular,{className:wo.newLabel},t.new)),className:wo.newCheckNotification,onClose:e.onClose},i)},Fa=function(e){var t=e.actions,n=e.card,r=m.useContext(Ze.m.Context);return Nn.P.useEffectOnDidMount((function(){n.meta.showMuteQuotedAdvice&&t.next({type:k.l.Type.muteQuotedAdviceShow})})),n.meta.showMuteQuotedAdvice?m.createElement(Ea.Base,{className:ro},m.createElement("span",null,r.card.muteCitedText(m.createElement("a",{"data-name":"open-preferences-link",onClick:function(){return t.next({type:k.l.Type.openPreferences})}},r.documentSettings.editorSettings))),m.createElement(Je.zx,{name:"dismiss-mute-quoted-advice",onClick:function(){return t.next({type:k.l.Type.dismissMuteQuotedAdvice})}},m.createElement(Oe.JO.Close,null))):null},Pa=function(e){var t=e.actions,n=e.card,r=m.useContext(Ze.m.Context),i=n.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return m.createElement(Ea.Base,{className:wo.anonymousUserNotice},i((function(){t.next({type:k.l.Type.toSignIn})})))},Oa=function(e){var t=e.actions;return m.createElement(Ea.Small,{className:ao},m.createElement(Oe.JO.PaidLink,{className:wo.iconWrapper,width:12}),m.useContext(Ze.m.Context).premiumFreeTrial((function(){t.next({type:k.l.Type.premiumTrialFooterCtaClick})})))},Ba=function(e){var t=e.fluencyLabel,n=m.useContext(Ze.m.Context).card.fluency,r=Object.keys(Lt.n5.PrimaryLanguage).filter((function(e){return e!==Lt.n5.PrimaryLanguage.Other})).map((function(e){return e.toLowerCase()})),i=t.toLowerCase(),a=(0,b.pipe)(A.fromNullable(r.find((function(e){return i.includes(e)}))),A.map(Ft.kC),A.getOrElse((function(){return"multilingual"})),n.cardFooter);return m.createElement(Be.x4,{className:wo.fluencyNotice},a,m.createElement(Ln.u,{title:n.tooltip},m.createElement(Oe.JO.Info,{width:10,className:wo.fluencyInfo})))};!function(e){function t(e){return function(t){var n=t.children,r=t.className;return m.createElement(e,(0,x.__assign)({},(0,h.Sh)(wo.cardFooter,r)),n)}}e.Small=t(Be.x4),e.Base=t(Be.XY)}(Ea||(Ea={}));var Da=function(e){var t=e.card,n=e.actions;return m.createElement(Ea.Small,{className:t.renderOptions.upgradeDemoPremiumNotice===Dt.YH.yellow?wo.demoPremiumNoteYellow:wo.demoPremiumNoteGray},m.useContext(Ze.m.Context).demoPremiumNote((function(){n.next({type:k.l.Type.toUpgrade})})))},Wa={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:Fe.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},"& ul":{margin:E.u.rem(.75)+" 0 0",padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:E.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:E.u.rem(.5)}}},Ha={lineHeight:E.u.rem(1.3125)},Ua={$nest:{"& i":{color:Fe.Il.CoreNeutral50},"& > * + *":{marginTop:E.u.rem(.75)}}},za={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:Pe.kl}}},Xa={marginTop:E.u.important(0),lineHeight:E.u.rem(1.125)},Ga={fontSize:E.u.rem(Fe.xv.SubheadingSize),lineHeight:E.u.rem(Fe.xv.SubheadingLineHeight)},Va={width:E.u.rem(2),height:E.u.rem(2)},Ya={position:"absolute",top:"calc(50% - "+E.u.rem(1)+")",left:"calc(50% - "+E.u.rem(1)+")",width:E.u.rem(2),height:E.u.rem(2),transition:"opacity .2s"},qa={marginLeft:E.u.rem(.5),backgroundColor:Fe.Il.CoreGreen50,color:Fe.Il.CoreNeutral0,fontWeight:600},$a={position:"absolute",marginTop:E.u.rem(-8.5),marginLeft:E.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:E.u.rem(-.525),left:E.u.rem(.7),borderTop:E.u.rem(.625)+" solid "+Fe.Il.BackgroundNotification,borderRight:E.u.rem(.5)+" solid transparent",borderLeft:E.u.rem(.5)+" solid transparent",content:"' '"}}},ja={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},Za={position:"absolute",top:E.u.rem(.75),left:E.u.rem(.4)},Ja={color:Fe.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:Fe.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:Fe.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+Fe.Il.CoreBlue40,color:Fe.Il.CoreBlue40}}}}},Ka={display:"flex",borderRadius:T.LB+" "+T.LB+" "+E.u.rem(T.Jr)+" "+E.u.rem(T.Jr),color:Fe.Il.CoreNeutral50,padding:E.u.rem(.5)+" "+E.u.rem(.75)+" "+E.u.rem(.5)+" "+E.u.rem(1),fontSize:E.u.rem(.6875),lineHeight:E.u.rem(1.125)},Qa={padding:"0 "+E.u.rem(.6),minWidth:E.u.rem(.625),minHeight:E.u.rem(.625)},eo={display:"grid",gridTemplateColumns:"auto min-content min-content",alignItems:"center",columnGap:E.u.rem(.25),borderRadius:T.LB+" "+T.LB+" "+E.u.rem(T.Jr)+" "+E.u.rem(T.Jr),background:Fe.Il.CoreNeutral10,color:Fe.Il.CoreNeutral50,padding:E.u.rem(.5)+" "+E.u.rem(1)+" "+E.u.rem(.5)+" "+E.u.rem(1),fontSize:E.u.rem(.75),lineHeight:E.u.rem(1.125)},to={$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:Fe.Il.CoreNeutral20}}},no="muteQuotedAdvice",ro=E.u.joinClasses([no,E.u.style({$nest:{"& a":{borderBottom:"1px solid "+Fe.Il.CoreBlue50,color:Fe.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:Fe.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+Fe.Il.CoreBlue40,color:Fe.Il.CoreBlue40}}},"& i:hover":{strokeWidth:E.u.px(2)}}})]),io="premiumFreeTrial",ao=E.u.joinClasses([io,E.u.style({$nest:{"& svg":{fill:Fe.Il.CoreYellow80},"& a":{fontWeight:800,color:Fe.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:Fe.Il.CoreYellow80},"&:hover":{borderBottom:"1px solid "+Fe.Il.CoreYellow60,color:Fe.Il.CoreYellow60}}}}})]),oo={display:"block",padding:E.u.rem(1)+" "+E.u.rem(1)+" "+E.u.rem(1)+" "+E.u.rem(1.5),width:E.u.percent(100),borderRadius:T.LB+" "+T.LB+" "+E.u.rem(T.Jr)+" "+E.u.rem(T.Jr),$nest:(Gi={"& a":{cursor:"pointer",transition:"color .2s"}},Gi["&.muteQuotedAdvice"]={display:"flex",padding:E.u.rem(1)+" "+E.u.rem(1)+" "+E.u.rem(1)+" "+E.u.rem(2),background:Fe.Il.CoreNeutral10,color:Fe.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},Gi["&.premiumFreeTrial"]={padding:E.u.rem(1)+" "+E.u.rem(1)+" "+E.u.rem(1)+" "+E.u.rem(2),position:"relative",background:Fe.Il.CoreYellow20,color:Fe.Il.CoreNeutral90},Gi)},so={position:"absolute",top:E.u.rem(.8),left:E.u.rem(.5),minWidth:E.u.rem(1),minHeight:E.u.rem(1)},co={background:Fe.Il.CoreNeutral1,color:Fe.Il.CoreNeutral50,$nest:{"& a":{borderBottom:"1px solid "+Fe.Il.CoreNeutral50,$nest:{"&:link, &:visited":{color:Fe.Il.CoreNeutral50},"&:hover":{borderBottom:"1px solid "+Fe.Il.CoreNeutral50,color:Fe.Il.CoreNeutral50}}}}},lo={background:Fe.Il.CoreYellow10,color:Fe.Il.CoreYellow60,$nest:{"& a":{borderBottom:"1px solid "+Fe.Il.CoreYellow60,$nest:{"&:link, &:visited":{color:Fe.Il.CoreYellow60},"&:hover":{borderBottom:"1px solid "+Fe.Il.CoreYellow60,color:Fe.Il.CoreYellow60}}}}},uo={fontWeight:"bold",fontSize:E.u.rem(.875),lineHeight:E.u.rem(1.125),flex:2},po={padding:E.u.rem(.625)+" 0 "+E.u.rem(.1875)+" "+E.u.rem(.5),marginBottom:E.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},fo={fontSize:E.u.rem(.75),lineHeight:E.u.rem(1.125),color:Fe.Il.CoreNeutral90},mo={display:"flex",justifyContent:"flex-end",alignItems:"center",height:E.u.rem(1.5),$nest:{"& > * + *":{marginLeft:E.u.rem(.25)},"& > *":{borderRadius:E.u.rem(T.fx)}}},ho={height:E.u.rem(2),minHeight:E.u.rem(2),width:E.u.rem(2),fill:Fe.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:Fe.Il.CoreBlue50},"&[data-disabled='true']":{fill:Fe.Il.CoreNeutral30}}};function go(e,t){return{display:["block","-webkit-box"],maxHeight:E.u.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}var vo=(0,x.__assign)((0,x.__assign)({},go(1.5,3)),{lineHeight:E.u.rem(1.5)}),yo=(0,x.__assign)((0,x.__assign)({},go(1.3125,3)),{lineHeight:E.u.rem(1.3125)}),bo={margin:E.u.rem(1)+" 0",padding:E.u.rem(.5),borderRadius:E.u.rem(T.fx),background:Fe.Il.CoreNeutral10,color:Fe.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},wo=E.u.stylesheet({description:[Wa],minimalDescription:[Wa,Ha],highlightedTextBox:[bo],highlightedTextInnerBox:[vo],minimalHighlightedTextInnerBox:[yo],more:[Ua],onboardingNotification:[{display:"block"}],title:[za],titleMinimal:[za,Xa],label:[Ga],dropdownContainer:[Va],spinner:[Ya],spinnerInvisible:[Ya,{opacity:0,pointerEvents:"none"}],newLabel:[qa],newCheckNotification:[$a],baseNotice:[ja],iconWrapper:[Za],anonymousUserNotice:[ja,Ja],fluencyNotice:[ja,Ka],fluencyInfo:[Qa],takeawayFooter:[eo],takeawayFooterButtonGhost:[to],cardFooter:[oo],circleProgress:[so],circleText:[{display:"none"}],demoPremiumNoteGray:[co],demoPremiumNoteYellow:[lo],bundleTitle:[uo],bundleNavWrapper:[po],bundleNavCount:[fo],bundleNavMatchesRow:[mo],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[ho],bundleNavLeftButtonIcon:[ho,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[ho,{transform:"rotate(270deg)"}]}),_o=E.u.style({margin:E.u.rem(1)+" 0"}),Co=E.u.style({marginLeft:E.u.rem(.5),lineHeight:E.u.rem(1.3125),fontSize:E.u.rem(.875),color:Fe.Il.CoreNeutral90}),So=E.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:E.u.rem(1)}}}),xo=E.u.style({marginTop:"0 !important",marginLeft:E.u.rem(1)}),Ao={color:Fe.Il.CoreRed60,fontSize:E.u.rem(.75),lineHeight:E.u.rem(1.125)},Io=E.u.style(Ao),ko=E.u.style(Ao,{visibility:"hidden"}),Eo=n(31484),To=n(34095),Ro=n(55935),Lo=n(32952),Mo=n(24209),No=n(41398),Fo=n(85985),Po=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=m.useContext(Ze.m.Context);return m.createElement(Wo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,y.constant)(m.createElement(Ra,{card:t,actions:n,isChecking:r})),cardFooter:function(e){return m.createElement(m.Fragment,null,m.createElement(ma,{card:t}),m.createElement("div",{className:ss.fullSentenceCardFooterBtns},m.createElement(fa,{title:a.card.todoAction(t.activeAlert.todoAction),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:bt.hz((function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:k.l.getCardType(t)})}))})))}})},Oo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ze.m.Context),s=h.hg.create(!0);return Nn.P.useSubscriptionTo((0,b.pipe)(s,Ro.T(1),On.b((function(e){return n.next({type:k.l.Type.fullSentenceHighlightChangesToggle,showChanges:e})})))),m.createElement(Wo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,y.constant)(m.createElement(h.F.Fragment,null,m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),t.renderOptions.layoutDensity===v.X.RenderOptions.Density.minimal&&m.createElement(Wt.Regular,{className:ss.minimalBetaLabel},o.beta),m.createElement($o,{isNew:t.renderOptions.isNew,actions:n}),(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return m.createElement(na,{prefix:m.createElement(Wt.Regular,{className:ss.betaLabel},o.beta),description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))),m.createElement(Eo.T9,{classes:{rendered:ss.replacement,removing:ss.replacementHidden},timeout:250,content:s.pipe(Ke.a(a,(function(e,n){return(0,b.pipe)(n,A.fold((function(){return _.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:t.id}),null}),(function(n){return m.createElement(Zi,{replacements:n,showDiff:e,layoutDensity:t.renderOptions.layoutDensity})})))})))}),m.createElement(ra,{card:t,isChecking:r}))),cardFooter:function(e){return m.createElement(m.Fragment,null,m.createElement(ma,{card:t}),m.createElement(h.F.div,{className:ss.fullSentenceCardFooterBtns},m.createElement(fa,{title:a.pipe(S.U(A.fold((function(){return""}),(function(e){return o.card.todoAction(e.tooltipText)})))),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:bt.hz((function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:k.l.getCardType(t)})}))}),m.createElement(To.Ys,{className:ss.fullSentenceCardCheckbox,checked:s,name:"set-goals"},o.card.showChangesToggle)))}})},Bo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ze.m.Context),s=(0,b.pipe)(t.userInput,A.getOrElse((0,y.constant)("")));return m.createElement(Wo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return m.createElement(m.Fragment,{key:"content"},m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement($o,{isNew:t.renderOptions.isNew,actions:n}),m.createElement(h.F.div,{className:e.pipe(S.U((0,w.RN)(ss.transformContainerInvisible,ss.transformContainer)))},m.createElement(Eo.T9,{classes:{rendered:ss.replacement,removing:ss.replacementHidden},timeout:250,content:a.pipe(S.U(A.fold((function(){return _.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return m.createElement(Ji,{key:"label",gapValue:s,replacements:e,layoutDensity:t.renderOptions.layoutDensity,onFocus:function(){return n.next({type:k.l.Type.focusUserInput,id:t.id,kind:"focus"})},onChange:function(e){return n.next({type:k.l.Type.changeUserInput,alertId:t.activeAlert.id,cardId:t.id,userInput:e})},onApply:bt.hz((function(){return n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:k.l.getCardType(t)})}))})}))))})),m.createElement(Be.Xk,{className:e.pipe(S.U((0,w.RN)(ss.transformHint,ss.transformHintInvisible)))},o.card.updatingSuggestion),m.createElement(ra,{card:t,isChecking:r}),(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return m.createElement(na,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,y.constant)(m.createElement(ma,{card:t}))})},Do=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ze.m.Context);return m.createElement(Wo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return m.createElement(m.Fragment,null,m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(h.F.div,{className:e.pipe(S.U((0,w.RN)(ss.transformContainerInvisible,ss.transformContainer)))},m.createElement(Eo.T9,{classes:{rendered:ss.replacement,removing:ss.replacementHidden},timeout:250,content:a.pipe(S.U(A.fold((function(){return _.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return m.createElement(va,{rl:e,onClick:function(e){return bt.hz((function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:e,cardType:k.l.getCardType(t)})}))},layoutDensity:t.renderOptions.layoutDensity})}))))})),m.createElement(Be.Xk,{className:e.pipe(S.U((0,w.RN)(ss.transformHint,ss.transformHintInvisible)))},o.card.updatingSuggestion),m.createElement(ra,{card:t,isChecking:r}),(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return m.createElement(na,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,y.constant)(m.createElement(ma,{card:t}))})},Wo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.cardBody,o=e.cardFooter,s=m.useMemo((function(){var e=h.hg.create(!1),t=new Lo.xQ,n=Mo.T(t.pipe(No.M(r),Fo.h((function(e){e[0];return e[1]})),On.b((function(){return e.set(!0)}))),r.pipe(Ro.T(1),Fo.h((function(e){return!e})),On.b((function(){return e.set(!1)}))));return{transformHidden:e,onMouseOver:t,transformHiddenObservable:n}}),[]),c=s.transformHidden,l=s.onMouseOver,u=s.transformHiddenObservable;return Nn.P.useSubscriptionTo(u),m.createElement(wt,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.getCardType(t)})},onMouseOver:function(){n.next({type:k.l.Type.hover,kind:"hover",id:t.id}),l.next()},onMouseOut:function(){return n.next({type:k.l.Type.hover,kind:"unhover",id:t.id})},theme:(0,x.__assign)({content:i.pipe(S.U((0,w.RN)(ss.loadingWrapperInvisible,ss.loadingWrapper)))},qo(t.renderOptions)),extra:m.createElement(m.Fragment,null,m.createElement(xa,{isChecking:i}),m.createElement(Ia,{card:t,actions:n})),body:a(c),mainActions:m.createElement(sa,{card:t,feedbackActions:n}),footer:o(c),subActions:m.createElement(ha,{card:t,actions:n})})};function Ho(e,t){return Bt.$.isTakeawayWithoutFeedback(e.activeAlert)?m.createElement(aa,{card:e,feedbackActions:t}):Bt.$.isTakeaway(e.activeAlert)?m.createElement(oa,{card:e,feedbackActions:t}):m.createElement(sa,{card:e,feedbackActions:t})}function Uo(e,t,n){return Bt.$.isTakeaway(e.activeAlert)?m.createElement(La,{card:e,actions:t}):m.createElement(Ra,{card:e,actions:t,isChecking:n})}var zo,Xo,Go=function(e){var t=e.card,n=e.actions,r=e.isChecking;return m.createElement(wt,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.getCardType(t)})},theme:qo(t.renderOptions),body:Uo(t,n,r),mainActions:Ho(t,n),footer:m.createElement(ma,{card:t}),subActions:m.createElement(ha,{card:t,actions:n}),extra:m.createElement(Ia,{card:t,actions:n})})},Vo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform;return v.X.hasTransform(t)?v.X.hasFullSentenceTransform(t)?m.createElement(Oo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):v.X.hasOneGapTransform(t)?m.createElement(Bo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):m.createElement(Do,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):v.X.isSimple(t)?m.createElement(Po,{card:t,actions:n,isChecking:r,isCheckingGlobal:i}):m.createElement(Go,{card:t,actions:n,isChecking:r})},Yo=function(e){return{container:(0,b.pipe)(e,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.cozy)((function(){return ss.cozyCardContainer}),(function(){return ss.compactCardContainer})))}},qo=function(e){return(0,x.__assign)((0,x.__assign)({},Yo(e.layoutDensity)),{wrapper:(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return ss.minimalCardWrapper}),(function(){})))})},$o=function(e){return m.createElement(h.F.Fragment,null,e.isNew.pipe(S.U(A.fold(y.constNull,(function(t){return m.createElement(Aa,{type:t,actions:e.actions,key:"new-notification"})}))),Jt.O(null)))},jo=.25,Zo={opacity:0,pointerEvents:"none"},Jo={transition:"opacity "+E.u.seconds(jo)},Ko={transition:"opacity "+E.u.seconds(jo),transitionDelay:E.u.seconds(jo)},Qo={position:"absolute",top:E.u.rem(2),color:Fe.Il.CoreNeutral40,lineHeight:E.u.rem(2),transition:"opacity "+E.u.seconds(jo),transitionDelay:E.u.seconds(jo)},es={transition:"opacity "+E.u.seconds(jo)},ts={fontSize:E.u.rem(Fe.xv.BodySize),lineHeight:E.u.rem(2.0625)},ns={marginRight:E.u.rem(.25)},rs={padding:E.u.rem(.75)+" "+E.u.rem(.5)+" "+E.u.rem(.5)+" "+E.u.rem(1)},is={position:"absolute",top:E.u.rem(.8),right:E.u.rem(1),margin:0},as={margin:E.u.rem(1)+" 0 "+E.u.rem(1.5),borderRadius:E.u.rem(T.Jr),background:Fe.Il.CoreNeutral0,boxShadow:"0 "+E.u.rem(.625)+" "+E.u.rem(T.mJ)+" 0 rgba(198, 203, 222, .45)"},os={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:E.u.rem(T.Jr),background:Fe.Il.CoreNeutral0},ss=(0,x.__assign)((0,x.__assign)({},E.u.stylesheet({invisible:[Zo],loadingWrapper:[Jo],transformContainer:[Ko],loadingWrapperInvisible:[Jo,Zo],transformContainerInvisible:[Ko,Zo,{transitionDelay:"initial"}],transformHint:[Qo],transformHintInvisible:[Qo,Zo,{transitionDelay:"initial"}],replacement:[es],replacementHidden:[es,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[ts],betaLabel:[ns],minimalCardWrapper:[rs],minimalBetaLabel:[is],compactCardContainer:[os]})),{cozyCardContainer:E.u.joinClasses([R.g.cozyCardContainerSelector,E.u.style(as)])}),cs=function(e){var t=e.card,n=e.actions,r=m.useContext(Ze.m.Context).card.feedbackForm,i=h.hg.create(void 0),a=h.hg.create(!1);return(0,b.pipe)(t.visualState.transition,A.fromPredicate((function(e){return"feedback_form"===e.type})),A.fold((function(){return _.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",t),null}),(function(e){var o=e.options;return m.createElement(wt,{onFocus:function(){return n.next({type:k.l.Type.alertIgnoreFeedbackFormShow,alertId:t.activeAlert.id})},theme:qo(t.renderOptions),visualState:t.visualState,body:m.createElement(m.Fragment,null,m.createElement(_a,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(Be.H4,{className:_o},r.dismissReason),m.createElement(tt.Group,{itemWrapperClassName:So,selectedItemIndex:i,items:o.map((function(e){return m.createElement("div",{className:Co},e.text)})),onChange:function(){return a.set(!1)}})),mainActions:m.createElement(m.Fragment,null),footer:m.createElement(m.Fragment,null,m.createElement(h.F.div,{"aria-hidden":a,className:a.view((0,w.RN)(Io,ko))},r.error),m.createElement("div",null,m.createElement(Je.zx.Primary,{name:"submitCardFeedbackForm",onClick:function(){var e=i.get();return void 0===e?a.set(!0):bt.hz((function(){return n.next({type:k.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:o[e].key})}))()}},r.submit),m.createElement(Je.zx.Ghost,{className:xo,name:"skipCardFeedbackForm",onClick:bt.hz((function(){return n.next({type:k.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:"skipped"})}))},r.skip))),subActions:m.createElement(m.Fragment,null)})})))},ls=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.action,i=e.hasEmoji;return m.createElement("div",(0,x.__assign)({},(0,h.Sh)(n.wrapper,Os.ctaText)),i?m.createElement(Un.d,{emojiClassName:(0,h.Sh)(Os.cardLogo,n.logo).className},r):r)},us=function(e){var t=e.vox,n=e.theme,r=void 0===n?{}:n;return m.createElement(m.Fragment,null,(0,b.pipe)(t.logoUrl,A.map((function(e){return m.createElement(sr,(0,x.__assign)({},(0,h.Sh)(Os.cardLogo,r.logo),{logoUrl:e}))})),A.toNullable),m.createElement(or,(0,x.__assign)({vox:t},(0,h.Sh)(Os.cta,r.label),{isMinimalCard:!1})))},ds=function(e){return[Hn.R.outcomeTypeMatch(e.lensType)({correctness:R.m.dotCorrectness,clarity:R.m.dotClarity,premium:R.m.dotAdvanced,engagement:R.m.dotEngagement,delivery:R.m.dotDelivery,vox:R.m.dotVox}),Os.cta]},ps=function(){var e=m.useContext(Ze.m.Context);return m.createElement(Wt.Regular,{className:Os.newLabel},e.new)};!function(e){e.Bundle=function(e){var t=e.card,n=e.actions,r=ds(t.activeAlert)[0];return m.createElement(Qe.Mini,(0,x.__assign)({},(0,h.Sh)(Ls.wrapper,Ls.bundleContainer,Ls.dot,r),{actions:n,cardId:t.id,getActiveAlert:function(){return t.alerts[0]},counter:m.createElement(Be.CL,{className:Ls.alertsCounter},t.alerts.length)}),m.createElement(h.F.div,{className:Ls.miniContainer},m.createElement("div",{className:Ls.highlightedText},v.X.bundleTitle(t))))},e.Standard=function(e){var t=e.card,n=e.actions,r=ds(t.activeAlert),i=r[0],a=r[1],o=m.useContext(Ze.m.Context);return m.createElement(Qe.Mini,(0,x.__assign)({},(0,h.Sh)(Ls.wrapper,Ls.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert}}),m.createElement(h.F.div,{className:Ls.miniContainer},m.createElement("div",{className:Ls.highlightedText},t.activeAlert.highlightTexts[0]),m.createElement("div",{className:Ls.middleDot},"·"),(0,b.pipe)(t.activeAlert.extraProperties.vox,A.map((function(e){return m.createElement(us,{vox:e,theme:{logo:Ls.cardLogo}})})),A.getOrElse((function(){return m.createElement(m.Fragment,null,m.createElement(ls,{hasEmoji:Bt.$.hasTone(t.activeAlert),action:v.X.miniTitle(t,o),theme:{wrapper:a,logo:Ls.cardLogo}}),Bt.$.isDemoPremium(t.activeAlert)&&m.createElement(Oe.JO.Paid,{width:14,className:Os.premiumIcon}),Bt.$.isTakeaway(t.activeAlert)&&m.createElement(Oe.JO.Megaphone,{width:16,className:Ss.takeawayIconStandard}))}))),(0,b.pipe)(t.renderOptions.isNew,S.U((function(e){return A.isSome(e)?m.createElement(ps,{key:"new-label"}):null})))))},e.TwoLined=function(e){var t=e.card,n=e.actions,r=ds(t.activeAlert),i=r[0],a=r[1],o=m.useContext(Ze.m.Context);return m.createElement(Qe.Mini,(0,x.__assign)({},(0,h.Sh)(Ss.wrapper,Ss.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert}}),m.createElement("div",{className:Ss.miniContainer},(0,b.pipe)(t.activeAlert.extraProperties.vox,A.map((function(e){return m.createElement(us,{vox:e,theme:{logo:Ss.cardLogo,label:Ss.subTitle}})})),A.getOrElse((function(){return m.createElement(m.Fragment,null,m.createElement(ls,{hasEmoji:Bt.$.hasTone(t.activeAlert),action:v.X.miniTitle(t,o),theme:{wrapper:(0,h.Sh)(a,Ss.ctaText,Ss.subTitle).className,logo:Ss.cardLogo}}),Bt.$.isDemoPremium(t.activeAlert)&&m.createElement(Oe.JO.Paid,{width:14,className:Ss.premiumIcon}),Bt.$.isTakeaway(t.activeAlert)&&m.createElement(Oe.JO.Megaphone,{width:16,className:Ss.takeawayIconMini}))}))),m.createElement("div",{className:gs},t.activeAlert.highlightTexts[0])))}}(Xo||(Xo={}));var fs="0 1px 8px rgba(109, 117, 141, .18)",ms={$nest:{"&:before":{top:E.u.rem(.85),left:0}}},hs="miniTwoLinedHighlightedText",gs=E.u.joinClasses([hs,E.u.style({overflow:"hidden",marginTop:E.u.rem(-.25),color:Fe.Il.CoreNeutral90,textOverflow:"ellipsis"})]),vs={height:E.u.rem(3.25),borderRadius:E.u.rem(T.Jr),boxShadow:fs,$nest:(zo={"&:hover":{boxShadow:fs}},zo["&:hover .miniTwoLinedHighlightedText"]={borderColor:"transparent"},zo)},ys={top:E.u.rem(.7)},bs={fontWeight:E.u.important(400),fontSize:E.u.rem(.75)},ws={position:"absolute",top:E.u.rem(.7),left:E.u.rem(.5),minWidth:"initial",minHeight:"initial",width:E.u.rem(1.25),height:E.u.rem(.85),background:Fe.Il.CoreNeutral0,fill:Fe.Il.CoreYellow50},_s={position:"absolute",left:E.u.rem(.5),minWidth:"initial",minHeight:"initial",background:Fe.Il.CoreNeutral0},Cs=(0,x.__assign)((0,x.__assign)({},_s),{top:E.u.rem(.6)}),Ss=E.u.stylesheet({dot:[ms],wrapper:[vs],miniContainer:[{flexDirection:"column"}],cardLogo:[ys],subTitle:[bs],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],premiumIcon:[ws],takeawayIconMini:[Cs],takeawayIconStandard:[_s]}),xs={height:E.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},As={$nest:{"&:before":{top:E.u.px(1),bottom:0,left:0}}},Is={height:E.u.important(E.u.rem(2.5)),borderRadius:E.u.rem(T.Jr)},ks={color:Fe.Il.CoreNeutral50,display:"flex",width:E.u.rem(2),height:E.u.percent(100),justifyContent:"center",alignItems:"center"},Es={overflow:"hidden",color:Fe.Il.CoreNeutral90,textOverflow:"ellipsis"},Ts={display:"inline-block",padding:"0 "+E.u.rem(.5)},Rs={top:0,bottom:0,left:E.u.rem(.5),margin:"auto"},Ls=E.u.stylesheet({wrapper:[xs],dot:[As],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[Is],alertsCounter:[ks],highlightedText:[Es],middleDot:[Ts],cardLogo:[Rs]}),Ms={color:Fe.Il.CoreNeutral50,fontWeight:300},Ns={position:"absolute",left:E.u.rem(.5),width:E.u.rem(1),height:E.u.rem(1),background:Fe.Il.CoreNeutral0},Fs={marginLeft:E.u.rem(.5)},Ps={position:"absolute",top:0,bottom:0,left:E.u.rem(.5),margin:"auto",minWidth:"initial",minHeight:"initial",width:E.u.rem(1),height:E.u.rem(1),background:Fe.Il.CoreNeutral0,fill:Fe.Il.CoreYellow50},Os=E.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[Ms],cardLogo:[Ns],newLabel:[Fs],premiumIcon:[Ps]});function Bs(e){var t=e.href,n=e.children,r=e.className;return m.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:r,href:t},n)}var Ds,Ws={MLA:"https://owl.purdue.edu/owl/research_and_citation/mla_style/mla_formatting_and_style_guide/mla_works_cited_electronic_sources.html",APA:"https://owl.purdue.edu/owl/research_and_citation/apa_style/apa_formatting_and_style_guide/reference_list_electronic_sources.html",Chicago:"https://owl.purdue.edu/owl/research_and_citation/chicago_manual_17th_edition/cmos_formatting_and_style_guide/web_sources.html"},Hs={display:"block",color:Fe.Il.CoreNeutral90,fontWeight:"bold"},Us={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},zs={display:"block",color:Fe.Il.CoreBlue50,fontWeight:"normal"},Xs={color:Pe.VR},Gs={color:Pe.VR},Vs={color:Fe.Il.CoreCyan50,fontWeight:"bold",fontSize:E.u.rem(.9375)},Ys={marginTop:E.u.rem(.3),color:Fe.Il.CoreNeutral90},qs={position:"relative",marginLeft:E.u.rem(-.5)},$s={position:"absolute",top:0,left:0,display:"flex",margin:E.u.rem(.5625)+" 0 0 "+E.u.rem(.4375),color:Pe.VR,pointerEvents:"none"},js={display:"block",padding:E.u.rem(1.4375)+" 0 0 "+E.u.rem(.4375),borderRadius:E.u.rem(T.fx),backgroundColor:Pe.zh,transitionDuration:E.u.seconds(0),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:Pe.jj}}},Zs={display:"flex",color:Fe.Il.CoreBlue50,pointerEvents:"all",alignItems:"center"},Js={minWidth:E.u.rem(1),minHeight:E.u.rem(1),stroke:Fe.Il.CoreBlue50},Ks={width:E.u.percent(100),pointerEvents:"all"},Qs={color:Fe.Il.CoreBlue50,textDecoration:"none"},ec={position:"absolute",right:0,bottom:0,marginLeft:E.u.rem(.5)},tc={$nest:{"& i":{color:Pe.UE}}},nc=E.u.stylesheet({plagiarismTitle:[Hs],plagiarismTitleContent:[Us],titleUrl:[Us,zs],titleBy:[Xs],plagiarismP2:[Gs],percent:[Vs],textToCopy:[Us,Ys],referenceWrapper:[qs],referenceData:[$s],copyableReference:[js],citationStyleSelect:[Zs],citationStyleIcon:[Js],citationStyleDdlButton:[Ks],descriptionLink:[Qs],expandBtn:[ec],more:[tc]}),rc=function(e){return bt.yG(e,{allowedTags:["b","i","br"]})},ic=function(e){var t=e.card,n=m.useContext(Ze.m.Context);return m.createElement(Be.XY,{className:nc.plagiarismP2},n.plagiarism.percentileDescription(m.createElement("span",{className:nc.percent},t.meta.percentile,"%")))},ac=function(e){var t=e.title,n=e.url;return m.createElement(Be.Xk,{className:nc.plagiarismTitle},m.createElement("div",(0,x.__assign)({className:nc.plagiarismTitleContent},rc(t))),(0,b.pipe)(n,A.map((function(e){return m.createElement(Je.zx,{name:"url-button",href:e,target:"_blank",rel:"noopener noreferrer",styleType:Be.ZT.Type.Base,className:nc.titleUrl},e)})),A.toNullable))},oc=function(e){var t=e.title,n=e.authors;return m.createElement(Be.Xk,{className:nc.plagiarismTitle},m.createElement("div",(0,x.__assign)({className:nc.plagiarismTitleContent},rc(t))),(0,b.pipe)(n,A.map((function(e){return m.createElement(Be.XY,{className:nc.plagiarismTitleContent}," ",m.createElement("span",{className:nc.titleBy},"by")," ",m.createElement("span",(0,x.__assign)({},rc(e))))})),A.toNullable))},sc=function(e){var t=e.alert;return"publication"===t.plagiarismType.source?m.createElement(oc,{title:t.title,authors:t.plagiarismType.authors}):m.createElement(ac,{title:t.title,url:t.plagiarismType.url})},cc=function(){var e,t=m.useContext(Ze.m.Context);return m.createElement(Be.XY,null,t.plagiarism.cardDescription((e=nc.descriptionLink,function(t){var n=t.type;return m.createElement(Bs,{href:Ws[n],className:e},n)})))},lc=function(e){var t=e.card,n=e.dismissActions,r=m.useContext(Ze.m.Context),i=t.alerts.map((function(e){return e.id}));return m.createElement(Je.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:bt.hz((function(){return n.next({type:k.l.Type.dismissBatch,alerts:i})}))},m.createElement(Oe.JO.Ignore,null))},uc=function(e){var t=e.visualState;return m.createElement(br,{visualState:t,className:nc.more},m.createElement(cc,null))},dc=function(e){var t=e.onLeftClick,n=e.onRightClick,r=e.currentMatch,i=e.totalMatch,a=e.replaceOneMatch,o=void 0===a||a,s=e.disableOnEnd,c=void 0===s||s,l=e.style,u=m.useContext(Ze.m.Context).card.matchesNavigation;return 0===i?null:1===i&&o?m.createElement("div",(0,x.__assign)({},(0,h.Sh)(mc.matchesRow,l.matchesRow||!1)),m.createElement(Be.ck,(0,x.__assign)({},(0,h.Sh)(mc.matchesCount,l.matchesCount||!1)),u.numberOfMatches(i))):m.createElement("div",(0,x.__assign)({},(0,h.Sh)(mc.matchesRow,l.matchesRow||!1)),m.createElement(Je.zx.Ghost,{disabled:c&&0===r,name:"left",title:u.prev,onClick:t},m.createElement(Oe.JO.Arrow,(0,x.__assign)({},(0,h.Sh)(mc.leftButtonIcon,l.leftButtonIcon||!1)))),m.createElement(Be.ck,(0,x.__assign)({},(0,h.Sh)(mc.matchesCount,l.matchesCount||!1)),u.currentMatchPosition(r+1,i)),m.createElement(Je.zx.Ghost,{disabled:c&&r===i-1,name:"right",title:u.next,onClick:n},m.createElement(Oe.JO.Arrow,(0,x.__assign)({},(0,h.Sh)(mc.rightButtonIcon,l.rightButtonIcon||!1)))))},pc={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:E.u.rem(.25)}}},fc={textTransform:"uppercase",letterSpacing:E.u.px(.8),lineHeight:E.u.rem(2)},mc=E.u.stylesheet({matchesRow:[pc],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[fc]}),hc=function(e){var t=e.card,n=e.actions;return m.createElement(dc,{onLeftClick:function(){return n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"left"})},onRightClick:function(){return n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"right"})},currentMatch:t.activeAlertIndex,totalMatch:t.alerts.length,style:{}})},gc=n(57175),vc=n(95300),yc=n(50628),bc=function(){function e(){}return e.copy=function(e,t){this._clearSelection();var n=this._createHiddenSpan(e);return this.select(n),this._copy(e,t).then((function(){n.parentElement.removeChild(n)})).catch((function(e){throw n.parentElement.removeChild(n),e}))},e.select=function(e){if(window.getSelection&&document.createRange){var t=window.getSelection();(n=document.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if("createTextRange"in document.body&&"selection"in document){var n;(n=document.body.createTextRange()).moveToElementText(this),n.select()}},e._clearSelection=function(){var e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()},e._createHiddenSpan=function(e){var t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t},e._copy=function(e,t){return new Promise((function(n,r){try{(t?window.clipboardData.setData("text",e):document.execCommand("copy"))?n():r(new Error("Copy API doesn't work"))}catch(e){r(e)}}))},e.copyApiAvailable=new vc.X(!0),e}();try{Pn.R(window,"click").pipe(yc.P()).subscribe((function(){document.queryCommandSupported("copy")||bc.copyApiAvailable.next(!1)}))}catch(e){bc.copyApiAvailable.next(!1)}!function(e){e.Context=m.createContext(gc.S.invariantContent("CopyToClipboard")),e.ContextMock=function(t){var n=t.children;return m.createElement(e.Context.Provider,{value:function(e){return bc.copy(e,!1)},children:n})}}(Ds||(Ds={}));var wc,_c=function(e){var t=e.textToCopy,n=e.children;return m.createElement(Ds.Context.Consumer,null,(function(e){return m.createElement(Je.zx.Flat,{key:"copy_title",name:"copy_title",title:"Click to copy",className:nc.copyableReference,onClick:function(){return e(t,"referenceCopied")}},n,m.createElement("div",(0,x.__assign)({className:nc.textToCopy},(r=t,bt.yG(r,{allowedTags:["b","i","br"]})))));var r}))},Cc={mla:"MLA",apa:"APA",chicago:"Chicago"},Sc=$r.XP(Cc),xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,x.__extends)(t,e),t._renderPublication=function(e){var t=h.hg.create("mla");return m.createElement(h.F.div,{key:"publication",className:nc.referenceWrapper},t.view((function(n){return m.createElement(m.Fragment,null,m.createElement(_c,{key:"rf1"+n,textToCopy:e.citationStyle[n]}),m.createElement(Be.x4,{className:nc.referenceData},m.createElement(Ze.m.Context.Consumer,null,(function(e){return e.plagiarism.publicationReferenceDescription(m.createElement(fn.L,{vAlign:"top",name:"plagiarism",label:m.createElement(Je.zx,{name:"citation-style-select",active:!1,className:nc.citationStyleSelect},Cc[n])},Sc.map((function(e){return m.createElement(Je.zx.Flat,{className:nc.citationStyleDdlButton,key:e,name:"citation-button-"+e,active:t.view((function(t){return t===e})),onClick:function(){return t.set(e)}},Cc[e])}))))}))))})))},t._renderWeb=function(e,t){return m.createElement("div",{key:"web",className:nc.referenceWrapper},m.createElement(_c,{textToCopy:e+(0,b.pipe)(t.url,A.fold((function(){return""}),(function(e){return". "+e})))},m.createElement(Ze.m.Context.Consumer,null,(function(e){var t=e.plagiarism;return m.createElement(Be.x4,{className:nc.referenceData},t.webReferenceDescription)}))))},t.prototype.render=function(){var e=this.props.alert;return"publication"===e.plagiarismType.source?t._renderPublication(e.plagiarismType):t._renderWeb(e.title,e.plagiarismType)},t}(m.Component),Ac=function(e){var t=e.card,n=e.actions;return m.createElement(wt,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.CardType.defaultCard})},theme:Yo(t.renderOptions.layoutDensity),body:m.createElement(m.Fragment,null,m.createElement(ic,{card:t}),m.createElement(sc,{alert:t.activeAlert}),m.createElement(xc,{alert:t.activeAlert,feedbackActions:n})),mainActions:m.createElement(lc,{card:t,dismissActions:n}),footer:m.createElement(uc,{visualState:t.visualState}),navigation:m.createElement(hc,{actions:n,card:t}),subActions:m.createElement(yr,{actions:n,card:t,mode:"mini"})})};!function(e){e.Standard=function(e){var t=e.card,n=e.actions,r=t.alerts[0];return m.createElement(Qe.Mini,(0,x.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,h.Sh)(Bc.wrapper,Bc.dot,Bc.dotOutcomesPlagiarism),{actions:n}),m.createElement("div",{className:Bc.miniContainer},m.createElement("span",(0,x.__assign)({key:"title"},(0,h.Sh)(Bc.text,"publication"===r.plagiarismType.source&&Bc.fullText)),r.title),"web"===r.plagiarismType.source?(0,b.pipe)(r.plagiarismType.url,A.map(Ft.Wq),A.filter(w.Dw),A.map((function(e){return m.createElement("span",{key:"url",className:Bc.domain}," — ",e)})),A.toNullable):(0,b.pipe)(r.plagiarismType.authors,A.map((function(e){return m.createElement("span",{key:"publication",className:Bc.publication}," — ",e)})),A.toNullable)))},e.TwoLined=function(e){var t=e.card,n=e.actions,r=t.alerts[0],i="web"===r.plagiarismType.source?(0,b.pipe)(r.plagiarismType.url,A.map(Ft.Wq),A.filter(w.Dw)):r.plagiarismType.authors;return m.createElement(Qe.Mini,(0,x.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,h.Sh)(Rc.wrapper,Bc.dotOutcomesPlagiarism,(0,b.pipe)(i,A.fold((function(){return Rc.dotInTheMiddle}),(function(){return Rc.dot})))),{actions:n}),m.createElement("div",{className:Rc.miniContainer},(0,b.pipe)(i,A.map((function(e){return m.createElement("span",{className:Rc.subTitle},e)})),A.toNullable),m.createElement("span",(0,x.__assign)({key:"title"},(0,h.Sh)(Rc.text)),r.title)))}}(wc||(wc={}));var Ic={overflow:"hidden",color:Fe.Il.CoreNeutral90,textOverflow:"ellipsis"},kc={height:E.u.rem(3.5)},Ec={overflow:"hidden",marginBottom:E.u.rem(-.25),textOverflow:"ellipsis",fontSize:E.u.rem(.75)},Tc={$nest:{"&:before":{top:E.u.rem(.85),bottom:0}}},Rc=E.u.stylesheet({text:[Ic],wrapper:[kc],miniContainer:[{display:"flex",flexDirection:"column"}],dotInTheMiddle:[{top:0,bottom:0,left:0}],subTitle:[Ec],dot:[Tc]}),Lc={overflow:"hidden",color:Fe.Il.CoreNeutral90,textOverflow:"ellipsis"},Mc={maxWidth:E.u.percent(100),flexShrink:0},Nc={height:E.u.rem(3)},Fc={overflow:"hidden",maxWidth:E.u.percent(100),textOverflow:"ellipsis",flexShrink:0},Pc={$nest:{"&:before":{top:E.u.px(1),bottom:0}}},Oc={$nest:{"&:before":{backgroundColor:Fe.Il.CoreCyan50}}},Bc=E.u.stylesheet({text:[Lc],fullText:[Mc],wrapper:[Nc],miniContainer:[{display:"flex"}],domain:[Fc],publication:[{overflow:"hidden",textOverflow:"ellipsis"}],dot:[Pc],dotOutcomesPlagiarism:[Oc]});function Dc(e,t,n){var r=t.activeAlert,i=t.activeHighlightIndex,a=r.getHighlightRanges(),o=(i+("left"===e?a.length-1:1))%a.length;n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:o},direction:e})}var Wc,Hc=function(e){var t=e.card,n=e.actions,r=e.selectedLabelIndex,i=e.isChecking,a=m.useContext(Ze.m.Context),o=h.hg.create(!1);return Nn.P.useSubscriptionTo(i.pipe(On.b((function(e){return o.set(e)})))),m.createElement(fa,{applyMessage:t.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(t.activeAlert.todoAction),checkingInProgress:o,onClick:function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:r.get(),cardType:k.l.getCardType(t)})}})},Uc=function(e){var t=e.card,n=e.actions;return m.createElement(dc,{onLeftClick:function(){return Dc("left",t,n)},onRightClick:function(){return Dc("right",t,n)},currentMatch:t.activeHighlightIndex,totalMatch:t.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}})},zc=function(e){var t=e.activeAlert,n=e.selectedLabelIndex,r=e.actions,i=m.useContext(Ze.m.Context);return m.createElement("div",{className:Nr.optionsContainer},t.labels.map((function(e,t){return m.createElement(m.Fragment,{key:"option-"+t},m.createElement(tt.Item,{className:Nr.optionLabel,onChange:function(){n.set(t),r.next({type:k.l.Type.alternativeReplacementRadioButtonClick,index:t})},checked:n.view((function(e){return e===t}))},m.createElement(Be.XY,{className:Nr.optionRadio},e.label)),m.createElement(Be.x4,{className:Nr.optionExample},e.replacementTexts.join("; ")),m.createElement(Be.x4,{className:Nr.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(e.matches)))})))},Xc=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=h.hg.create(0);return m.createElement(wt,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.getCardType(t)})},theme:(0,x.__assign)({wrapper:Nr.superWrapper,content:i.pipe(S.U((0,w.RN)(Nr.loadingWrapperInvisible,Nr.loadingWrapper)))},Yo(t.renderOptions.layoutDensity)),extra:m.createElement(xa,{isChecking:i}),body:m.createElement(m.Fragment,null,m.createElement(_a,{alert:t.activeAlert,options:t.renderOptions,meta:t.meta}),m.createElement(wa,{alert:t.activeAlert}),m.createElement(ra,{card:t,isChecking:r}),m.createElement(na,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}),m.createElement(zc,{activeAlert:t.activeAlert,selectedLabelIndex:a,actions:n})),mainActions:m.createElement(sa,{card:t,feedbackActions:n}),footer:m.createElement(m.Fragment,null,m.createElement(ma,{card:t}),m.createElement(Hc,{selectedLabelIndex:a,card:t,actions:n,isChecking:r})),navigation:m.createElement(Uc,{card:t,actions:n}),subActions:m.createElement(yr,{actions:n,card:t,mode:"mini"})})};!function(e){e.Full=function(e){var t=e.card,n=e.actions,r=v.X.useCardStates(t),i=r.isChecking,a=r.isCheckingGlobal,o=r.transform;return m.createElement(h.F.Fragment,null,t.pipe(C.x((function(e,t){return e.hashCode()===t.hashCode()})),S.U((0,y.flow)(v.X.match({plagiarism:function(e){return m.createElement(Ac,{card:e,actions:n})},super:function(e){return m.createElement(Xc,{card:e,actions:n,isChecking:i,isCheckingGlobal:a})},default:function(e){return m.createElement(Vo,{card:e,actions:n,isChecking:i,transform:o,isCheckingGlobal:a})}}),v.X.foldCard))))},e.Mini=function(t){var n=t.card,r=t.actions;return m.createElement(h.F.Fragment,null,n.pipe(S.U((function(t){return t.renderOptions.showBundle?m.createElement(e.MiniSingleLined,{card:t,actions:r}):v.X.RenderOptions.Density.matchL((function(){return m.createElement(e.MiniSingleLined,{card:t,actions:r})}),(function(){return m.createElement(e.MiniTwoLined,{card:t,actions:r})}),(function(){return m.createElement(e.MiniTwoLined,{card:t,actions:r})}))(t.renderOptions.layoutDensity)}))))},e.MiniSingleLined=function(e){var t=e.card,n=e.actions;function r(e){return e.renderOptions.showBundle?m.createElement(Xo.Bundle,{card:e,actions:n}):m.createElement(Xo.Standard,{card:e,actions:n})}return(0,b.pipe)(t,v.X.match({plagiarism:function(e){return m.createElement(wc.Standard,{card:e,actions:n})},super:r,default:r}),v.X.foldCard)},e.MiniTwoLined=function(e){var t=e.card,n=e.actions;function r(e){return m.createElement(Xo.TwoLined,{card:e,actions:n})}return(0,b.pipe)(t,v.X.match({plagiarism:function(e){return m.createElement(wc.TwoLined,{card:e,actions:n})},super:r,default:r}),v.X.foldCard)},e.Success=Qe.Success,e.FeedbackForm=function(e){var n=e.cardData,r=e.actions;function i(e){return m.createElement(cs,{card:e,actions:r})}return(0,b.pipe)(n,v.X.match({plagiarism:function(e){return t("CardComponent").getLogger("FeedbackForm").error("Tried to draw a feedback form for a plagiarism alert",e),null},default:i,super:i}),v.X.foldCard)};var t=(0,w.HP)(_.C8.Logging.getLogger)}(Wc||(Wc={}));var Gc,Vc,Yc,qc=n(70276);!function(e){e.Full=function(e){var n=e.card,a=e.actions,o=v.X.useCardStates(n),s=o.isChecking,c=o.isCheckingGlobal,l=o.transform,u=function(e){return i("CardBundle").error("rendering fallback for card",e),null},d=n.pipe((function(e){return e.lift(new qc.G((function(e){return e.activeAlert.id})))}),Kt.w((function(e){return e.pipe(C.x((function(e,t){return e.activeAlertIndex===t.activeAlertIndex})),S.U((function(t){return{activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,b.pipe)(e,C.x((function(e,t){return e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId})),$t.shareReplay({bufferSize:1,refCount:!0}))}})))})));return m.createElement(r,{card:n,actions:a},m.createElement(t,{state:d,stateToClassMapper:function(e,t){return e?e.activeAlertId===t.activeAlertId||e.activeAlertIndex===t.activeAlertIndex?{prev:(0,Eo.EJ)(vl.inBundleToUpdatedCardOld),next:(0,Eo.EJ)(vl.inBundleToUpdatedCardNew)}:e.activeAlertIndex<t.activeAlertIndex?{prev:(0,Eo.EJ)(vl.inBundleToNextCardOld),next:(0,Eo.EJ)(vl.inBundleToNextCardNew)}:{prev:(0,Eo.EJ)(vl.inBundleToPrevCardOld),next:(0,Eo.EJ)(vl.inBundleToPrevCardNew)}:{prev:(0,Eo.EJ)(""),next:(0,Eo.EJ)("")}}},(function(e){return m.createElement(h.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:y.constVoid},(0,b.pipe)(e.state.card,S.U((0,y.flow)(v.X.match({plagiarism:u,super:u,default:function(t){var n=t.alerts.length,r=1===n?vl.bundleInnerContainer:2===n?vl.bundleInnerContainer2Cards:vl.bundleInnerContainerNCards;return m.createElement(h.F.div,{className:r},m.createElement(Vo,{card:t,actions:a,isChecking:s,transform:"prev"===e.type?jt.of(t.transform):l,isCheckingGlobal:c}))}}),v.X.foldCard))))})))};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,x.__extends)(t,e),t}(Eo.l5),n=function(e){var t=e.alertCount;return 1===t?m.createElement(m.Fragment,null):2===t?m.createElement("div",{className:vl.bundleFakeCard1}):m.createElement(m.Fragment,null,m.createElement("div",{className:vl.bundleFakeCard1}),m.createElement("div",{className:vl.bundleFakeCard2}))},r=function(e){var t=e.children,r=e.card,i=e.actions;return m.createElement(h.F.div,{className:vl.bundleCardWrapper},m.createElement(Ta,{card:r,actions:i}),m.createElement(h.F.div,{className:vl.cardBundleContainer},t,(0,b.pipe)(function(e){return(0,b.pipe)(e,S.U((function(e){return v.X.isBundle(e)?A.some(e.alerts.length):A.none})))}(r),S.U(A.map((function(e){return m.createElement(n,{key:e,alertCount:e})}))),S.U(A.toNullable))))},i=(0,w.HP)(_.C8.Logging.getLogger)}(Yc||(Yc={}));var $c,jc=.25,Zc="0 1px 8px rgba(109, 117, 141, .18)",Jc=E.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),Kc=E.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),Qc=E.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),el=E.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),tl=E.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),nl={position:"relative",borderRadius:E.u.rem(T.Jr),background:Fe.Il.CoreNeutral0,boxShadow:Zc,zIndex:2},rl={marginTop:E.u.rem(.75)},il={marginTop:E.u.rem(1.25)},al={position:"absolute",top:E.u.px(-5),right:E.u.rem(.5),left:E.u.rem(.5),zIndex:-1,display:"block",height:E.u.percent(100),borderRadius:E.u.rem(T.Jr),backgroundColor:Fe.Il.CoreNeutral1,boxShadow:Zc,content:"' '"},ol={position:"absolute",top:E.u.px(-10),right:E.u.rem(1),left:E.u.rem(1),zIndex:-2,display:"block",height:E.u.rem(2),borderRadius:E.u.rem(T.Jr),backgroundColor:Fe.Il.CoreNeutral10,boxShadow:Zc,content:"' '"},sl={borderRadius:E.u.rem(.75),background:Fe.Il.CoreNeutral20,margin:E.u.rem(-.25)+" "+E.u.rem(-.25),padding:E.u.rem(.25)+" "+E.u.rem(.25),$nest:(Gc={},Gc["& ."+R.g.cozyCardContainerSelector]={margin:0,boxShadow:"none"},Gc["& ."+R.g.fullCardSelector]={padding:E.u.rem(.75)+" "+E.u.rem(.5)+" "+E.u.rem(.5)+" "+E.u.rem(1)},Gc["& [role=dropdown-list]"]={transform:"translateY("+E.u.rem(-.5)+")"},Gc)},cl={position:"absolute",top:E.u.rem(.8),right:E.u.rem(1),margin:0},ll={borderRadius:E.u.rem(T.Jr),background:Fe.Il.CoreNeutral0,boxShadow:Zc},ul={display:"block",position:"absolute",top:0,$nest:(Vc={},Vc["& ."+R.g.bundleInnerContainerSelector]={margin:0},Vc)},dl={animation:tl+" "+E.u.seconds(jc)+" ease-out"},pl={animation:Qc+" "+E.u.seconds(jc)+" ease-out"},fl={animation:Kc+" "+E.u.seconds(jc)+" ease-in"},ml={animation:el+" "+E.u.seconds(jc)+" ease-in"},hl={display:"none",animation:Jc+" "+E.u.seconds(jc)+" ease-in"},gl={animation:Jc+" "+E.u.seconds(jc)+" ease-in"},vl=(0,x.__assign)((0,x.__assign)({},E.u.stylesheet({bundleInnerContainer:[nl],bundleCardWrapper:[sl],minimalBetaLabel:[cl],compactCardContainer:[ll],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[ul],inBundleToPrevCardOld:[ul,dl],inBundleToPrevCardNew:[pl],inBundleToNextCardOld:[ul,fl],inBundleToNextCardNew:[ml],inBundleToUpdatedCardOld:[hl],inBundleToUpdatedCardNew:[gl]})),{bundleInnerContainer:E.u.joinClasses([R.g.bundleInnerContainerSelector,E.u.style(nl)]),bundleInnerContainer2Cards:E.u.joinClasses([R.g.bundleInnerContainerSelector,E.u.style(nl,rl)]),bundleInnerContainerNCards:E.u.joinClasses([R.g.bundleInnerContainerSelector,E.u.style(nl,il)]),bundleFakeCard1:E.u.joinClasses([R.g.bundleFakeCard1Selector,E.u.style(al)]),bundleFakeCard2:E.u.joinClasses([R.g.bundleFakeCard2Selector,E.u.style(ol)])}),yl=function(e){var t=e.onClick,n=e.collapsed,r=m.useContext(Ze.m.Context).priorityList;return m.createElement(Je.zx.Tertiary,{name:"card-list-more",className:_l.toggleNonPriority,title:m.createElement("div",{className:_l.tooltip},r.toggleButtonTooltip(n)),onClick:t},n?r.expand:r.collapse)},bl={padding:E.u.rem(.5)+" "+E.u.rem(.25),width:E.u.rem(12.75),whiteSpace:"normal",lineHeight:E.u.rem(1)},wl={$nest:{"&[data-textpos='everywhere']":{marginTop:E.u.rem(1),padding:"0 "+E.u.rem(2)},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:Fe.Il.CoreNeutral10}}},_l=E.u.stylesheet({tooltip:[bl],toggleNonPriority:[wl]}),Cl=function(e){var t=e.actions,n=e.visualState,r="added"===n.transition.type;return m.createElement(m.Fragment,null,"hidden"!==n.transition.type&&m.createElement("div",{className:Il.moreBtnContainer},m.createElement(yl,{collapsed:r,onClick:function(){return t.next({type:k.l.Type.toggleNonPriorityCards,nextListState:r?"expanded":"collapsed"})}})))},Sl=function(e){var t=e.visualState,n=m.useContext(Ze.m.Context).priorityList;return m.createElement(m.Fragment,null,"rendered"===t.transition.type&&m.createElement("div",{className:Il.hintContainer},m.createElement(Be.x4,null,n.hint)))},xl={display:"flex",height:E.u.rem(3),alignItems:"center",justifyContent:"center"},Al={padding:E.u.rem(.5),borderRadius:E.u.rem(T.fx),backgroundColor:Fe.Il.CoreNeutral10},Il=E.u.stylesheet({moreBtnContainer:[xl],hintContainer:[Al]});!function(e){e.Card=function(e){return g.UI.Node.make((function(t){var n=t.view,r=n("view");return m.createElement(h.F.Fragment,null,r.pipe(C.x((function(e,t){return e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type})),S.U((function(t){return v.X.Priority.isExpand(t)?m.createElement(Cl,{actions:e,visualState:t.visualState}):v.X.Priority.isExpandHint(t)?m.createElement(Sl,{visualState:t.visualState}):m.createElement(Qe.Card,{miniCard:m.createElement(Wc.Mini,{card:r,actions:e}),fullCard:v.X.isBundle(t)?m.createElement(Yc.Full,{card:r,actions:e}):m.createElement(Wc.Full,{card:r,actions:e}),successCard:m.createElement(Wc.Success,{isLastCard:n("isLastCard"),actions:e}),feedbackForm:m.createElement(Wc.FeedbackForm,{cardData:t,actions:e}),actions:e,card:t})}))))}))}}($c||($c={}))},48869:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r,i=n(51465);!function(e){e.PriorityToggle=function(e){return i.UI.Node.make((function(){return null}))}}(r||(r={}))},23124:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r,i=n(59312),a=n(27378),o=n(42726),s=n(19962),c=n(51465),l=n(22823),u=n(13097),d=n(16782),p=n(41398),f=n(66310),m=n(24209),h=n(49708),g=n(85985),v=n(17343),y=n(76974),b=n(13444),w=n(50628),_=n(40151),C=n(2834),S=n(16528),x=n(28043),A=n(60430),I=n(77176),k=n(93508);!function(e){var t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=c.UI.Grid.make((function(e){var r=e.slots,c=e.state,l=e.notify,u=new d.t,E=c.pipe(p.M(u),f.w((function(e){var t=e[0],n=e[1];return t.position.animationInProgress?m.T(h.R(n,"transitionend").pipe(g.h((function(e){return e.target===n&&"transform"===e.propertyName})),v.h(void 0)),y.of(void 0).pipe(b.g(200))).pipe(w.P()):_.c()})),C.b(l({kind:n.completePositionAnimation}))),T=c.pipe(p.M(u),f.w((function(e){var t=e[0],n=e[1];return t.height.watched?S.YC(n).pipe(g.h((function(e){return t.height.value!==e.height||!t.height.isValid||e.height>0}))):_.c()})),x.x(),C.b((function(e){var t=e.height;return l({kind:n.changePosition,height:t})()})));A.P.useSubscriptionTo(m.T(E,T));var L=c.pipe(I.U((function(e){return e.position.top})),I.U((function(e){return s.ux.translateY(e)})),x.x()),M=c.pipe(I.U((function(e){return e.layer===t.front?1:0})),x.x()),N=c.pipe(I.U((function(e){return e.position})),x.x((function(e,t){return e.top===t.top})),I.U((function(e){return e.animationInProgress?R.animate:void 0})),k.O(void 0));return a.createElement(o.F.div,(0,i.__assign)({},(0,o.Sh)(R.item,N),{style:{transform:L,zIndex:M},mount:function(e){null!==e&&u.next(e)}}),r.item)}))}(r||(r={}));var E={position:"absolute",boxSizing:"border-box",width:l.u.percent(100),contain:"layout"},T={transition:"transform "+l.u.seconds(u.v4/1e3)+" linear"},R=l.u.stylesheet({item:[E],animate:[T]})},71831:(e,t,n)=>{"use strict";n.d(t,{g:()=>l});var r=n(489),i=n(73805),a=n(64909),o=n(45442),s=n(42490),c=n(77176),l=function(e,t){return o.Z.fromSideEffect((function(n){var o=n.kind===s.H.Dialogue.Action.Kind.doneClicked?function(e,t){return{kind:t.kind,unmutedCategories:(0,i.pipe)(e.state.get(),a.map((function(e){var t=e.categories;return Array.from(t.values())})),a.getOrElse((function(){return new Array})),r.filter((function(e){return!e.isMuted})),r.map((function(e){return e.id})))}}(e,n):n;s.H.Dialogue.Action.shouldCloseDialogue(o)&&t.onClose(),e.actionEvents.next(o)}),e.state.pipe(c.U(a.getOrElse((function(){return s.H.Dialogue.State.empty})))))}},17082:(e,t,n)=>{"use strict";n.d(t,{B:()=>q});var r,i,a=n(73805),o=n(51465),s=n(27378),c=n(9261);!function(e){e.close="close"}(r||(r={})),function(e){e.Static=o.UI.Grid.make((function(e){return s.createElement(c.Pj,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.notify({kind:r.close})},e.slots.content)}))}(i||(i={}));var l,u=n(42490),d=n(59312),p=n(42726),f=n(43675),m=n(22232),h=n(90351),g=n(22823),v=n(79844),y=n(39499),b=n(41439),w=n(45836),_=n(60430),C=n(77176),S=o.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return _.P.useEffectOnDidMount(n({kind:u.H.Dialogue.Action.Kind.modalOpened})),s.createElement(c.u_,{className:V.wrapper,close:n({kind:u.H.Dialogue.Action.Kind.closeClicked})},s.createElement(c.u_.Header,{className:V.modalHeader},s.createElement(s.Fragment,null,t.header),s.createElement("div",{className:V.subHeader},t.subheader)),s.createElement(c.u_.Body,{name:"mutedModalBody",className:V.modalBody},s.createElement(s.Fragment,null,t.categories)),s.createElement(c.u_.Footer,{className:V.modalFooter},s.createElement(s.Fragment,null,t.footer)))})),x=o.UI.Node.make((function(e){var t=e.view,n=e.notify,r=e.state,i=s.useContext(v.m.Context).mutedAlerts.dialogue.suggestions;return s.createElement(p.F.div,{className:V.categoryRow},s.createElement(w.XY,{className:V.categoryName},t("description")),s.createElement(w.x4,{className:V.categoryCount},(0,a.pipe)(r,C.U((function(e){return e.isMuted?i(e.alertsCount):""})))),s.createElement(p.F.div,{className:V.categoryState},(0,a.pipe)(r,C.U((function(e){return s.createElement(L,{name:"mutedAlertsOnOff_"+e.id,isOn:!e.isMuted,onClick:n({kind:u.H.Dialogue.Action.Kind.categoryClicked,categoryId:e.id,isMuted:!e.isMuted})})})))))})),A=o.UI.List.make(f.A7(),x),I=o.UI.Node.make((function(e){var t=e.view,n=e.notify;return s.createElement(p.F.Fragment,null,(0,a.pipe)(t("count"),C.U((function(e){return s.createElement(R,{count:e,key:"mutedCountInfo"})}))),s.createElement(y.zx.Primary,{name:"mutedModalDone",onClick:n({kind:u.H.Dialogue.Action.Kind.doneClicked})},"Done"))})),k=o.UI.Node.make((function(){var e=s.useContext(v.m.Context).mutedAlerts.dialogue.header;return s.createElement(w.H1,null,e)})),E=o.UI.Node.make((function(){var e=s.useContext(v.m.Context).mutedAlerts.dialogue.subHeader;return s.createElement(w.XY,null,e)})),T=o.UI.Knot.make(S,{header:k,subheader:E,categories:A,footer:I}),R=function(e){var t=e.count,n=s.useContext(v.m.Context).mutedAlerts.dialogue.footerSuggestions;return 0===t?null:s.createElement("div",{className:V.countInfo},s.createElement(b.JO.GreenOk,{className:V.okIcon,width:16}),s.createElement(w.XY,null,n(t)))},L=function(e){var t=e.isOn,n=e.name,r=e.onClick,i=s.useContext(v.m.Context).mutedAlerts.dialogue;return s.createElement(y.zx.Ghost,(0,d.__assign)({},(0,p.Sh)(V.categoryStateButton,t&&X),{name:n,onClick:r}),t?i.off:i.on)},M=(0,a.pipe)(o.UI.squash(T),o.UI.contramapState((function(e){return{categories:e.categories,footer:e}})),o.UI.mapAction((function(e){switch(e.key){case"categories":return e.action.action;case"footer":case"root":return e.action;default:(0,m.vE)(e)}}))),N={display:"flex",flexDirection:"column",minHeight:g.u.rem(23),maxHeight:g.u.rem(33),width:g.u.rem(36),backgroundColor:h.Il.CoreNeutral0,textAlign:"left"},F={padding:"0 "+g.u.rem(2)+" "+g.u.rem(1)+" "+g.u.rem(2)},P={marginBottom:0,paddingBottom:0,backgroundColor:h.Il.CoreNeutral0,flexShrink:0},O={marginTop:g.u.rem(.5625),paddingBottom:g.u.rem(.6875),borderBottom:"1px solid "+h.Il.CoreNeutral20},B={minHeight:g.u.rem(4)},D={display:"flex",color:h.Il.CoreNeutral90,alignItems:"center",flex:1,justifyContent:"flex-start"},W={marginLeft:g.u.rem(-.5)},H={display:"flex",padding:g.u.rem(.75)+" 0",alignItems:"center",$nest:{"&:not(:first-of-type)":{borderTop:"1px solid "+h.Il.CoreNeutral20}}},U={display:"flex",paddingRight:g.u.rem(.25),width:g.u.rem(12.25),color:h.Il.CoreNeutral90,fontWeight:600,lineHeight:g.u.rem(1.3125),justifyContent:"flex-start"},z={display:"flex",paddingRight:g.u.rem(.25),width:g.u.rem(12.25),color:h.Il.CoreNeutral50,lineHeight:g.u.rem(1.3125),justifyContent:"flex-start"},X="isOn",G={marginTop:g.u.rem(-.25),marginBottom:g.u.rem(-.25),color:h.Il.CoreBlue50,textTransform:"none",letterSpacing:0,fontWeight:600,fontSize:g.u.rem(h.xv.BodySize),$nest:(l={"&[data-textpos=everywhere]":{paddingRight:g.u.rem(.5),paddingLeft:g.u.rem(.5)}},l["&."+X]={color:h.Il.CoreRed50},l)},V=g.u.stylesheet({wrapper:[N],modalBody:[F],modalHeader:[P],subHeader:[O],modalFooter:[B],countInfo:[D],okIcon:[W],categoryRow:[H],categoryName:[U],categoryCount:[z],categoryState:[{display:"flex",justifyContent:"flex-end"}],categoryStateButton:[G]}),Y={kind:u.H.Dialogue.Action.Kind.closeClicked},q=(0,a.pipe)(o.UI.Knot.make(i.Static,{content:M}),o.UI.squash,o.UI.contramapState((function(e){return{content:e}})),o.UI.mapAction((function(e){var t=e.action;return t.kind===r.close?Y:t})))},93162:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r,i=n(27378),a=n(42726),o=n(90351),s=n(51465),c=n(22823),l=n(13097),u=n(79844),d=n(39499),p=n(32577),f=n(41439),m=n(77176);!function(e){var t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=s.UI.Node.make((function(e){var n=e.state,r=e.notify,o=i.useContext(u.m.Context).priorityLens,s=a.hg.create(!1);return i.createElement(a.F.Fragment,null,n.pipe(m.U((function(e){var n=e.allAlertsCount,c=e.priorityAlertsCount,l="priority"===e.selectedLens,u=l?c:n;return i.createElement(p.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:k.dropdownContainer,dropdownList:k.dropdownContent},onVisibilityChange:function(e){return s.set(e)},label:i.createElement(a.F.Fragment,null,s.pipe(m.U((function(e){return i.createElement("div",{className:e?k.labelOpened:k.labelClosed},l?o.prioritySuggestion:o.allSuggestion,u>0&&i.createElement("span",{className:k.alertCount}," ","· ",u," "),i.createElement(f.JO.Arrow,{direction:e?f.n4.up:f.n4.down,className:k.labelArrow}))}))))},i.createElement(d.zx.Flat,{name:"priorityAlerts",className:l?k.boldLensButton:k.lensButton,onClick:r(t.switchToPriority)},i.createElement(f.JO.Star,{width:12}),o.prioritySuggestion,l?i.createElement(f.JO.Yes,{className:k.checkMarkIcon}):null),l&&c===n?i.createElement("div",{className:k.disabledLensButton},i.createElement(f.JO.Formatting.BulletList,{width:21}),o.disabledAllSuggestion):i.createElement(d.zx.Flat,{name:"allAlerts",className:l?k.lensButton:k.boldLensButton,onClick:r(t.switchToAll)},i.createElement(f.JO.Formatting.BulletList,{width:21}),o.allSuggestion,l?null:i.createElement(f.JO.Yes,{className:k.checkMarkIcon})),i.createElement("div",{className:k.separator}),i.createElement("div",{className:k.description},i.createElement(f.JO.Info,{className:k.descriptionIcon}),i.createElement("div",null,o.description)))}))))}))}(r||(r={}));var h={display:"flex",width:c.u.rem(16)},g={zIndex:l.FY,marginTop:0,fontSize:c.u.rem(.875),lineHeight:c.u.rem(1.3125)},v={display:"flex",boxSizing:"border-box",padding:c.u.rem(.1875)+" "+c.u.rem(.25)+" "+c.u.rem(.1875)+" "+c.u.rem(.25),height:c.u.rem(1.5),borderRadius:c.u.rem(l.fx),color:o.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:c.u.rem(.025),fontSize:c.u.rem(.625),lineHeight:c.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:o.Il.CoreNeutral20}}},y={backgroundColor:o.Il.CoreNeutral10},b={color:o.Il.CoreNeutral50,whiteSpace:"pre"},w={minWidth:c.u.rem(1),minHeight:c.u.rem(1),marginLeft:c.u.rem(.5625)},_={padding:"0 "+c.u.rem(.5),color:o.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},C={display:"flex",padding:"0 "+c.u.rem(.5),height:c.u.rem(2),color:o.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},S={margin:c.u.rem(.5)+" "+c.u.rem(1),width:"calc(100% - "+c.u.rem(2)+")",height:c.u.px(1),backgroundColor:o.Il.CoreNeutral20},x={display:"flex",padding:"0 "+c.u.rem(.5)+" "+c.u.rem(.5)+" "+c.u.rem(.5),fontSize:c.u.rem(.75),lineHeight:c.u.rem(1.125),alignItems:"center"},A={marginBottom:"auto",minHeight:c.u.rem(1.25)},I={color:o.Il.CoreBlue60,cursor:"pointer"},k=c.u.stylesheet({dropdownContainer:[h],dropdownContent:[g],labelClosed:[v],labelOpened:[v,y],alertCount:[b],labelArrow:[w],lensButton:[_],disabledLensButton:[C],boldLensButton:[_,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[S],description:[x],descriptionIcon:[A],descriptionLink:[I]})},51100:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r,i,a=n(27378),o=n(42726),s=n(51465),c=n(9261),l=n(59312),u=n(73805),d=n(64909),p=n(94503),f=n(79844),m=n(39499),h=n(34095),g=n(16323),v=n(45836),y=n(90351),b=n(22823),w=n(71031),_=n(13097),C=n(41439),S=function(e){var t=e.upgradeAction,n=e.size,r=e.title,i=e.className,s=r||a.useContext(f.m.Context).goPremium;return a.createElement(m.zx,(0,l.__assign)({name:"upgrade"},(0,o.Sh)(i,"big"===n?O.baseBig:"link"===n?O.link:O.baseSmall),{onClick:t}),"link"===n?a.createElement(C.JO.PaidLink,{width:14,className:O.linkIcon}):a.createElement(C.JO.Paid,{className:"big"===n?O.bigIcon:O.icon}),s)},x={background:y.Il.CoreGreen60,borderRadius:b.u.rem(_.fx),boxShadow:"0 2px 5px "+b.u.color(w.UE).fade(.35).toRGBA().toString(),color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:b.u.rem(_.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:b.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:b.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},A={padding:"0 "+b.u.rem(3)+" 0 "+b.u.rem(2),fontSize:b.u.rem(.8125),lineHeight:b.u.rem(3)},I={padding:"0 "+b.u.rem(2)+" 0 "+b.u.rem(.5),fontSize:b.u.rem(.6875),lineHeight:b.u.rem(2)},k={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:b.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:b.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:"0 "+b.u.rem(3)+" 0 "+b.u.rem(2),fontSize:b.u.rem(.8125),lineHeight:b.u.rem(3)},T={padding:"0 "+b.u.rem(2)+" 0 "+b.u.rem(.5),fontSize:b.u.rem(.6875),lineHeight:b.u.rem(2)},R={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},L={marginRight:b.u.rem(.2)},M={color:y.Il.CoreGreen60,fontSize:b.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},N={color:y.Il.CoreGreen60},F={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},P={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},O=b.u.stylesheet({base:[x],baseBig:[x,A],baseSmall:[x,I],baseUpHookRedesign:[x,k],baseBigUpHookRedesign:[A,k,E],baseSmallUpHookRedesign:[I,k,T],icon:[R],bigIcon:[R,L],link:[M],linkUpHookRedesign:[M,N],linkIconUpHookRedesign:[F],linkIcon:[P]}),B=n(60430),D=n(2834),W=n(45980),H=.8125,U={display:"flex",flexDirection:"column",maxHeight:"90vh",width:b.u.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},z={padding:b.u.rem(1.125)+" "+b.u.rem(2)+" "+b.u.rem(1),paddingBottom:b.u.rem(1)},X={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:"calc(100% - "+b.u.rem(4)+")",height:b.u.px(1),background:y.Il.CoreNeutral20,content:"''"}}},G={display:"block",margin:b.u.rem(H)+" 0",color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:b.u.rem(1.5)},V={minHeight:b.u.rem(4)},Y={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:b.u.rem(1.25),borderBottom:"1px solid "+y.Il.CoreNeutral20}}},q="setGoalsToneButton",$={marginBottom:b.u.rem(-.5),maxWidth:b.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:(r={},r["& > ."+q]={margin:"0 0 "+b.u.rem(.5),marginLeft:b.u.important(0),$nest:{"&:not(:last-child)":{marginRight:b.u.rem(.5)}}},r)},j={width:b.u.rem(7),textTransform:"capitalize",lineHeight:b.u.rem(2)},Z={marginTop:b.u.rem(H)},J={margin:"0 0 "+b.u.rem(1.5)+" "+b.u.rem(7)},K={margin:"0 0 "+b.u.rem(1.5)+" "+b.u.rem(7)},Q={display:"flex",width:b.u.percent(100),justifyContent:"space-between"},ee={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:b.u.rem(.8125)},te=b.u.stylesheet({wrapper:[U],modalBody:[z],modalHeader:[X],itemDescription:[G],modalFooter:[V],row:[Y],toneButtons:[$],rowHeader:[j],extraContent:[Z],title:[J],description:[K],image:[{position:"absolute"}],footerWrapper:[Q],checkboxText:[ee]}),ne=function(e){var t=e.name,n=e.items,r=e.sticky,i=e.theme,o=void 0===i?{}:i,s=e.extraContent,c=e.children;return a.createElement("div",{className:te.row},a.createElement("div",null,a.createElement(v.H3,{className:te.rowHeader},t),s),a.createElement("div",null,a.createElement(m.zx.Group,{sticky:r,className:o.buttonsGroup},n.map((function(e){return a.createElement(m.zx.White,(0,l.__assign)({className:o.button,name:"context-"+t+"-"+e.key},e))}))),a.createElement(v.x4,{className:te.itemDescription},c)))},re=function(e){var t=e.items,n=e.current,r=e.shouldDisable,i=e.itemTitle,a=void 0===i?W.identity:i;return{sticky:!0,items:t.map((function(e){return{key:e,active:n.view((function(t){return t===e})),onClick:function(){return n.set(e)},disabled:r&&r(e),children:a(e)}}))}},ie=function(e,t){var n=e.items,r=e.current;return{items:n.map((function(e){return{key:e,active:r.view((function(t){return(0,u.pipe)(t,d.exists((function(t){return t.has(e)})))})),onClick:function(){return r.modify((function(t){var n=(0,u.pipe)(t,d.fold((function(){return new Set}),(function(e){return new Set(e)})));return n.has(e)?n.delete(e):n.add(e),d.some(n)}))},children:t(e)}}))}},ae=function(e){var t=e.blocks,n=e.features,r=e.showOnLoad,i=e.close,o=e.upgrade,s=e.reset,l=e.showOnLoadChanged,u=a.useContext(p.a.Context);return a.createElement(c.u_,{className:te.wrapper},a.createElement(c.u_.Header,{className:te.modalHeader},a.createElement(se,null)),a.createElement(c.u_.Body,{name:"goalsBody",className:te.modalBody},a.createElement(oe,{features:n,upgradeAction:o,blocks:t})),a.createElement(c.u_.Footer,{className:te.modalFooter},a.createElement(ce,{supportsSetGoalsLoader:!n.demoMode&&u.has(p.a.Flag.supportsSetGoalsLoader),onDone:i,reset:s,showOnLoad:r,showOnLoadChanged:l})))},oe=function(e){var t=e.blocks,n=e.features,r=e.upgradeAction,i=a.useContext(f.m.Context).goals,s=t.audience,c=t.formality,p=t.domain,m=t.tone,h=t.intent;return a.createElement(a.Fragment,null,a.createElement(ne,(0,l.__assign)({name:"audience"},re(s)),s.current.view((function(e){return e&&i.sections.audience[e]((0,u.pipe)(t.audience.default,d.exists((function(t){return t===e}))))}))),a.createElement(ne,(0,l.__assign)({name:"formality"},re(c)),c.current.view((function(e){return e?i.sections.formality[e]:""}))),a.createElement(ne,(0,l.__assign)({name:"domain"},re((0,l.__assign)((0,l.__assign)({},p),{itemTitle:function(e){return"mail"===e?"email":e}})),{extraContent:a.createElement(o.F.div,{className:te.extraContent},n.isFree?a.createElement(S,{size:"link",upgradeAction:r}):null)}),p.current.view((function(e){return n.isFree?i.sections.domain.free:e?i.sections.domain[e]:""}))),a.createElement(ne,(0,l.__assign)({name:"tone",theme:{buttonsGroup:te.toneButtons,button:q}},ie(m,(function(e){return a.createElement(g.d,{key:e},i.sections.tone.options[e])}))),i.sections.tone.experimental),a.createElement(ne,(0,l.__assign)({name:"intent"},ie(h,(function(e){return i.sections.intent.options[e]}))),i.sections.intent.experimental))},se=function(){var e=a.useContext(f.m.Context).goals;return a.createElement(a.Fragment,null,a.createElement(le,null),a.createElement(v.H1,{className:te.title},e.title),a.createElement(v.XY,{className:te.description},e.header))},ce=function(e){var t=e.supportsSetGoalsLoader,n=e.showOnLoad,r=e.showOnLoadChanged,i=e.reset,s=e.onDone,c=a.useContext(f.m.Context).goals,u=o.hg.create(n);return B.P.useSubscriptionTo(u.pipe(D.b(r))),a.createElement("div",(0,l.__assign)({},(0,o.Sh)(t&&te.footerWrapper)),t&&a.createElement(h.Ys,{checked:u,name:"set-goals"},a.createElement(v.x4,{className:te.checkboxText},c.footer.showModalOnStart)),a.createElement(m.zx.Group,null,a.createElement(m.zx.Ghost,{name:"reset",onClick:i},c.footer.reset),a.createElement(m.zx.Primary,{name:"closeSetContext",onClick:s},c.footer.done)))},le=function(){return a.createElement("svg",{className:te.image,width:"69",height:"80",viewBox:"0 0 69 80"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),a.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),a.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),a.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),a.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),a.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})))},ue=n(50628),de=n(77176);!function(e){var t;e.Modal=s.UI.Node.make((function(e){var n=e.state,r=e.notify;return B.P.useSubscriptionTo(n.pipe(ue.P(),D.b((function(e){return r({kind:t.open,source:e.source})()})))),a.createElement(o.F.Fragment,null,n.pipe(de.U((function(e){var n=r({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return a.createElement(c.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n},a.createElement(ae,{blocks:e.blocks,features:e.features,close:n,upgrade:r({kind:t.upgrade}),reset:r({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:function(e){return r({kind:t.showOnLoadChanged,value:e})()}}))}))))})),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(i||(i={}))},20403:(e,t,n)=>{"use strict";n.d(t,{q:()=>K});var r,i=n(27378),a=n(42726),o=n(22232),s=n(51465),c=n(79844),l=n(87325),u=n(39499),d=n(9261),p=function(){return i.createElement("svg",{width:"128",height:"177"},i.createElement("defs",null,i.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),i.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),i.createElement("mask",{id:"b",fill:"#fff"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),i.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),i.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),i.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),i.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},f=n(54071),m=n(45836),h=n(77176),g=n(59312),v=n(76024);!function(e){function t(e,t){var n=t/60,r=v.nH(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(r||(r={}));var y=n(18208),b=n(64909),w=n(90351),_=n(22823),C=n(71031),S=n(13097),x=n(41439),A=n(73805),I=n(2844),k=n(66310),E=n(93508),T=n(16118),R=n(76974),L=n(13444),M=function(e){var t=e.score,n=e.documentIsEmpty,r=e.sidebarOpen,o=void 0===r?a.hg.create(!0):r,s=e.successIcon,c=e.progressIcon,l=e.zeroIcon,u=void 0===l?null:l,d=t.pipe(h.U(b.map((function(e){return e.rank})))),p=I.aj(t,n,(function(e,t){return(0,A.pipe)(e,b.fold((function(){return!1}),(function(e){return 100===e.rank&&!t})))})),f=o.pipe(k.w((function(e){return e?d.pipe(E.O(b.none),T.G(),k.w((function(e){var t=e[0],n=e[1];return(0,A.pipe)(n,b.fold((function(){return R.of(u)}),(function(e){return p.pipe(E.O(!1),T.G(),k.w((function(n){var r=n[0];return n[1]?R.of(s):(0,A.pipe)(t,b.filter((function(){return!r})),b.fold((function(){return R.of(c(e)).pipe(L.g(1),E.O(c(0)))}),(function(){return R.of(c(e))})))})))})))}))):R.of(null)})),E.O(null));return i.createElement(a.F.Fragment,null,f)},N=n(52479);function F(e){var t=e.value,n=e.className,r=e.leftCustomClass,o=e.rightCustomClass,s=a.hg.create(!1);requestAnimationFrame((function(){return requestAnimationFrame((function(){return s.set(!0)}))}));var c=I.aj(N.Dx(t),s,(function(e,t){return t?Math.max(5,Math.abs(e-50))+"%":0})),l=function(e,t,n){return N.Dx(e).pipe(h.U((function(e){return e<50?t:n})))};return i.createElement(a.F.div,(0,g.__assign)({},(0,a.Sh)(function(e){return N.Dx(e).pipe(h.U((function(e){return e<50?H.leftSideWrapper:H.rightSideWrapper})))}(t),n)),i.createElement(a.F.div,(0,g.__assign)({},(0,a.Sh)(l(t,H.leftSideProgress,H.rightSideProgress),r&&o&&l(t,r,o)),{style:{width:c}})))}!function(e){e.Label=function(e){var t=e.value,n=e.className,r=i.useContext(c.m.Context).performance,a=t>66?r.aboveAverage:t>50?r.average:r.belowAverage;return i.createElement(m.x4,{className:n},a)}}(F||(F={}));var P,O={position:"relative",zIndex:1,display:"flex",width:_.u.percent(100),height:_.u.rem(.25),borderRadius:_.u.rem(S.fx)},B={height:_.u.percent(100),backgroundColor:C.FW,transition:"width .8s ease-in-out 0s"},D={marginRight:_.u.percent(50),borderTopLeftRadius:_.u.rem(.25),borderBottomLeftRadius:_.u.rem(.25)},W={marginLeft:_.u.percent(50),borderTopRightRadius:_.u.rem(.25),borderBottomRightRadius:_.u.rem(.25)},H=_.u.stylesheet({wrapper:[O],leftSideWrapper:[O,{justifyContent:"flex-end"}],rightSideWrapper:[O,{justifyContent:"flex-start"}],progress:[B],leftSideProgress:[B,D],rightSideProgress:[B,W]}),U=n(63979),z={display:"flex",flexDirection:"column",maxHeight:"90vh",width:_.u.rem(32),height:_.u.rem(41),background:w.Il.CoreNeutral0},X={padding:_.u.rem(2.75)+" "+_.u.rem(1)+" 0 "+_.u.rem(2),minHeight:_.u.rem(5.1),height:_.u.rem(5.1),backgroundColor:w.Il.CoreNeutral0},G={marginRight:_.u.rem(1),paddingBottom:_.u.rem(.3),borderBottom:"1px solid "+C.xO},V={padding:"0 "+_.u.rem(1)+" "+_.u.rem(1)+" "+_.u.rem(2)},Y={padding:"0 "+_.u.rem(1.9),minHeight:_.u.rem(4),height:_.u.rem(4)},q={position:"absolute",top:_.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},$={display:"flex",flexDirection:"column",marginTop:_.u.rem(7.15),marginBottom:_.u.rem(2),paddingRight:_.u.rem(1),alignItems:"center"},j={wordSpacing:_.u.rem(.05),fontSize:_.u.rem(.875),lineHeight:_.u.rem(1.5)},Z={padding:_.u.rem(1.3)+" "+_.u.rem(2.6),textAlign:"center"},J=_.u.prefixedStylesheet("statistics",{wrapper:[z],modalHeader:[X],modalHeaderUnderline:[G],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[V],modalFooter:[Y],loader:[q],zeroStateContainer:[$],performanceText:[j],zeroStateText:[j,Z]});!function(e){e.number="number",e.time="time",e.percentage="percentage"}(P||(P={}));var K,Q=function(e){switch(e){case P.number:case P.percentage:return Ie.numberRowData;case P.time:return Ie.timeRowData;default:return(0,o.vE)(e)}},ee=function(e){var t=e.type,n=e.value,r=e.info,a=e.children,s=e.dataName;return i.createElement("div",{className:Ie.row,"data-name":s},i.createElement("div",{className:Q(t)},i.createElement("div",{className:Ie.metricTitle},a),i.createElement("div",{className:Ie.metric},function(e,t){switch(e){case P.number:return(Math.round(10*t)/10).toLocaleString();case P.time:return v.g2(t);case P.percentage:return Math.round(t)+"%";default:return(0,o.vE)(e)}}(t,n))),r&&i.createElement(u.RZ,{title:r}))},te=function(e){var t=e.state,n=i.useContext(c.m.Context).performance,o=t.stats,s=t.score,l=t.documentIsEmpty;return i.createElement(i.Fragment,null,i.createElement("section",{className:Ie.titleSection},i.createElement("div",{className:Ie.titleColumns},i.createElement(a.F.div,(0,g.__assign)({},(0,a.Sh)(J.performanceText,Ie.headerDescription)),100===s.rank?n.score100:n.scoreUnder100(s.rank)),i.createElement(M,{score:R.of(b.some(s)),documentIsEmpty:R.of(l),successIcon:i.createElement(x.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:Ie.checkmark}),progressIcon:function(e){return i.createElement(U.P,{key:"modal-performance-progress",colorType:U.P.ColorType.royalBlue,fontSize:U.P.FontSize.small,percentage:e,theme:ke})}}))),i.createElement("section",{className:Ie.wordCountSection},i.createElement(m.H2,{className:Ie.sectionHeaderUnderline},n.wordCount),i.createElement("div",{className:Ie.wordCountColumns},i.createElement("div",{className:Ie.firstColumn},i.createElement(ee,{type:P.number,value:Math.max(o.chars-1,0)},n.characters),i.createElement(ee,{type:P.number,value:o.words},n.words),i.createElement(ee,{type:P.number,value:o.sentences},y._6(o.sentences,n.sentence,n.sentences))),i.createElement("div",{className:Ie.secondColumn},i.createElement(ee,{type:P.time,value:r.calculateReadingTime(o.words)},n.readingTime),i.createElement(ee,{type:P.time,value:r.calculateSpeakingTime(o.words)},n.speakingTime)))),i.createElement("section",{className:Ie.readabilitySection},i.createElement("div",{className:Ie.sectionHeaderWrapper},i.createElement(m.H2,null,n.readability),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:Ie.readabilityColumns},i.createElement("div",{className:Ie.firstColumn},i.createElement(ee,{type:P.number,value:o.wordLength},n.wordLengthTitle),i.createElement(ee,{type:P.number,value:o.sentenceLength},n.sentenceLengthTitle),i.createElement(ee,{type:P.number,value:o.readabilityScore,info:n.readabilityDescription,dataName:"readability"},n.readabilityScore)),i.createElement("div",{className:Ie.secondColumn},i.createElement("div",{className:Ie.row},i.createElement(F,{value:o.wordLengthIndex,className:Ie.progressBar,leftCustomClass:Ie.leftProgress,rightCustomClass:Ie.rightProgress}),i.createElement(F.Label,{value:o.wordLengthIndex,className:Ie.progressLabel})),i.createElement("div",{className:Ie.row},i.createElement(F,{value:o.sentenceLengthIndex,className:Ie.progressBar,leftCustomClass:Ie.leftProgress,rightCustomClass:Ie.rightProgress}),i.createElement(F.Label,{value:o.sentenceLengthIndex,className:Ie.progressLabel})),i.createElement("div",{className:Ie.verticalPillar}))),i.createElement(m.CL,{className:Ie.readabilityDescr},o.readabilityDescription)),i.createElement("section",null,i.createElement("div",{className:Ie.sectionHeaderWrapper},i.createElement(m.H2,null,n.vocabulary),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:Ie.vocabularyColumns},i.createElement("div",{className:Ie.firstColumn},i.createElement(ee,{type:P.percentage,value:o.uniqueWords,info:n.uniqueWords},n.uniqueWordsTitle),i.createElement(ee,{type:P.percentage,value:o.rareWords,info:n.rareWords},n.rareWordsTitle)),i.createElement("div",{className:Ie.secondColumn},i.createElement("div",{className:Ie.row},i.createElement(F,{value:o.uniqueWords,className:Ie.progressBar,leftCustomClass:Ie.leftProgress,rightCustomClass:Ie.rightProgress}),i.createElement(F.Label,{value:o.uniqueWords,className:Ie.progressLabel})),i.createElement("div",{className:Ie.row},i.createElement(F,{value:o.rareWords,className:Ie.progressBar,leftCustomClass:Ie.leftProgress,rightCustomClass:Ie.rightProgress}),i.createElement(F.Label,{value:o.rareWords,className:Ie.progressLabel})),i.createElement("div",{className:Ie.verticalPillar})))))},ne={marginBottom:_.u.rem(2.4)},re={display:"flex",marginTop:_.u.rem(.9),marginRight:_.u.rem(1),justifyContent:"space-between"},ie={marginBottom:_.u.rem(1.5)},ae={display:"flex",marginTop:_.u.rem(.8)},oe={marginBottom:_.u.rem(2.4)},se={display:"flex",marginTop:_.u.rem(.8)},ce={display:"flex",marginTop:_.u.rem(.8)},le={flexBasis:_.u.percent(50)},ue={position:"relative",paddingLeft:_.u.rem(.5),flexBasis:_.u.percent(50)},de={display:"flex",height:_.u.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},fe={width:_.u.rem(10),fontFeatureSettings:S.Q9+", "+S.g_},me={width:_.u.rem(13)},he={marginRight:_.u.rem(1),paddingBottom:_.u.rem(.5),borderBottom:"1px solid "+C.xO},ge={width:_.u.percent(80),whiteSpace:"pre-line"},ve={display:"inline-block",color:w.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:_.u.rem(.875),lineHeight:_.u.rem(2)},ye={display:"inline-block",color:w.Il.CoreNeutral90,fontSize:_.u.rem(.875),lineHeight:_.u.rem(2)},be={width:_.u.rem(3.2),height:_.u.rem(3.2),fontWeight:"bold"},we={width:_.u.rem(6),backgroundColor:C.xO},_e={marginLeft:_.u.rem(1.125)},Ce={backgroundImage:C.BZ},Se={backgroundImage:C.Xd},xe={display:"block",paddingTop:_.u.rem(.5)},Ae={position:"absolute",top:_.u.rem(.5),left:_.u.rem(3.5),width:_.u.rem(.0625),height:_.u.rem(3),backgroundColor:C.jj},Ie=_.u.stylesheet({titleSection:[ne],titleColumns:[re],wordCountSection:[ie],wordCountColumns:[ae],readabilitySection:[oe],readabilityColumns:[se],vocabularyColumns:[ce],firstColumn:[le],secondColumn:[ue],row:[de],rowData:[pe],numberRowData:[pe,fe],timeRowData:[pe,me],sectionHeaderUnderline:[he],sectionHeaderWrapper:[he,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ge],metric:[ve],metricTitle:[ye],checkmark:[{alignItems:"center"}],circleProgressBar:[be],progressBar:[we],progressLabel:[_e],leftProgress:[Ce],rightProgress:[Se],readabilityDescr:[xe],verticalPillar:[Ae]}),ke={radialProgressBar:Ie.circleProgressBar};!function(e){var t;e.ModalView=s.UI.Grid.make((function(n){var r=n.slots,a=n.state,o=(0,n.notify)({kind:t.close});return i.createElement(d.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:o},i.createElement(e.ModalContent,{state:a,downloadButton:r.downloadButton,onClose:o}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=function(t){var n=t.state,r=t.downloadButton,a=t.onClose;return i.createElement(d.u_,{className:J.wrapper},i.createElement(d.u_.Header,{className:J.modalHeader},i.createElement(e.Header,{state:n})),i.createElement(d.u_.Body,{name:"performanceBody",className:J.modalBody,wrapperClassName:n.pipe(h.U((function(e){return e.type===l.g.State.Type.EMPTY?J.modalEmpty:J.modalReady})))},i.createElement(e.Body,{state:n})),i.createElement(d.u_.Footer,{className:J.modalFooter},i.createElement(g,{downloadButton:r,onClose:a})))};var n=function(){var e=i.useContext(c.m.Context);return i.createElement("div",{className:J.zeroStateContainer},i.createElement(p,null),i.createElement("div",{className:J.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=function(e){var t=e.state,n=i.useContext(c.m.Context);return i.createElement(a.F.Fragment,null,t.pipe(h.U((function(e){return i.createElement(m.H2,{key:"statisticsHeader",className:e.type===l.g.State.Type.READY?J.modalHeaderUnderline:""},n.performance.title)}))))};var r=function(){return i.createElement(f.$,{size:64,className:J.loader,variation:"blue"})};e.Body=function(e){var t=e.state;return i.createElement(a.F.Fragment,null,t.pipe(h.U((function(e){switch(e.type){case l.g.State.Type.EMPTY:return null;case l.g.State.Type.LOADING:case l.g.State.Type.ERROR:return i.createElement(r,{key:"statisticsLoading"});case l.g.State.Type.SHORT_CONTENT:return i.createElement(n,{key:"statisticsEmpty"});case l.g.State.Type.READY:return i.createElement(te,{key:"statisticsContent",state:e});default:return(0,o.vE)(e)}}))))};var g=function(e){var t=e.downloadButton,n=e.onClose;return i.createElement(i.Fragment,null,t,i.createElement(u.zx.Primary,{name:"close-stats",onClick:n},"Close"))}}(K||(K={}))},52268:(e,t,n)=>{"use strict";n.d(t,{wK:()=>f,JT:()=>m,hM:()=>h});var r=n(73805),i=n(64909),a=n(8125),o=n(22232),s=n(88903),c=n(45442),l=n(15228),u=n(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case l.g.SuccessType.applied:case l.g.SuccessType.large:return"growComplete";default:return"growStart"}}function f(e,t,n){return function(){return e.pipe(u.U((function(e){var r=function(e,t,n){var r=t.successLens;switch(e){case l.g.SuccessType.zero:return r.emptyText;case l.g.SuccessType.small:return r.smallText;case l.g.SuccessType.large:return r.largeText;case l.g.SuccessType.applied:return n?r.fixedTextDemoPremiumUpHook:{title:r.fixedText.titles[(0,a.TN)(9)]};default:return(0,o.vE)(e)}}(e,n,t);return{kind:p(e),caption:i.some(d(r))}})))}}function m(e){return function(){return e.pipe(u.U((function(e){return{kind:p(e),caption:i.none}})))}}function h(e){return c.Z.animatingFlow(e,(function(e){return(0,r.pipe)(e,i.fold((function(){return i.some(s.right("fadein"))}),(function(){return i.some(s.both("fadeout","fadein"))})))}))}},56157:(e,t,n)=>{"use strict";n.d(t,{q:()=>T});var r=n(27378),i=n(73805),a=n(42726),o=n(83078),s=n(90351),c=n(51465),l=n(22823),u=n(45836),d=n(77176),p=c.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"}))))})),f=c.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"}))})),m=c.UI.Node.make((function(e){var t=e.view;return r.createElement("div",{"data-name":"success-lens-text",className:k.newSuccessText},r.createElement(u.H4,{key:"title"},t("title")),r.createElement("div",{className:k.newSuccessDescription},r.createElement(a.F.div,{className:k.newSuccessDescriptionText},(0,i.pipe)(t("firstLine"),d.U(o.QP)))))})),h=c.UI.Union.asOption(m),g=c.UI.Grid.make((function(e){var t=e.slots;return r.createElement(a.F.div,{className:k.newSuccessContainer},t.image,t.caption)})),v=c.UI.Knot.make(g,{image:p,caption:h}),y=c.UI.Knot.make(g,{image:f,caption:h}),b=c.UI.Union.make("kind",{growStart:v,growComplete:y}),w=l.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),_=l.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),C={animation:w+" 300ms linear forwards"},S={position:"absolute",top:0,width:l.u.percent(100),animation:_+" 200ms linear forwards"},x={width:l.u.percent(100),marginTop:l.u.rem(.5)},A={marginTop:l.u.rem(.25)},I={fontSize:l.u.rem(s.xv.NewSuccessDescriptionSize),color:s.Il.CoreNeutral50,letterSpacing:s.xv.NewSuccessDescriptionLetterSpacing,lineHeight:l.u.rem(s.xv.NewSuccessDescriptionLineHeight),fontWeight:s.xv.NewSuccessDescriptionWeight},k=l.u.stylesheet({success_fadein:[C],success_fadeout:[S],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[x],newSuccessDescription:[A],newSuccessDescriptionText:[I]}),E=c.UI.Transition.make({fadein:k.success_fadein},{fadeout:k.success_fadeout}),T=c.UI.Animated.make(E,b)},45440:(e,t,n)=>{"use strict";n.d(t,{r:()=>v});var r,i=n(27378),a=n(73805),o=n(64909),s=n(51465),c=n(22823),l=n(79176),u=n(79844),d=n(41439),p=n(45836),f=s.UI.Grid.make((function(e){var t=e.slots;return i.createElement("div",{className:_.grid},i.createElement("div",{className:_.iconWrapper},t.icon),i.createElement("div",{className:_.titleWrapper},t.title),i.createElement("div",{className:_.bottomWrapper},t.bottom))})),m=s.UI.Node.make((function(){var e=i.useContext(u.m.Context).successLens.paidView;return i.createElement(p.H4,null,e.title)})),h=s.UI.Node.make((function(){return i.createElement(d.JO.GreenOk,{width:32})})),g=s.UI.Knot.make(f,{icon:h,title:m,bottom:s.UI.Union.make("kind",(r={},r[l.n.State.hidden]=s.UI.Node.empty,r[l.n.State.expanded]=l.n.TogglableExpandedPanel,r))}),v=(0,a.pipe)(s.UI.squash(g),s.UI.contramapState((function(e){return(0,a.pipe)(e,o.fold((function(){return{bottom:{kind:l.n.State.hidden}}}),(function(e){return{bottom:{kind:l.n.State.expanded,showCloseButton:!1,alertsState:e}}})))}))),y={marginTop:c.u.rem(3.5)},b={marginTop:c.u.rem(1.375)},w={marginTop:c.u.rem(2.675)},_=c.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[b],bottomWrapper:[w]})},79126:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var r=n(45980),i=n(64909),a=n(22232),o=n(77176),s=n(66265),c=n(93508),l=n(66310),u=n(79176);function d(e){return(0,r.flow)(o.U((function(e){switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,a.vE)(e.action)}case u.n.State.minimized:switch(e.action.action){case"onClick":return i.some(u.n.State.expanded);default:return(0,a.vE)(e.action.action)}default:return(0,a.vE)(e)}})),s.oA,c.O(u.n.State.minimized),l.w((function(t){return e.pipe(o.U(i.fold((function(){return{kind:u.n.State.hidden}}),(function(e){switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,a.vE)(t)}}))))})))}},79176:(e,t,n)=>{"use strict";n.d(t,{n:()=>Te});var r,i,a,o,s,c,l,u,d,p,f=n(51465),m=n(27378),h=n(73805),g=n(42726),v=n(22232),y=n(64909),b=n(79844),w=n(39499),_=n(59312),C=n(19962),S=n(90351),x=n(22823),A=n(71031),I=n(94503),k=n(41439),E=n(54071),T=n(14611),R=n(52479),L=n(58199),M=n(77176),N=n(57091),F=n(93508);!function(e){function t(e){return 0===e?"":e>=1e3?Math.min(Math.trunc(e/1e3),9)+"k+":String(e)}var n=function(e){var t=e.className,n=e.isChecking,r=e.type,i=e.animateFade,a=void 0===i||i,o=T.f.fadeOutState(n),s=o.state,c=o.complete,l="checking-complete";return m.createElement(g.F.div,(0,_.__assign)({},(0,g.Sh)(oe.loader,t),{role:"loader"}),a?s.pipe(M.U((function(e){return"end"===e?m.createElement("div",{key:"checking-complete",className:l}):m.createElement(E.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?oe.fadeOut:void 0,onTransitionEnd:c})}))):n.pipe(M.U((function(e){return e?m.createElement(E.$,{variation:r,size:"100%"}):m.createElement("div",{className:l})}))))},r=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,c=e.suffix,l=void 0===c?"":c,u=m.useContext(I.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,g.Sh)(oe.roundCounter,R.ab(s,E.$.getClassName(oe)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 32",className:oe.circular},m.createElement("g",null,m.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),m.createElement("text",(0,_.__assign)({x:"16",y:"17"},C.h5(u.has(I.a.Flag.supportsSVGDominantBaseline)),{fontSize:a>=100?14:18,"data-name":n},(0,g.Sh)(G,i.counterContent)),t(a),l))))},i=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,c=e.suffix,l=void 0===c?"":c,u=m.useContext(I.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,g.Sh)(oe.ovalCounter,R.ab(s,E.$.getClassName(oe)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 20",className:oe.circular},m.createElement("rect",{width:"32",height:"20",rx:"10"}),m.createElement("text",(0,_.__assign)({x:"16",y:"10.5"},C.h5(u.has(I.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":n},(0,g.Sh)(G,i.counterContent)),t(a),l)))};e.Counter=function(e){var t=e.theme,n=void 0===t?{}:t,a=e.count,o=e.type,s=void 0===o?"white":o,c=a>=100?i:r;return m.createElement(c,{theme:(0,_.__assign)((0,_.__assign)({},n),{counterWrapper:(0,g.Sh)(n.counterWrapper,oe.flexCounter).className}),count:a,type:s})},e.OutcomeCounter=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,c=e.suffix,l=e.fontSize,u=void 0===l?12:l,d=m.useContext(I.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,g.Sh)(oe.outcomeCounter,R.ab(s,E.$.getClassName(oe)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 18",className:oe.circular},m.createElement("rect",(0,_.__assign)({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(a,!!c),{height:18,rx:9})),m.createElement("text",(0,_.__assign)({x:"50%",y:"10px"},C.h5(d.has(I.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":n},(0,g.Sh)(G,i.counterContent)),t(a),c)))},e.MainMeter=function(e){var t=e.count,i=e.isChecking,a=e.className,o=0===t;return m.createElement("div",(0,_.__assign)({},(0,g.Sh)(oe.meter,a)),m.createElement(n,{isChecking:i,type:o?"green":"red"}),0===t?m.createElement(k.JO.Grammarly,null):m.createElement(r,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,i=e.isChecking;return m.createElement("div",{className:oe.lensNavMeter},m.createElement(n,{isChecking:i,type:"red"}),m.createElement(r,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,r=e.isChecking,a=e.className;return m.createElement("div",(0,_.__assign)({},(0,g.Sh)(oe.plagiarismMeter,a)),m.createElement(n,{isChecking:r,type:"violet",animateFade:!1}),m.createElement(g.F.div,{className:oe.wrapper},t.pipe(N.a(r),M.U((function(e){var t=e[0],n=e[1];return 0===t?m.createElement(k.JO.NotificationInfo,{className:oe.plagiarismIcon,key:"icon",width:20}):!n&&m.createElement(i,{count:t,type:"violet",key:"value",suffix:m.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),F.O(null))))},e.PlagiarismOutcomesMeter=function(t){var r=t.count,i=t.isChecking,a=t.className;return m.createElement("div",(0,_.__assign)({},(0,g.Sh)(oe.plagiarismMeter,a)),m.createElement(n,{isChecking:i,type:"cyan",animateFade:!1}),m.createElement(g.F.div,{className:oe.wrapper},r.pipe(N.a(i),M.U((function(t){var n=t[0],r=t[1];return L.g.isMin(n)?m.createElement(k.JO.CheckmarkOutcomes,{className:oe.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&m.createElement(e.OutcomeCounter,{count:L.g.prism.reverseGet(n),type:"cyan",key:"value",suffix:m.createElement("tspan",{fontSize:11},"%")})})),F.O(null))))}}(p||(p={}));var P,O=1.25,B={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:x.u.percent(100),height:x.u.percent(100)},D={position:"absolute",width:x.u.percent(150),height:x.u.percent(150),transform:"translate(-17%, -17%)"},W={position:"relative",display:"inline-flex"},H={width:x.u.percent(100),height:x.u.percent(100)},U={minWidth:x.u.rem(2),width:x.u.percent(100),height:x.u.rem(O)},z={maxWidth:x.u.rem(2),height:x.u.rem(O)},X="counterText",G=x.u.joinClasses([X,x.u.style({fontWeight:"bold",textAnchor:"middle",fill:S.Il.CoreNeutral0})]),V={fill:A.zh,$nest:(r={},r["& .counterText"]={fill:A.FW},r)},Y={fill:S.Il.CoreRed50,$nest:(i={},i["& .counterText"]={fill:S.Il.CoreNeutral0},i)},q={fill:S.Il.CoreGreen50,$nest:(a={},a["& .counterText"]={fill:S.Il.CoreNeutral0},a)},$={fill:S.Il.CoreBlue50,$nest:(o={},o["& .counterText"]={fill:S.Il.CoreNeutral0},o)},j={fill:"transparent",$nest:(s={},s["& .counterText"]={fill:A.FW},s)},Z={fill:A.lh,$nest:(c={},c["& .counterText"]={fill:S.Il.CoreNeutral0},c)},J={fill:A.AX,$nest:(l={},l["& .counterText"]={fill:S.Il.CoreNeutral0},l)},K={fill:S.Il.CoreYellow60,$nest:(u={},u["& .counterText"]={fill:S.Il.CoreNeutral0},u)},Q={fill:S.Il.CoreCyan50,$nest:(d={},d["& .counterText"]={fill:S.Il.CoreNeutral0},d)},ee={width:x.u.rem(1.5),height:x.u.rem(1.5)},te={margin:"0 "+x.u.rem(.25)},ne={width:x.u.rem(2),height:x.u.rem(O)},re={margin:x.u.rem(-1)+" 0"},ie={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:S.Il.CoreCyan50}}},ae={width:x.u.rem(2),height:x.u.rem(1.125),position:"relative"},oe=x.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[B],loader:[D],wrapper:[W],roundCounter:[W,H],ovalCounter:[W,U],flexCounter:[W,z],gray:[V],red:[Y],green:[q],blue:[$],white:[j],violet:[Z],yellow:[J],orange:[K],cyan:[Q],meter:[W,ee],lensNavMeter:[W,ee,te],plagiarismMeter:[W,ne],plagiarismIcon:[re],plagiarismOutcomeIcon:[re,ie],outcomeCounter:[W,{position:"absolute",left:0},ae]}),se=n(45836),ce=n(13097),le={position:"relative",borderRadius:x.u.rem(ce.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none"},ue={padding:x.u.rem(1)+" "+x.u.rem(2)},de={display:"flex",boxSizing:"border-box",padding:x.u.rem(1.25)+" "+x.u.rem(.5)+" "+x.u.rem(1.25)+" "+x.u.rem(1.25),height:x.u.rem(3),cursor:"pointer",justifyContent:"flex-start",alignItems:"center",$nest:{"&:before":{position:"absolute",right:x.u.rem(.5),bottom:x.u.rem(-.5),left:x.u.rem(.5),zIndex:-20,display:"block",height:x.u.rem(2),borderRadius:x.u.rem(ce.fx),backgroundColor:S.Il.CoreNeutral0,boxShadow:"0 "+x.u.rem(.25)+" "+x.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",content:"' '"}}},pe={marginLeft:x.u.rem(.8),fontSize:x.u.rem(.85),lineHeight:x.u.rem(1)},fe={display:"flex",width:x.u.percent(100),alignItems:"center",justifyContent:"space-between"},me={position:"relative",padding:x.u.rem(1)+" "+x.u.rem(2)+" "+x.u.rem(2),userSelect:"none"},he={position:"absolute",top:x.u.rem(.2),right:x.u.rem(.3),cursor:"pointer"},ge={paddingRight:x.u.rem(1),textAlign:"left",fontSize:x.u.rem(.75),lineHeight:x.u.rem(1.15)},ve={marginTop:x.u.rem(.6),fontSize:x.u.rem(.875),flexShrink:0},ye={display:"flex",marginBottom:x.u.rem(.6),justifyContent:"flex-end",flexShrink:0},be={marginRight:"auto",lineHeight:x.u.rem(1.3125)},we={marginTop:x.u.rem(.21),minWidth:x.u.rem(1.5),flexShrink:0},_e={display:"flex",width:x.u.percent(100),justifyContent:"center",alignItems:"center"},Ce={display:"flex",width:x.u.percent(100),height:x.u.rem(2),borderRadius:x.u.rem(ce.fx),backgroundColor:S.Il.CoreYellow60,color:S.Il.CoreNeutral0,fontWeight:"bold",justifyContent:"center",alignItems:"center",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:S.Il.CoreYellow50}}},Se={display:"flex",marginTop:x.u.rem(1),justifyContent:"center"},xe={position:"absolute",top:x.u.rem(.7),left:x.u.rem(.22),fill:S.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:S.Il.CoreNeutral90}}},Ae=x.u.stylesheet({wrapper:[le],maximizedWrapper:[ue],minimizedWrapper:[de],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[pe],minimizedContent:[fe],maximizedContainer:[me],maximizedCloseButtonContainer:[he],maximizedHeader:[ge],alertCategoryContainer:[ve],alertCategory:[ye],categoryHumanContainer:[be],alertCounterContainer:[we],premiumButtonWrapper:[_e],premiumButton:[Ce],premiumButtonContainer:[Se],icon:[xe]}),Ie=n(64437),ke=function(e){return f.UI.Grid.make((function(t){var n=t.slots;return m.createElement(g.F.div,(0,_.__assign)({},(0,g.Sh)(Ae.wrapper,e,Ie.m.fullCard)),m.createElement(k.JO.PaidLink,{width:14,className:Ae.icon}),n.body)}))},Ee=f.UI.Node.make((function(e){var t=e.notify;return m.createElement(g.F.div,{className:Ae.maximizedCloseButtonContainer},m.createElement(se.zx,{name:"close",onClick:t("onClick")},m.createElement(k.JO.Close,{width:11})))}));!function(e){!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(e.ActionsKind||(e.ActionsKind={}))}(P||(P={}));var Te,Re=f.UI.Node.make((function(e){var t=e.state,n=e.notify,r=m.useContext(b.m.Context);return m.createElement(m.Fragment,null,m.createElement("div",{className:Ae.maximizedHeader},m.createElement(g.F.Fragment,null,t.pipe(M.U((function(e){var t=e.count;return t>0?t>1?m.createElement(m.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1," ",t," ",r.sidebar.content.premiumIssues.foundTitlePlural.description2):m.createElement(m.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1," ",t," ",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null}))))),m.createElement(g.F.div,{className:Ae.alertCategoryContainer},t.pipe(M.U((function(e){return e.alerts.map((function(e){return m.createElement("div",{key:e.category,className:Ae.alertCategory},m.createElement("div",{className:Ae.categoryHumanContainer},e.categoryHuman),m.createElement("div",{className:Ae.alertCounterContainer},m.createElement(p.Counter,{count:e.count,type:"orange"})))}))})))),m.createElement("div",{className:Ae.premiumButtonContainer},m.createElement("div",{ref:function(e){n({kind:P.ActionsKind.onUpgradeButtonMount,element:y.fromNullable(e)})()},className:Ae.premiumButtonWrapper},m.createElement(w.zx,{name:"upgrade",styleType:se.ZT.Type.Base,className:Ae.premiumButton,onClick:n({kind:P.ActionsKind.onUpgrade})},r.seeWhatsInPremium))))})),Le=f.UI.Composite.make(ke(Ae.maximizedWrapper),f.UI.Group.make({closeButton:f.UI.Union.make("kind",{hidden:f.UI.Node.empty,visible:Ee}),content:Re})),Me=(0,h.pipe)(f.UI.squash(Le),f.UI.mapAction((function(e){switch(e.key){case"content":switch(e.action.kind){case P.ActionsKind.onUpgrade:return{kind:"upgrade"};case P.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,v.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,v.vE)(e.action.action)}default:return(0,v.vE)(e)}})),f.UI.contramapState((function(e){return{closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}}))),Ne=f.UI.Node.make((function(e){var t=e.state,n=m.useContext(b.m.Context);return m.createElement(g.F.div,{className:Ae.minimizedContent},m.createElement("div",{className:Ae.minimizedText},n.premiumSuggestions),t.pipe(M.U((function(e){var t=e.alertsCount;return t>0&&m.createElement(p.OutcomeCounter,{type:"orange",key:"advancedCounter-counter",count:t})}))))})),Fe=f.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return m.createElement("div",{className:Ae.shadowWrapper,onClick:n("onClick")},t.body)})),Pe=f.UI.Knot.make(Fe,{body:f.UI.Composite.make(ke(Ae.minimizedWrapper),Ne)}),Oe=(0,h.pipe)(f.UI.squash(Pe),f.UI.contramapState((function(e){return{body:e}})));!function(e){var t,n,r;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(r=e.State||(e.State={})),e.TogglableExpandedPanel=f.UI.Union.make("kind",((t={})[r.hidden]=f.UI.Node.empty,t[r.expanded]=Me,t)),e.ToggablePanel=f.UI.Union.make("kind",((n={})[r.hidden]=f.UI.Node.empty,n[r.minimized]=Oe,n[r.expanded]=Me,n))}(Te||(Te={}))},14611:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r,i=n(49708),a=n(77176),o=n(93508),s=n(85985),c=n(17343),l=n(36303),u=n(24209),d=n(99391),p=n(83840),f=n(8473),m=n(15789),h=n(2768),g=n(50628),v=n(79462),y=n(28043),b=n(32952),w=n(66310),_=n(76974);!function(e){var t=function(){function e(){}return Object.defineProperty(e,"observable",{get:function(){return this._obs||(this._obs=i.R(document,"visibilitychange").pipe(a.U((function(){return document.hidden})),o.O(document.hidden),s.h(Boolean),c.h(void 0),l.r(1)))},enumerable:!1,configurable:!0}),e}();function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.T.apply(d,e.map((function(e){return e.pipe(p.i())}))).pipe(f.o((function(e){return e.hasValue})),m.D())}e.Hidden=t,e.mergeUntilAnyCompletes=n,e.createAnimationObservable=function(e,r,i){return n(function(e,t,n){return v.y.create((function(r){var i,a=window.requestAnimationFrame(o);function o(s){i||(i=s);var c=s-i;c<n?(r.next(Math.round(e+c/n*(t-e))),a=window.requestAnimationFrame(o)):(r.next(t),r.complete())}return function(){return window.cancelAnimationFrame(a)}})).pipe(y.x())}(e,r,i).pipe(h.R(t.observable)),t.observable.pipe(c.h(r),g.P()))},e.fadeOutState=function(e){var t=new b.xQ;return{state:e.pipe(w.w((function(e){return e?_.of("inProgress"):u.T(_.of("fadeOut"),t.pipe(c.h("end")))}))),complete:function(){return t.next(!0)}}},e.rafSequence=function(e,t){return void 0===t&&(t=!1),v.y.create((function(n){var r;function i(){n.next(e.shift()),e.length&&(r=requestAnimationFrame(i))}return t?i():r=requestAnimationFrame(i),function(){return cancelAnimationFrame(r)}}))}}(r||(r={}))},42499:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r,i=n(18625),a=n(49708);!function(e){var t="scrollaction";e.emit=function(e){return window.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=i.P((function(){return a.R(window,t)}))}(r||(r={}))},60430:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var r,i=n(27378),a=n(42726),o=n(22232),s=n(64909),c=n(19962),l=n(16528),u=n(66310),d=n(76974),p=n(93508),f=n(77176);!function(e){e.useSubscriptionTo=function(e){i.useEffect((function(){var t=e.subscribe();return function(){return t.unsubscribe()}}),[e])};var t=new Set;function n(){return i.useMemo((function(){var e=a.hg.create(s.none);return{ref:e,onMount:function(t){return e.set(s.fromNullable(t))}}}),[])}e.useSingleton=function(e){i.useEffect((function(){return(0,o.kG)(!t.has(e),"Component "+e+" can be mounted only once!"),t.add(e),function(){t.delete(e)}}),[])},e.useElWatcher=n,e.useRectWatcher=function(){var e=n(),t=e.ref,r=e.onMount;return{rect:t.pipe(u.w(s.fold((function(){return d.of(s.none)}),(function(e){return l.YC(e).pipe(p.O(c.UL.fromEl(e)),f.U(s.some))})))),onMount:r}},e.useEffectOnDidMount=function(e){i.useEffect(e,[])},e.useEffectOnWillUnmount=function(e){i.useEffect((function(){return e}),[])}}(r||(r={}))},95053:(e,t,n)=>{"use strict";n.d(t,{vM:()=>p,aW:()=>r});var r,i=n(489),a=n(45980),o=n(73805),s=(n(42726),n(22232)),c=n(83078),l=n(64909),u=n(65772),d=n(89943);function p(e,t){return t.reduce((function(t,n){var r="function"==typeof e?e(n):n[e],i=t.get(r);return i||(i=[],t.set(r,i)),i.push(n),t}),new Map)}!function(e){e.URI="ImmutableSortedMap",e.create=function(t,n,r){var i=Array.isArray(t)?new Map(t.map((function(e){return[n(e),e]}))):t,a=e.orderKeys(i,r);return i.forEach((function(e){return(0,s.kG)(m(e),"init value should implement IEquals",(function(){return JSON.stringify(e)}))})),new f(i,a,r,n)},e.empty=function(e,t){return new f(new Map,[],t,e)},e.diff=function(e,t){var n=e.clear();return e.reduce((function(e,n,r){var i=e.added,a=e.preserved,o=e.removed,s=e.changed,l=i.has(r)?i.remove(r):i;if(t.has(r)){var u=n.equals(c.MH(t.get(r)).value);return{removed:o,added:l,preserved:u?a.add(n):a,changed:u?s:s.add(n)}}return{removed:o.add(n),added:l,preserved:a,changed:s}}),{removed:n,added:t,preserved:n,changed:n})},e.unsafeGet=function(e,t){return c.MH(t.get(e)).value},e.unsafeGetBy=function(e){return function(t){return c.MH(t.get(e)).value}},e.unsafeGetAt=function(e,t){return c.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return function(t){return c.MH(t.getAt(e))}},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){for(var n=-1,r=e.size;n+1!==r;){var i=n+(r-n>>1);t(c.MH(e.getAt(i)))?n=i:r=i}return n+1},e.createKeySorter=function(e,t){return function(n,r){return t(e(n),e(r))}},e.orderKeys=function(t,n){return Array.from(t.keys()).sort(e.createKeySorter((function(e){return t.get(e)}),n))},e.takeByKey=function(e,t,n){var r=(0,o.pipe)(n,i.findIndex((function(t){return t===e}))),a=l.fromNullable(t.get(e));return(0,s.kG)(l.isNone(r)&&l.isNone(a)||l.isSome(r)&&l.isSome(a),"unsynced hash&order"),c.vB((function(e,t){return{index:e,value:t}}))(r,a)},e.getFoldableWithIndex=function(){return{URI:e.URI,_E:void 0,reduce:function(e,t,n){return e.reduce(n,t)},foldMap:function(e){return function(t,n){return t.reduce((function(t,r){return e.concat(t,n(r))}),e.empty)}},reduceRight:function(e,t,n){return e.reduce((function(e,t){return n(t,e)}),t)},reduceWithIndex:function(e,t,n){return e.reduce((function(e,t,r){return n(r,e,t)}),t)},reduceRightWithIndex:function(e,t,n){return e.reduce((function(e,t,r){return n(r,t,e)}),t)},foldMapWithIndex:function(e){return function(t,n){return t.reduce((function(t,r,i){return e.concat(t,n(i,r))}),e.empty)}}}}}(r||(r={}));var f=function(){function e(e,t,n,r){this._hash=e,this._order=t,this._comp=n,this._getKey=r,(0,s.kG)(e.size===t.length,"every hash entry should has order")}return e.prototype.get=function(e){return r.takeByKey(e,this._hash,this._order)},e.prototype.getIndex=function(e){return l.fromPredicate((function(e){return e>-1}))(this._order.indexOf(e))},e.prototype.getAt=function(e){return l.fromNullable(this._hash.get(this._order[e]))},e.prototype.has=function(e){return this._hash.has(e)},e.prototype.find=function(e,t){if(void 0===t&&(t=0),t<0)return l.none;for(var n=t;n<this._order.length;n++){var r=this._order[n],i=this._hash.get(r);if(e(i))return l.some({index:n,value:i})}return l.none},e.prototype.findFrom=function(e,t){return this.find(e,t)},e.prototype.findRight=function(e,t){if(t&&t>=this._order.length)return l.none;for(var n=t||this._order.length-1;n>=0;n--){var r=this._order[n],i=this._hash.get(r);if(e(i))return l.some({index:n,value:i})}return l.none},e.prototype.findRightFrom=function(e,t){return this.findRight(e,t)},e.prototype.map=function(t,n){var i=this;void 0===n&&(n=this._comp);var a=new Map;this._order.forEach((function(e,n){var r=i._hash.get(e),o=t(r,e,n);(0,s.kG)(m(o),"transformed value should implement IEquals",(function(){return JSON.stringify(o)})),a.set(e,o)}));var o=r.orderKeys(a,n);return new e(a,o,n,this._getKey)},e.prototype.mapTo=function(e){var t=this;return this._order.map((function(n,r){return e(t._hash.get(n),n,r)}))},e.prototype.filter=function(t){var n=this,r=new Map,i=this._order.filter((function(e){var i=n._hash.get(e),a=t(i,e);return a&&r.set(e,i),a}));return new e(r,i,this._comp,this._getKey)},e.prototype.reduce=function(e,t){var n=this;return this._order.reduce((function(t,r,i){return e(t,n._hash.get(r),r,i)}),t)},e.prototype.modifyWith=function(t,n){var i=new Map(this._hash),a=this._order.slice(),o=function(e,t){var o=r.takeByKey(t,i,a),c=n(t,e,o);(0,s.kG)(m(c),"modified value should implement IEquals",(function(){return JSON.stringify(c)})),i.set(t,c),l.isNone(o)&&a.push(t)};return t instanceof Array?t.forEach((function(e){var t=e[0],n=e[1];return o(n,t)})):t.forEach(o),a.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,a,this._comp,this._getKey)},e.prototype.patchWith=function(t,n){var i=new Map(this._hash),u=this._order.slice(),d=function(e,t){var d=r.takeByKey(t,i,u),p=n(t,e,d);(0,s.kG)(c.wo(m)(p),"patched value should implement IEquals",(function(){return JSON.stringify(p)})),(0,o.pipe)(p,l.fold((function(){(0,o.pipe)(d,l.fold(a.constVoid,(function(e){var n=e.index;i.delete(t),u.splice(n,1)})))}),(function(e){i.set(t,e),l.isNone(d)&&u.push(t)})))};return t instanceof Array?t.forEach((function(e){var t=e[0],n=e[1];return d(n,t)})):t.forEach(d),u.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,u,this._comp,this._getKey)},e.prototype.add=function(t){var n=this,i=new Map(this._hash),a=this._order.slice();return(Array.isArray(t)?t:[t]).forEach((function(e){var t=n._getKey(e);(0,s.kG)(m(e),"added value should implement IEquals",(function(){return JSON.stringify(e)})),i.set(t,e),-1===a.indexOf(t)&&a.push(t)})),a.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,a,this._comp,this._getKey)},e.prototype.update=function(t,n){var i=this;return(0,o.pipe)(this.get(t),l.fold((function(){return u.left("Provided key "+t+" not found in the map")}),(function(a){var o=a.value,s=new Map(i._hash),c=i._order.slice();return s.set(t,n(o)),c.sort(r.createKeySorter((function(e){return s.get(e)}),i._comp)),u.right(new e(s,c,i._comp,i._getKey))})))},e.prototype.remove=function(t){(0,s.kG)(this.has(t),"can not remove unknown key: "+t);var n=new Map(this._hash);return n.delete(t),new e(n,d.CE(t,this._order),this._comp,this._getKey)},e.prototype.clear=function(){return new e(new Map,[],this._comp,this._getKey)},e.prototype.hashCode=function(){var e=7;return this._hash.forEach((function(t){return e+=t.hashCode()})),e},e.prototype.equals=function(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every((function(t,n){return t.equals(c.MH(e.getAt(n)))}))},e.prototype.values=function(){var e=this;return this._order.map((function(t){return e._hash.get(t)}))},e.prototype.keys=function(){return this._order},Object.defineProperty(e.prototype,"size",{get:function(){return this._order.length},enumerable:!1,configurable:!0}),e}();function m(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},40250:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r,i=n(73805),a=n(64909);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),a.filter((function(e){return n(e.value)})))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},19787:(e,t,n)=>{"use strict";n.d(t,{m:()=>x});var r,i=n(489),a=n(45980),o=n(73805),s=n(42726),c=n(64909),l=n(22788),u=n(89943),d=n(8125),p=n(83078),f=n(10002),m=n(32952),h=n(52479),g=n(77176),v=n(67434),y=n(28043),b=n(41398),w=n(99391),_=n(41199),C=n(50634),S=n(38524);!function(e){var t=function(){this.alertHovered=new m.xQ,this.alertClicked=new m.xQ,this.highlightedAlert=s.hg.create(c.none)};e.Mock=t}(r||(r={}));var x=function(e,t,n,r){var s=this;this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=r,this._focusedCard=this._state.view(S.nL.getActiveCard),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=function(e){return(0,o.pipe)(e,c.map((0,a.flow)(i.filterMap((function(e){return s._markAlertMapper.getAlertByMark(e)})),i.sort(l.contramap((function(e){var t=e.alert;return{type:t.lensType,priority:t.lensPriority}}))(f.R.ord)))))},this.alertHovered=h.b2.inRaf(this._ded.hoveredMarks).pipe(g.U(this._marksToAlertTupleArray),g.U(c.map(i.map((function(e){return e.alert})))),v.R((function(e,t){return(0,o.pipe)(t,c.chain((function(t){return(0,o.pipe)(e,c.filter((function(e){return-1!==t.indexOf(e)})),c.fold((function(){return c.fromNullable(t[0])}),c.some))})))}),c.none),g.U(c.filter((function(e){return s._alertsReader.isInteractable(e.id)&&!_.$.isPlagiarism(e)}))),y.x()),this.alertClicked=h.b2.inRaf(this._ded.activeMarks).pipe(g.U(this._marksToAlertTupleArray),b.M(this._focusedCard,this._focusedLens),v.R((function(e,t){var n=t[0],r=t[1],i=t[2],a=function(t){return(0,o.pipe)(e,c.exists((function(e){return e.alert.id===t.alert.id})))},s=function(e){return(0,o.pipe)(r,c.exists((function(t){return t.activeAlert.id===e.alert.id})))},l=function(e){return i.meta.filter(e.alert)};return(0,o.pipe)(n,c.chain((function(e){return(0,o.pipe)(e,u.N6([(0,d.W9)(a,s),s,(0,d.W9)(a,l),l,a]),c.fold((function(){return c.fromNullable(e[0])}),c.some))})))}),p.cS()),y.x(c.getEq(C.E.eq).equals),w.shareReplay({refCount:!0,bufferSize:1}))}},73343:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var r,i=n(59312),a=n(45980),o=n(8125),s=n(17753),c=n(10002),l=(0,o.W9)(s.bZ.isRegistered,(0,a.not)(s.bZ.isMuted)),u=function(e){return function(t){return(0,o.W9)(l,e(t))}};!function(e){var t,n;e.create=function(e,t){var n=u((function(t){return e[t]}));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:function(e,n){return(0,o.W9)(u((function(e){return t[e]}))(e),function(e){return function(t){return e||s.bZ.isPriority(t)}}(n))},alertVisibleInSidebar:n,getLensesFilter:function(t){return e[t]},alertCanBeDisplayed:l,alertIsBulkAcceptable:function(e){return(0,o.W9)(n(e),s.bZ.isBulkAcceptable)}}};var r=function(e){return function(t){return e===t.lensId}},d=function(e){return(0,o.W9)(r(c.R.OutcomeId.fromPriorityOutcomeId(e)),s.bZ.isPriority)};e.defaultLensFilters=((t={})[c.R.SpecialId.Clarity]=r(c.R.SpecialId.Clarity),t[c.R.SpecialId.Correctness]=r(c.R.SpecialId.Correctness),t[c.R.SpecialId.Delivery]=r(c.R.SpecialId.Delivery),t[c.R.SpecialId.Engagement]=r(c.R.SpecialId.Engagement),t[c.R.SpecialId.Vox]=r(c.R.SpecialId.Vox),t[c.R.SpecialId.ClarityPriority]=d(c.R.SpecialId.ClarityPriority),t[c.R.SpecialId.CorrectnessPriority]=d(c.R.SpecialId.CorrectnessPriority),t[c.R.SpecialId.DeliveryPriority]=d(c.R.SpecialId.DeliveryPriority),t[c.R.SpecialId.EngagementPriority]=d(c.R.SpecialId.EngagementPriority),t[c.R.SpecialId.VoxPriority]=d(c.R.SpecialId.VoxPriority),t[c.R.SpecialId.Plagiarism]=r(c.R.SpecialId.Plagiarism),t[c.R.SpecialId.Premium]=r(c.R.SpecialId.Premium),t[c.R.SpecialId.AllAlerts]=s.bZ.belongsToAllAlerts,t[c.R.SpecialId.Closed]=a.constFalse,t[c.R.SpecialId.Priority]=s.bZ.belongsToPriorityLens,t[c.R.SpecialId.PredictionTakeaways]=s.bZ.belongsToPredictionTakeaways,t[c.R.SpecialId.PredictionEmogenie]=s.bZ.belongsToPredictionEmogenie,t[c.R.SpecialId.RealTimeProofit]=r(c.R.SpecialId.RealTimeProofit),t),e.defaultTextFilters=(0,i.__assign)((0,i.__assign)({},e.defaultLensFilters),((n={})[c.R.SpecialId.Closed]=s.bZ.isCriticalImpact,n[c.R.SpecialId.Premium]=(0,o.Kg)(e.defaultLensFilters[c.R.SpecialId.Premium],s.bZ.belongsToAllAlerts),n)),e.priorityTextFilters=function(e){var t;return(t={})[c.R.SpecialId.Premium]=(0,o.W9)(e[c.R.SpecialId.Premium],s.bZ.isPriority),t}}(r||(r={}))},95722:(e,t,n)=>{"use strict";n.d(t,{Oe:()=>r,rG:()=>i,Bd:()=>a});var r,i,a,o=n(59312),s=n(42654),c=n(17753);!function(e){e.eq=(0,s.contramap)((function(e){return e.alert}))(c.bZ.ordId),e.isPending=function(e){return null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate)},e.isOneOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e===t.state.current.visualState}))}},e.notAnyOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return e!==t.state.current.visualState}))}},e.canBeChanged=function(t){return function(n){return t&&a.applied===n.state.current.visualState?t===a.disposed:c.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(a.applied,a.disposed)(n)}},e.isOrWillBe=function(e){return function(t){return null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e}},e.willBe=function(e){return function(t){return null!==t.state.scheduled&&t.state.scheduled.visualState===e}}}(r||(r={})),function(e){e.updateRanges=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),function(e){e.isApplied=function(t){return t===e.applied}}(a||(a={}))},20892:(e,t,n)=>{"use strict";n.d(t,{v:()=>S});var r=n(59312),i=n(489),a=n(45980),o=n(73805),s=n(49524),c=n(25656),l=n(24645),u=n(60705),d=n(65772),p=n(64909),f=n(22232),m=n(83078),h=n(89943),g=n(68983),v=n(8125),y=n(92932),b=n(17753),w=n(41199),_=n(78090),C=n(95722),S=function(){function e(e,t,n,r,i,c,l,u){var f=this;this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=i,this._update=c,this._remove=l,this._onTransitionEnd=u,this._currentState=C.rG.from(C.Bd.initial),this._scheduledState=C.rG.from(C.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=function(e){if(!e.to.updateRanges||!(0,o.pipe)(f._alertRangeService.hasNewRangesForUpdate(f.id),d.fold(a.constFalse,s.y)))return p.none;var t=(0,o.pipe)(f._alertRangeService.applyPendingRangesUpdate(f.id),d.mapLeft((function(e){return x("markAlert").error("cannot apply pending ranges",e)})),p.fromEither,p.chain(s.y),p.filter((function(e){var t=e.addedHighlightedRanges,n=e.removedHighlightedRanges;return t.length>0||n.length>0})));return(0,o.pipe)(t,p.map((function(e){return{commit:function(){return e.removedHighlightedRanges[1]()},ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}})))},this._dispose=function(){f._marksMap.clear(),d.either.map(f._alertRef,(function(e){return e.dispose()}))},this._disposeIfEmpty=function(){0===f._marksMap.size&&f._dispose()},d.either.mapLeft(this._alertRef,(function(e){return x("markAlert").warn("can not take alertRef",e)}))}return Object.defineProperty(e.prototype,"state",{get:function(){return{current:this._currentState,scheduled:this._scheduledState}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alert",{get:function(){return this._alert()},enumerable:!1,configurable:!0}),e.prototype.scheduleApply=function(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,f.kG)(e!==C.Bd.initial,"Cannot schedule change "+this.id+" from "+this._currentState.visualState+" to initial state"),this._currentState.visualState!==C.Bd.initial||e!==C.Bd.disposed&&!C.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.rG.from(C.Bd.disposed),this._dispose()),this},e.prototype.scheduleUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.updateRanges(this._scheduledState||this._currentState,!0)},e.prototype.scheduleForceUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.forceUpdate(this._scheduledState||this._currentState,!0)},e.prototype.apply=function(){var e=this;if(C.Oe.isPending(this)){this._throwWhenInFinaleState();var t=this._getTransition();(0,o.pipe)(this.change(),p.filter((function(e){return e.rawMark.length>0})),p.map((function(n){e._handleBasicEvent(n.rawMark),n.commit(),e._onTransitionEnd(t,e)})))}},e.prototype.applyWith=function(e){var t=(0,r.__spreadArrays)([this],e);this._handleMultipleHighlights(t,(function(e){return e.change()}))},e.prototype.markByIndex=function(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return p.none}},Object.defineProperty(e.prototype,"mark",{get:function(){return this.markByIndex(0)},enumerable:!1,configurable:!0}),e.prototype._iterateOverMarkAlerts=function(e,t){e.forEach((function(e){var n=e.change,r=e.ma;n.rawMark.forEach((function(e){"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,o.pipe)(t.created.get(e.id)||d.left(new Error("Cannot get unknown mark")),p.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),n.commit(),r._disposeIfEmpty()}))},e.prototype._handleMultipleHighlights=function(e,t){var n=e.map((function(e){return[e,t(e)]})).filter((function(e){var t=e[0],n=e[1];return(0,o.pipe)(n,p.filter((function(e){return 0!==e.rawMark.length||(x("markAlert").warn("rawAction must have rawMark array",{rawAction:e.action,state:(0,r.__assign)((0,r.__assign)({},t.toJSON()),{alert:void 0})}),!1)})),p.isSome)})).map((function(e){var t=e[0],n=e[1];return{ma:t,change:m.MH(n)}}));if(0!==n.length){var i=h.VS(n.map((function(e){return e.change.rawMark}))),a=this._changeMarksInDEd(i);this._iterateOverMarkAlerts(n,a)}},Object.defineProperty(e.prototype,"_mark",{get:function(){return this._markbyIndex(0)},enumerable:!1,configurable:!0}),e.prototype._markbyIndex=function(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:p.none},e.prototype._setMarkAndCheckFinaleState=function(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)},e.prototype._setMark=function(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)},e.prototype._removeMark=function(e){this._marksMap.delete(e)},e.prototype.change=function(){var e=this;(0,f.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})}));var t=this._commitTransition();return t.from.visualState!==t.to.visualState||t.to.forceUpdate||t.to.updateRanges?p.some(this._getRawActionForApply(t)):p.none},e.prototype._handleBasicEvent=function(e){var t=this,n=this._changeMarksInDEd(e);e.forEach((function(e){if(e.action===l.v.Change.ActionType.remove)t._removeMark(e.id);else{var r=(0,o.pipe)(p.fromNullable(t._marksMap.get(e.id)),p.chain(s.y),p.alt((function(){return(0,o.pipe)((e.action===l.v.Change.ActionType.create?n.created.get(e.id):n.updated.get(e.id))||d.left(new Error("Cannot get unknown mark")),p.fromEither)})));t._setMark(e.id,r)}})),this._disposeIfEmpty()},e.prototype._getTransition=function(){var e=this;return(0,f.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})})),{from:this._currentState,to:this._scheduledState}},e.prototype._commitTransition=function(){var e=this._getTransition();return this._currentState=(0,r.__assign)((0,r.__assign)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e},e.prototype._getRawActionForApply=function(e){var t=this;switch(e.from.visualState){case C.Bd.initial:return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit()}))),{action:"create",commit:c.Z,rawMark:this._getHighlightRanges((function(n){return t._create((function(){return n}),e)(n.meta.id)}))};default:switch(e.to.visualState){case C.Bd.disposed:var n=C.Bd.isApplied(e.from.visualState)||b.bZ.State.isRemoved(this.alert.state)&&w.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(a.constVoid).length>0?this._getAppliedRanges((function(e,t){return{id:t().meta.id,range:t}})):this._getHighlightRanges((function(e){return{id:e.meta.id,range:function(){return e}}}));return{action:"remove",commit:(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return a.constVoid}))),rawMark:n.map((function(e){return t._remove(e.range)(e.id)}))};case C.Bd.applied:var i=this._getHighlightRanges((function(e){return t._remove((function(){return e}))(e.meta.id)})),l=(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return a.constVoid}))),u=this._getAppliedRanges((function(n,r){return t._create(r,e)(r().meta.id)}));return{action:"replace",commit:l,rawMark:(0,r.__spreadArrays)(i,u)};default:var d=function(){return b.bZ.State.isBulkApplied(t._alert("_getRawActionForApply").state)?t._getAppliedRanges((function(e,t){return t()})):t._getHighlightRanges(s.y)};return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(n){var r=n.commit,i=n.ranges;return t._getReplaceAction(e,d(),i.removed,r)})),p.getOrElse((function(){return{action:"update",commit:c.Z,rawMark:d().map((function(n){return t._update((function(){return n}),e)(n.meta.id)}))}})))}}},e.prototype._getReplaceAction=function(e,t,n,i){var a=this;return{action:"replace",commit:i,rawMark:(0,r.__spreadArrays)(n.map((function(e){return a._remove((function(){return e}))(e.meta.id)})),t.map((function(t){return a._create((function(){return t}),e)(t.meta.id)})))}},e.prototype._getAppliedRanges=function(e){var t=this;return(0,o.pipe)(this._alertRangeService.getAppliedRanges(this.id),d.fold((function(e){return x("markAlert").error("cannot get applied ranges",{error:e.message,alert:w.$.snapshot(t._alert("_getAppliedRanges"))}),[]}),i.mapWithIndex(e)))},e.prototype._getHighlightRanges=function(e){var t=this;return(0,o.pipe)(this._alertRangeService.getHighlightRanges(this.id),d.fold((function(n){return x("markAlert").warn("cannot get highlight ranges via range service",{error:n,alert:t._alert("_getHighlightRanges")}),(0,o.pipe)(t._alert("_getHighlightRanges_Fallback").getHighlightRanges(),i.map(e))}),i.map(e)))},e.prototype._throwWhenNotAllowedState=function(e){var t=this._alert("_throwWhenNotAllowedState");(0,f.kG)(!(!w.$.isDefault(t)&&!w.$.isSuper(t))||(!e||b.bZ.State.isBulkApplied(t.state)||!C.Bd.isApplied(e)),"Applied state isn't allowed for "+this.id)},e.prototype._throwWhenInFinaleState=function(e){(0,f.kG)(e&&C.Oe.isOneOf(C.Bd.applied)(this)?e===C.Bd.disposed||b.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.Oe.notAnyOf(C.Bd.disposed)(this),"'"+this._currentState.visualState+"' MarkAlert '"+this.id+"' cannot be changed"+(e?" to '"+e+"' ":""))},e.prototype.toJSON=function(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,o.pipe)(this._mark,p.map((function(e){return e.id})),p.toUndefined),range:(0,o.pipe)(this._mark,p.map((function(e){return e.range})),p.toUndefined)},alert:this._alert("toJSON")}},e.prototype.equals=function(e){return C.Oe.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,_.AC)(this.id)},e}();!function(e){e.compareTo=function(e){var t=(0,g.W)(u.SV.distanceFrom)(e);return function(e,n){return(0,v.qu)(Math.min.apply(Math,e.alert.getHighlightRanges().map(t)),Math.min.apply(Math,n.alert.getHighlightRanges().map(t)))}}}(S||(S={}));var x=(0,v.HP)(y.C8.Logging.getLogger)},42490:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r,i,a,o=n(59312),s=n(73805),c=n(42726),l=n(22232),u=n(64909),d=n(42654),p=n(64510),f=n(489),m=n(76606),h=n(45980),g=n(84966),v=n(80358),y=n(43675),b=n(8125),w=n(97523),_=n(65772),C=n(22788),S=n(92932),x=n(17753),A=n(73510),I=n(52479),k=n(32952),E=n(85985),T=n(77176),R=n(2834),L=n(16118),M=n(40151),N=n(76779);!function(e){e.create=function(e){return{getAlertMuteCategory:function(t){return(0,s.pipe)(e.getById(t),u.chain((function(e){return e.muteCategory})),u.map((function(e){return e.id})))}}},e.getAlerts=function(e,t){var n={byCategory:new Map(t.map((function(e){return[e,[]]}))),all:[]};return(0,s.pipe)(e.get(),N.p.reduce(n,(function(e,n){var r=n.alert;return(0,s.pipe)(r.muteCategory,u.filter((function(e){return t.includes(e.id)})),u.map((function(e){return e.id})),u.alt((function(){return u.fromNullable(t.find(x.bZ.belongsToSpecialCategory(r)))})),u.fold((function(){return e}),(function(t){return e.byCategory.get(t).push(r),e.all.push(r),e})))})))}}(r||(r={})),function(e){var t,n;!function(e){!function(e){e.ord=C.ordString,e.show=m._3,e.create=function(e){return e}}(e.Id||(e.Id={})),e.isSpecial=function(e){return Object.values(g.JW.SpecialCategory).includes(e)},e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=function(e){return p.filter((function(t){return e(t.id)}))},e.filterWithCount=function(e,t){return function(n){var i=Array.from(n.keys()),a=r.getAlerts(t,i).byCategory;return(0,s.pipe)(n,p.filterMap((function(t){return e(t.id)?u.some((0,o.__assign)((0,o.__assign)({},t),{alertsCount:a.get(t.id).filter(x.bZ.isRegistered).length})):u.none})))}}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){var i;!function(e){var t;!function(e){e.BeforeCategoriesMuted="BeforeCategoriesMuted",e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isMuteEvent=function(e){return e.type===t.BeforeCategoriesMuted},e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(i=e.Events||(e.Events={})),e.create=function(e,a,o,l,d){var p=S.C8.Logging.getLogger("MutedAlertsModel"),m=c.hg.create(new Map),b=new k.xQ,C=new A.w.Keeper;return C.push(e.pipe(E.h(v.h.is("session_started")),T.U((function(e){return t=e.userMutedCategories,n=t.map((function(e){return[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]})),new Map(n);var t,n})),R.b(I.wW(m)),R.b((function(){return b.next({type:i.Type.CategoriesChanged})}))).subscribe(),m.pipe(L.G(),T.U((function(e){return function(e,n){return{muted:y.uz(t.Id.ord)(e,n),unmuted:y.uz(t.Id.ord)(n,e)}}(e[0],e[1])})),T.U(function(e){return function(t){var n=t.muted,i=t.unmuted;return{toMute:r.getAlerts(e,n).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Muted})),toUnmute:r.getAlerts(e,i).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Unmuted}))}}}(o)),R.b((function(e){var t=e.toMute,n=e.toUnmute;t.length>0&&l.changeMuteState(t,x.bZ.MuteStateType.Muted),n.length>0&&l.changeMuteState(n,x.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:b,mutedCategories:m,muteCategories:function(e,n){(0,s.pipe)(a.sendFeedback({kind:g.Mw.MUTE,userMuteScope:d,userMuteCategories:e}),w.mapLeft((function(e){p.warn("Alerts could not be muted on CAPI",e)})))();var c=r.getAlerts(o,e),l=c.all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Muted}));0===l.length&&p.warn("No alerts were muted on category mute",{categoryIds:e});var h=function(e,n,r){return function(i){var a=new Map(i);return e.forEach((function(e,i){t.isSpecial(i)?a.set(i,{id:i,scope:n,description:t.specialCategoryDescription}):(0,s.pipe)(f.lookup(0,e),u.chain((function(e){return e.muteCategory})),u.fold((function(){return r.error("No alerts to mute",i)}),(function(e){return a.set(i,{id:e.id,description:e.description,scope:n})})))})),a}}(c.byCategory,d,p)(m.get());return n&&b.next({type:i.Type.BeforeCategoriesMuted,muteScope:d,categories:e.map((function(e){return h.get(e)})),affectedAlerts:l}),m.set(h),b.next({type:i.Type.CategoriesChanged}),_.right(void 0)},unmuteCategories:function(e){return(0,s.pipe)(a.sendFeedback({kind:g.Mw.UNMUTE,userMuteScope:d,userMuteCategories:e}),w.mapLeft((function(e){p.warn("Alerts could not be un-muted on CAPI",e)})))(),0===r.getAlerts(o,e).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Unmuted})).length&&p.warn("No alerts were unmuted on category mute",{categoryIds:e}),m.modify(function(e,t){return function(n){var r=new Map(n);return e.forEach((function(e){n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,p)),b.next({type:i.Type.CategoriesChanged}),_.right(void 0)},getMutedCategories:function(){return(0,s.pipe)(m.get(),n.filterWithCount((0,h.not)(t.isSpecial),o))},getMutedSpecialCategories:function(){return(0,s.pipe)(m.get(),n.filter(t.isSpecial))},loadCachedMutedCategories:function(e){m.set(e)},dispose:function(){return C.dispose()}}},function(e){e.create=function(){return{events:M.c(),mutedCategories:c.hg.create(new Map),getMutedCategories:function(){return new Map},getMutedSpecialCategories:function(){return new Map},muteCategories:function(e,t){return _.right(void 0)},unmuteCategories:function(e){return _.right(void 0)},loadCachedMutedCategories:b.ZT,dispose:b.ZT}}}(e.Mock||(e.Mock={}))}(e.CategoriesModel||(e.CategoriesModel={}))}(i||(i={})),function(e){!function(e){e.eq=d.getStructEq({id:i.Category.Id.ord,description:d.eqString,isMuted:d.eqBoolean,alertsCount:d.eqNumber})}(e.Category||(e.Category={})),function(t){function n(e){return(0,o.__assign)((0,o.__assign)({},e),{isMuted:!0})}function r(e){return(0,s.pipe)(e,p.map(n))}function i(e){return{categories:e,count:Array.from(e.values()).reduce((function(e,t){return t.isMuted?e:e+t.alertsCount}),0)}}!function(e){e.empty={categories:new Map,count:0}}(t.State||(t.State={})),function(e){var t;!function(e){e.categoryClicked="categoryClicked",e.doneClicked="doneClicked",e.closeClicked="closeClicked",e.modalOpened="modalOpened"}(t=e.Kind||(e.Kind={})),e.shouldCloseDialogue=function(e){return e.kind===t.closeClicked||e.kind===t.doneClicked}}(t.Action||(t.Action={})),function(t){t.create=function(t){var n=c.hg.create(u.none),a=n.view(u.map(i)),d=new k.xQ,p=d.subscribe(function(t,n){return function(i){switch(i.kind){case e.Dialogue.Action.Kind.categoryClicked:t.modify(u.map((function(e){var t=new Map(e),n=e.get(i.categoryId);return t.set(i.categoryId,(0,o.__assign)((0,o.__assign)({},n),{isMuted:i.isMuted})),t})));break;case e.Dialogue.Action.Kind.doneClicked:n.unmuteCategories(i.unmutedCategories),t.set(u.none);break;case e.Dialogue.Action.Kind.closeClicked:t.set(u.none);break;case e.Dialogue.Action.Kind.modalOpened:t.set(u.some((0,s.pipe)(n.getMutedCategories(),r)));break;default:(0,l.vE)(i)}}}(n,t));return{state:a,actionEvents:d,dispose:function(){return p.unsubscribe()}}}}(t.ViewModel||(t.ViewModel={}))}(e.Dialogue||(e.Dialogue={}))}(a||(a={}))},45429:(e,t,n)=>{"use strict";n.d(t,{DV:()=>J,eZ:()=>K,UC:()=>Q});var r,i,a,o=n(59312),s=n(45980),c=n(73805),l=n(49524),u=n(12447),d=n(59443),p=n(95574),f=n(22232),m=n(83078),h=n(8125),g=n(55415),v=n(64909),y=n(65772),b=n(92932),w=n(17753),_=n(10002),C=n(52479),S=n(66265),x=n(16528),A=n(76974),I=n(77176),k=n(17343),E=n(93508),T=n(28043),R=n(18625),L=n(66310),M=n(40151),N=n(24209),F=n(91224),P=n(38194),O=n(598),B=n(83401),D=n(41398),W=n(55721),H=n(95093),U=n(16118),z=n(85985),X=n(40644),G=n(66910),V=n(91402),Y=n(38524),q=n(71517),$=n(46616),j=n(13338),Z=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,c.pipe)(e.view(Y.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,c.pipe)(t.get(n),v.map((function(e){var t=e.value;return 0===(0,j.v_)({cardTop:i.converters.windowToViewport(r),cardHeight:t.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}})})))})),m.MH)}};!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=function(t,n){return void 0===t&&(t=e.CARD_CONTENT_OFFSET_REM),void 0===n&&(n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM),function(e,r){return Math.round((e?n:t)*r)}}}(r||(r={})),function(e){e.cardPositionGetter=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,c.pipe)(e.view(Y.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,c.pipe)(t.get(n),v.map((function(e){var t=e.value;return(0,c.pipe)(r,v.fold((function(){return(0,s.flow)(q.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(t.positionState.absTop)}),s.identity))})))})),m.MH)}))}},e.cardPositionInViewportGetter=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,c.pipe)(e.view(Y.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,c.pipe)(t.get(n),v.chain((function(e){var a,o,l,u=e.value;return(0,c.pipe)(r,v.map(i.converters.windowToViewport),v.alt((function(){return v.some((0,s.flow)(q.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(u.positionState.absTop))})),v.map((a=u,o=function(e,t){return(0,c.pipe)(t.get(e),v.map((function(e){var n=e.index;return{before:(0,c.pipe)(t.getAt(n-1),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0}))),after:(0,c.pipe)(t.getAt(n+1),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0})))}})),v.getOrElse((function(){return{before:0,after:0}})))}(n,t),l=i.viewport,function(e){var t=(0,j.v_)({cardTop:e,cardHeight:a.positionState.height,viewportHeight:l.height,padding:o});return q.L.FromViewportTop.ISO.modify(q.L.concatC(-t))(e)})),v.map(i.converters.viewportToWindow))})))})),m.MH)}))}}}(i||(i={})),function(e){var t=function(e,t,n,r){var i=r.viewport.get(),a=r.scrollTop.get(),o=q.L.converters(a,q.r.FromWindowTop.ISO.unwrap(i.top),r.paddingTop.get());return p.vM((function(){return(0,c.pipe)(Y.nL.getLens(n),v.chain((function(t){return t.items.get(e)})),v.map((function(e){return q.L.AbsTop.ISO.wrap(e.value.positionState.absTop)})),v.map((function(e){return o.absTopToViewportTop(e)})),v.fold((function(){throw new f.ej("Cannot get offset for unknown card")}),(function(e){var n=o.windowToViewport(t);return q.L.FromViewportTop.ISO.unwrap(e)-q.L.FromViewportTop.ISO.unwrap(n)})))}))};e.moveCardToPositionSyncGetter=function(e,n){return function(r){return(0,c.pipe)(t(r.id,r.position,e.get(),n),y.chain((function(e){return n.moveCardsBy(e,"moveCardToPositionAnimated")})))}},e.moveCardToPositionAnimatedGetter=function(e,n){return function(r){return(0,c.pipe)(t(r.id,r.position,e.get(),n),y.fold((function(e){return V._(e)}),(function(e){return n.moveCardsByAnimated(e,"moveCardToPositionAnimated")})))}}}(a||(a={}));var J,K,Q,ee=n(32917);!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(J||(J={})),function(e){e.cardSuggestedPositionGetter=function(e,t){return function(n,r,i,a){var o="cardTop"===a?0:t(r);return(0,c.pipe)(e(n,(0,c.pipe)(i,v.map(q.r.FromWindowTop.ISO.modify(q.L.concatC(-o))))),y.map((function(e){return{top:e,contentOffset:o}})))}},e.getSuperScrollMapper=function(t,n,o){var s=a.moveCardToPositionAnimatedGetter(t,n),c=a.moveCardToPositionSyncGetter(t,n),l=r.contentOffsetGetter();return{setCardPosition:function(e,t,n,r){var i={top:r,contentOffset:l(t,o.get())};return(n?s({id:e,position:r}):A.of(c({id:e,position:r})).pipe(I.U(p.MH))).pipe(k.h(i),E.O(i),T.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(i.cardPositionGetter(t,n),(function(e){return l(e,o.get())})),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(i.cardPositionInViewportGetter(t,n),(function(e){return l(e,o.get())})),willFitViewport:Z(t,n)}}}(K||(K={})),function(e){e.getMapper=function(e,t,n){return{moveAlertHighlightInViewport:function(t,n,r){return e.ensureAlertHighlightInViewport(t,q.r.FromWindowTop.ISO.unwrap(n),r)},getMarkAlertPosition:function(r){return(0,c.pipe)(e.getMarkByAlert(r),v.chain((function(i){return(0,c.pipe)(i.getRect(),y.map(u.n.relativeToViewport),y.map((function(e){return v.some(e.top)})),y.getOrElse((function(){return n.debug("Cached alert is missing, falling back to flush"),function(n){return t.flushChanges(),(0,c.pipe)(e.getMarkByAlert(n),v.chain((function(e){return(0,c.pipe)(v.fromEither((0,c.pipe)(e.getRect(),y.map(u.n.relativeToViewport),y.map((function(e){return e.top})))))})))}(r)})),v.map(q.r.FromWindowTop.ISO.wrap))})))}}}}(Q||(Q={}));var te,ne;!function(){function e(e,t){this._cardPositions=e,this._markPositions=t,this._log=b.C8.Logging.root.getLogger("AlignmentViewModel")}e.prototype.alignCardToMark=function(e,t,n){var r=this,i=e.id,a=e.renderOptions.features,o=e.activeAlert,s=e.activeHighlightIndex;return R.P((function(){return A.of(r._markPositions.getMarkAlertPosition({alert:o,highlightIndex:s}))})).pipe(L.w(v.fold(M.c,(function(e){return A.of(e)}))),I.U((function(e){return{mark:e,card:p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,a.has(X.X.RenderOptions.Features.showLabel),v.some(e),"cardContentTop"))}})),L.w((function(e){var c=e.card,l=e.mark;return N.T(r._cardPositions.setCardPosition(i,a.has(X.X.RenderOptions.Features.showLabel),t===J.ANIMATE_ALL,q.r.FromWindowTop.ISO.modify(q.L.concatC(-c.contentOffset))(l)),C.Ft(r._markPositions.moveAlertHighlightInViewport({alert:o,highlightIndex:s},q.r.FromWindowTop.ISO.modify(q.L.concatC(c.contentOffset))(c.top),t===J.ANIMATE_ALL?d.uq.initial:d.uq.none))(n))})),k.h(C.PU),F.K((function(e){return r._log.error("Cannot align card to mark",e),M.c()})),P.B())},e.prototype.alignMarkToCard=function(e,t,n){var r=this,i=e.id,a=e.renderOptions.features,o=e.activeHighlightIndex,s=e.activeAlert;return R.P((function(){return A.of(r._markPositions.getMarkAlertPosition({alert:s,highlightIndex:o}))})).pipe(S.oA,L.w((function(e){var t=p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,a.has(X.X.RenderOptions.Features.showLabel),v.none,"cardContentTop"));return r._cardPositions.setCardPosition(i,a.has(X.X.RenderOptions.Features.showLabel),!1,q.r.FromWindowTop.ISO.modify(q.L.concatC(-t.contentOffset))(e)).pipe(T.x(),k.h((0,c.pipe)(n,v.filter((function(e){return r._cardPositions.willFitViewport(i,q.r.FromWindowTop.ISO.modify(q.L.concatC(-t.contentOffset))(e))})),v.getOrElse((function(){return q.r.FromWindowTop.ISO.modify(q.L.concatC(t.contentOffset))(t.top)})))))})),L.w((function(e){return r._markPositions.moveAlertHighlightInViewport({alert:s,highlightIndex:o},e,t===J.ANIMATE_ALL?d.uq.fake:d.uq.none)})),k.h(C.PU),F.K((function(e){return r._log.error("Cannot align mark to card",e),M.c()})),P.B())},e.prototype.alignMarkTo=function(e,t,n,r){var i=this;return R.P((function(){return A.of(i._markPositions.getMarkAlertPosition(t))})).pipe(I.U(v.map((0,s.flow)(q.r.FromWindowTop.ISO.modify((function(e){return e-q.r.FromWindowTop.ISO.unwrap(n)})),q.r.FromWindowTop.ISO.unwrap))),S.oA,L.w((function(e){return i._markPositions.moveAlertHighlightInViewport(t,n,r===J.ANIMATE_ALL?d.uq.initial:d.uq.none).pipe(k.h(e))})),L.w((function(t){var n=p.MH(i._cardPositions.getCardSuggestedPositionInViewport(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),v.none,"cardContentTop"));return i._cardPositions.setCardPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),!1,q.r.FromWindowTop.ISO.modify(q.L.concatC(t))(n.top))})),k.h(C.PU),F.K((function(e){return i._log.error("Cannot align mark to suggested position",e),M.c()})),P.B())},e.prototype.alignCardTo=function(e,t,n){var r=this,i=n!==J.NO_ANIMATION;return R.P((function(){return A.of(p.MH(r._cardPositions.getCardSuggestedPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),v.some(t),"cardTop")))})).pipe(L.w((function(t){return r._cardPositions.setCardPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),i,t.top)})),k.h(C.PU),F.K((function(e){return r._log.error("Cannot align card to required top",e),M.c()})),P.B())}}();!function(e){var t=function(){this.alignCardToMark=function(){return M.c()},this.alignMarkToCard=function(){return M.c()},this.alignCardTo=function(){return M.c()},this.alignMarkTo=function(){return M.c()}};e.Mock=t}(te||(te={})),function(e){var t,n;!function(e){var t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=function(e,n,r){return n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}}(t||(t={})),e.createAlignmentOnTypingEffect=function(e,t,n){var r=e.view(Y.nL.mapper((function(e){var t=e.currentLens;return(0,c.pipe)(v.some(t),v.filter(j.Bk))}))).pipe(I.U(v.chain(Y.In.getActiveItemWithAlert),v.filter(j.S4)),S.cp((function(e){return n.pipe(L.w(C.b2.rafScheduler),L.w((function(){return t.alignCardToMark(e,J.NO_ANIMATION,!1)})))})));return{id:"alignmentOnTyping",when:_.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(r.pipe(O.c(B.F())))}},e.createAlignOnDisjointedAreasEffect=function(e,n,r,i){var a=e.view((0,s.flow)(Y.nL.getLens,v.filter((function(e){return v.isNone(Y.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0})))),o=a.pipe(I.U(v.isSome),T.x(),L.w(C.Ft(r.changes.pipe(E.O(C.PU),L.w(C.b2.rafScheduler),I.U((function(){return v.some(function(e){var t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}}(r))})),I.U(v.filter((function(e){return e.top-e.bottom!=0})))))),D.M(a.pipe(I.U(v.map((function(e){return e.items})))),m.vB((function(r,a){return(0,c.pipe)(ee.YA(e,i),v.map((function(e){return{top:q.r.FromWindowTop.ISO.unwrap(e.top),bottom:q.r.FromWindowTop.ISO.unwrap(e.bottom)}})),v.chain((function(e){return(0,c.pipe)(function(e,n,r){var i=(0,c.pipe)(e.getAt(0),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0}))),a=t.getRelativePosition(n,r,i);switch(a){case t.RelativePosition.above:return(0,c.pipe)(e.getAt(0),v.map((function(e){return{card:e,top:n.top}})));case t.RelativePosition.below:return(0,c.pipe)(e.getAt(0),v.map((function(e){return{card:e,top:n.bottom-e.positionState.height}})));case t.RelativePosition.intersects:return v.none;default:return(0,f.vE)(a)}}(a,r,e),v.map((function(e){var t=e.card,r=e.top;return n.alignCardTo(t,q.r.FromWindowTop.ISO.wrap(r),J.NO_ANIMATION)})))})),v.getOrElse(M.c))}))),L.w(v.fold(M.c,l.y)));return{id:"alignOnDisjointedAreas",when:_.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(o.pipe(O.c(B.F())))}},e.createAlignOnResizeSideEffect=function(e,t,n,r){void 0===r&&(r=C.b2.rafScheduler);var i=e.view(Y.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).view(v.filter((function(e){var t=e.currentLens;return(0,j.Bk)(t)}))).view(v.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,c.pipe)(Y.In.getActiveItemWithAlert(t),v.filter(j.S4),v.map((function(e){return{card:e,source:n,lensId:t.id}})))}))),a=x.Qr.pipe(W.p(100),H.T(n),D.M(i,(function(e,t){return t})),L.w(r),L.w(v.fold(M.c,(function(e){var n=e.card;return t.alignCardToMark(n,J.NO_ANIMATION,!1)}))));return{id:"alignOnResizeSideEffect",when:_.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(a.pipe(O.c(B.F())))}},function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=function(e,t,r,i,a){void 0===i&&(i=function(e,t){return t}),void 0===a&&(a=C.b2.rafScheduler);var u=(0,h.Kg)(G.l.isAlertMinicardButtonClick,G.l.isSwitchToClosestByViewport,G.l.isAlertCardShow,G.l.isCardExpand),d=N.T(e.view(Y.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).pipe(E.O(v.none),I.U(v.map((function(e){return e.currentLens.id}))),U.G(),z.h((function(e){var t=e[0],n=e[1];return(0,c.pipe)(m.vB((function(e,t){return e!==t}))(t,n),v.exists(l.y))})),k.h(v.none)),e.view(Y.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).pipe(z.h(v.exists((function(e){var t=e.currentLens;return(0,j.Bk)(t)}))),I.U(v.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,c.pipe)(Y.In.getActiveItemWithAlert(t),v.filter(j.S4),v.map((function(e){return{card:e,source:n,lensId:t.id}})))}))))).pipe(T.x((0,s.flow)(m.vB((function(e,t){return e.lensId===t.lensId&&e.card.activeAlert.id===t.card.activeAlert.id&&e.card.visualState.transition.type===t.card.visualState.transition.type&&e.card.activeHighlightIndex===t.card.activeHighlightIndex})),v.exists(l.y)))),p=r.pipe(z.h(u),I.U(v.some),E.O(v.none),U.G(),z.h((0,s.flow)((0,s.tupled)(m.vB((function(e,t){return!G.l.isAlertCardShow(t)||!G.l.isAlertMinicardButtonClick(e)}))),v.getOrElse(s.constFalse))),I.U((function(e){var t=e[1];return(0,c.pipe)(t,v.filter(G.l.isAlertMinicardButtonClick),v.map(g.ei("clickPoint")))})),E.O(v.none)).pipe(L.w((function(e){return d.pipe(z.h(v.exists((function(e){return e.source===w.l$.sidebar}))),I.U((0,s.flow)(v.chain((function(t){return v.some((0,o.__assign)((0,o.__assign)({},t),{clickPoint:e}))})))))}))),f=d.pipe(z.h(v.exists((function(e){return e.source!==w.l$.sidebar}))),I.U((function(e){return(0,c.pipe)(e,v.chain((function(e){return v.some((0,o.__assign)((0,o.__assign)({},e),{clickPoint:v.none}))})))}))),y=N.T(p,f).pipe(E.O(v.none),U.G(),I.U((function(e){var t=e[0],n=e[1];return(0,c.pipe)(n,v.map((function(e){return{card:e.card,source:e.source,animate:(0,c.pipe)(t,m.wo((function(t){return t.lensId===e.lensId}))),clickPoint:(0,c.pipe)(n,v.chain(g.ei("clickPoint")),v.map((0,s.flow)(g.ei("y"),q.r.FromWindowTop.ISO.wrap)))}})))})),L.w(v.fold(M.c,a)),L.w((function(e){var r=e.card,a=e.source,o=e.animate,s=e.clickPoint;return(0,c.pipe)(i(r,a),(function(e){return e===n.skip?B.C:function(e,n,r,i){if(r===w.l$.text)return t.alignCardToMark(e,n?J.ANIMATE_ALL:J.NO_ANIMATION,!0);if(r===Y.h8.forceText)return t.alignCardToMark(e,J.NO_ANIMATION,!1);var a=r===w.l$.sidebar;return t.alignMarkToCard(e,a?n?J.ANIMATE_ALL:J.ANIMATE_MARK:J.NO_ANIMATION,i)}(r,o,e,s)}))})));return{id:"alignmentSideEffect",when:_.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(y.pipe(O.c(B.F())))}}}(ne||(ne={}))},38264:(e,t,n)=>{"use strict";n.d(t,{dv:()=>C,Xx:()=>K});var r,i=n(59312),a=n(95686),o=n(45980),s=n(73805),c=n(32952),l=n(42726),u=n(84966),d=n(72635);!function(e){var t;e.URI="IOOption",e.ioOption=(0,i.__assign)({URI:e.URI},(0,d.D)(a.io)),t=(0,s.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(r||(r={}));var p=n(22232),f=n(83078),m=n(8125),h=n(64909),g=n(65772),v=n(92932),y=n(17753),b=n(24273),w=n(10002),_=n(66910);var C,S=function(){function e(t,n){void 0===n&&(n=new URLSearchParams),this.base=t,this.params=n;var r=e._toString(t,n).length;(0,p.kG)(r<e.MAX_URL_LENGTH,"url exceeded length limit",String(r))}return e.prototype.addParams=function(t){var n,r=Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e.append(n,r),e}),(n=this.params,new URLSearchParams(n.toString())));return new e(this.base,r)},e.prototype.toString=function(){return e._toString(this.base,this.params)},e._toString=function(e,t){var n=t.toString();return e+(n.length?"?"+n:"")},e.MAX_URL_LENGTH=2083,e}(),x=n(73510),A=n(95053),I=n(598),k=n(40151),E=n(76974),T=n(66310),R=n(91402),L=n(77176),M=n(79462),N=n(83401),F=n(77843),P=n(93508),O=n(95093),B=n(85985),D=n(36919),W=n(2834),H=n(24209),U=n(49524),z=n(67434),X=n(38194),G=n(40250),V=n(45429),Y=n(41199),q=n(40644),$=n(50536),j=n(87280),Z=n(38524);!function(e){e.changeAlertEffect=function(e,t,n,r,i,a,o){return{id:"changeAlertEffect",when:w.R.isWithAlertsId,what:Z.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(T.w((function(t){var c=e.get();if(!Z.nL.hasCards(c))return R._(new p.ej("Cannot update state without cards"));switch(t.type){case _.l.Type.alertMinicardButtonClick:return(0,s.pipe)(r.getRegistered(t.alertHighlight.alert.id),h.fold((function(){return o.error("somehow we got click on non registered alert",{alert:Y.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,s.pipe)(r.getById(t.alertHighlight.alert.id),h.map(Y.$.fromModel),h.map(Y.$.snapshot)),state:Z.nL.snapshot($.Mq.snapshot)(c)}),k.c()}),(function(){return E.of(t.alertHighlight)})));case _.l.Type.cardMatchesNavigationButtonClick:var l=t.transitionTo;switch(l.kind){case"anotherAlert":return(0,s.pipe)("right"===t.direction?n.nextAlert(l.card):(0,s.pipe)(n.prevAlert(l.card),f.vx(n.anyRegisteredAlert(l.card))),h.fold(k.c,(function(e){return E.of({alert:e,highlightIndex:0})})));case"sameAlert":return(0,s.pipe)(r.getRegistered(l.card.activeAlert.id),h.fold(k.c,(function(){return E.of({alert:l.card.activeAlert,highlightIndex:l.highlightIndex})})));default:return(0,p.vE)(l)}case _.l.Type.switchToClosestByViewport:return function(e,t,n){var r=function(e){return(0,s.pipe)(t,h.map((function(t){return t.alignMarkToCard(e,V.DV.ANIMATE_ALL,h.none).pipe(I.c(k.c()))})),h.getOrElse((function(){return k.c()})))};return(0,s.pipe)(n((function(t){return(t.lensId===e.id||w.R.isMainLens(e.id))&&!y.bZ.isPremium(t)}),"middleOfTheViewport"),h.fold(k.c,(function(t){return(0,s.pipe)(Z.In.getActiveItemWithAlert(e),h.filter((function(e){return e.activeAlert.id===t.alert.id})),h.fold((function(){return E.of(t)}),r))})))}(c.currentLens,i,a);default:return k.c()}})),L.U((function(e){return{alertHighlight:e,alertSource:y.l$.sidebar,options:{order:"lensOrder"}}}))))}},e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r){var i=e.view(Z.nL.getActiveAlert).pipe(L.U(h.filter((function(e){return h.isSome(n.getRegistered(e.id))&&!y.bZ.isInPremiumLens(e)}))),T.w(h.fold(k.c,(function(i){return M.y.create((function(){return(0,s.pipe)(t.applyFeedback(i.id,{kind:u.PZ.LOOKED,subtype:b.J.getSubTypeFromLens(e.get().currentLens.id)},y.l$.sidebar),g.fold(r.handler("Failed to send LOOKED feedback").error,o.constVoid)),function(){h.isSome(n.getRegistered(i.id))&&(0,s.pipe)(t.applyFeedback(i.id,{kind:u.PZ.CLOSED,subtype:b.J.getSubTypeFromLens(e.get().currentLens.id)},y.l$.sidebar),g.fold(r.handler("Failed to send CLOSED feedback: ").error,o.constVoid))}}))}))));return{id:"sendActiveAlertFeedbacksEffect",when:o.constTrue,what:Z.nL.Effect.Applicator.create(i.pipe(I.c(N.F())))}}}(C||(C={}));var J,K=function(){function e(e,t,n,r,a,l,d,C,S,E,T,R){var M=this;this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._markOnboardingAsSeen=a,this._markMuteQuotedAdviceAsDismissed=l,this._sendToUpgradeExperiment=C,this._sendToSignInExperiment=S,this._checksFeedCapabilities=T,this._lensState=R,this._log=v.C8.Logging.getLogger("CardsViewModelImpl",v.zW.LogLevel.DEBUG),this._subs=new x.w.Keeper,this._flushCompleteTransition=new c.xQ,this._flushPositionAnimation=new c.xQ,this.actionEvents=new c.xQ,this.completePositionAnimation=new c.xQ,this.changePosition=new c.xQ,this._transitionBuffer=F.F(100).pipe(P.O(0),O.T(this._flushCompleteTransition)),this._positionAnimationBuffer=F.F(100).pipe(P.O(0),O.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(B.h(_.l.isStartTransitionTo),L.U((function(e){return function(t){var n=t.currentLens,r=M._applyStartVSChange(n.items,[[e.id,e.transition]]);return Z.nL.Prism.lensItems.set(r,t)}}))),this._completeTransitionStateChanges=this.actionEvents.pipe(B.h(_.l.isCompleteTransitionTo),D.f(this._transitionBuffer),B.h(m.Dw),L.U((function(e){return function(t){var n=t.currentLens,r=M._applyCompleteVSChange(n.items,e.map((function(e){return[e.id,e.transitionId]})));return M._log.isEnabled(v.zW.LogLevel.TRACE)&&M._log.trace("batch transition complete",{events:e,diff:A.aW.diff(n.items,r)}),Z.nL.Prism.lensItems.set(r,t)}}))),this._changePositionEffect=this.changePosition.pipe(L.U((function(e){var t=e.id,n=e.height;return function(e){var r=(0,s.pipe)(G.l.update(e.currentLens.items,t,(function(e){return M._checksFeedCapabilities.changePosition(j.Z.changeHeight(e.positionState,n))(e)})),g.fold((function(){return e.currentLens.items}),o.identity));return Z.nL.Prism.lensItems.set(r,e)}}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(D.f(this._positionAnimationBuffer),B.h(m.Dw),L.U((function(e){return function(t){var n=t.currentLens.items,r=e.map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0],r=t[1];return(0,s.pipe)(G.l.update(e,n,(function(e){return M._checksFeedCapabilities.changePosition(j.Z.changeAnimationInProgress(e.positionState,r))(e)})),g.fold((function(){return e}),o.identity))}),n);return Z.nL.Prism.lensItems.set(r,t)}}))),this._switchToNextChanges=this.actionEvents.pipe(B.h((function(e){return e.type===_.l.Type.switchToNext})),L.U((function(){return function(e){return e.patch({currentLens:(0,s.pipe)(e.currentLens.findNextAlert(),h.fold((function(){return(0,s.pipe)(Z.nL.getActiveAlert(e),h.fold((function(){throw new p.ej("Can not switch from non-existing card")}),(function(t){return e.currentLens.releaseAlert(t)})))}),(function(t){return e.currentLens.select(t)}))),switchOrder:"lensOrder",alertSource:y.l$.sidebar})}}))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(B.h(_.l.isDismissMuteQuotedAdvice),W.b(this._markMuteQuotedAdviceAsDismissed),L.U((function(){return function(e){var t=G.l.filter(e.currentLens.items,(0,m.W9)(q.X.isAlertCard,(function(e){return Y.$.isInQuotes(e.activeAlert)}))).keys().map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0];return(0,s.pipe)(G.l.update(e,n,M._cardFactory.hideMuteQuotedAdvice),g.fold((function(){return e}),o.identity))}),e.currentLens.items);return Z.nL.Prism.lensItems.set(t,e)}}))),this._toggleNonPriorityCards=this.actionEvents.pipe(B.h(_.l.isToggleNonPriorityCards),L.U((function(){return function(e){return e.patch({currentLens:(0,Z.yi)(e.currentLens)?e.currentLens.toggleNonPriorityList():e.currentLens})}}))),this._changeUserInput=this.actionEvents.pipe(B.h(_.l.isChangeUserInput),W.b((function(e){var t=e.alertId,n=e.userInput;M._alertsService.changeGapValue(t,n)})),L.U((function(e){var t=e.cardId,n=e.userInput;return function(e){var r=(0,s.pipe)(G.l.update(e.currentLens.items,t,(function(e){return M._cardFactory.updateUserInput(e,n?h.some(n):h.none)})),g.fold((function(){return e.currentLens.items}),o.identity));return Z.nL.Prism.lensItems.set(r,e)}}))),this._applyTakeawayFeedback=this.actionEvents.pipe(B.h(_.l.isTakeawayFeedbackAction),L.U((function(e){var t=e.alertId,n=e.type;return function(e){var r=G.l.filter(e.currentLens.items,(0,m.W9)(q.X.isAlertCard,(function(e){return e.activeAlert.id===t}))).keys().map((function(e){return(0,o.tuple)(e,n)})).reduce((function(e,t){var n=t[0],r=t[1];return(0,s.pipe)(G.l.update(e,n,(function(e){return q.X.isAlertCard(e)?M._cardFactory.updateTakeawayFeedback(e,h.some(r===_.l.Type.takeawayCorrectlyDetected?y.TO.correctlyDetected:r===_.l.Type.takeawayIncorrectlyDetected?y.TO.incorrectlyDetected:(0,p.vE)(r))):e})),g.fold((function(){return e}),o.identity))}),e.currentLens.items);return Z.nL.Prism.lensItems.set(r,e)}}))),this._sendToUpgrade=(0,s.pipe)(this._sendToUpgradeExperiment,h.map((function(e){return e(M.actionEvents)}))),this._sendToSignIn=(0,s.pipe)(this._sendToSignInExperiment,h.map((function(e){return e(M.actionEvents)}))),this._sendFeedback=(0,o.flow)((function(e,t){return M._alertsService.applyFeedback(e,(0,i.__assign)((0,i.__assign)({},t),{subtype:b.J.getSubTypeFromLens(M._lensState.get().currentLens.id)}),y.l$.sidebar)}),g.fold(this._log.handler("error calling alert service to send a feedback").error,o.constVoid)),this._showIgnoreForm=new c.xQ,this._showIgnoreFormEffect=(0,s.pipe)(this._showIgnoreForm,L.U((function(e){return function(t){return Z.nL.Prism.lensItems.set(M._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)}}))),this._handleAlertIgnore=(0,o.flow)(Q((function(e){return function(){return M._sendFeedback(e,{kind:u.PZ.IGNORE})}}),(function(e){return function(){return M._showIgnoreForm.next(e)}})),(function(e){return M.actionEvents.pipe(B.h(_.l.isAlertIgnoreAction)).subscribe((function(t){return e(t)()}))})),this.applicatorEffects={id:"cardsViewModel.effects",when:w.R.isWithAlertsId,what:Z.nL.Effect.Applicator.create(H.T(this._startTransitionStateChanges,this._completeTransitionStateChanges,this._changePositionEffect,this._transitionEndStateChanges,this._switchToNextChanges,this._dismissMuteQuotedAdvice,this._changeUserInput,this._applyTakeawayFeedback,this.actionEvents.pipe(B.h(_.l.isNavigation),W.b(this._navigationEvents),I.c(k.c())),(0,s.pipe)(this._sendToUpgrade,h.fold(k.c,U.y)),(0,s.pipe)(this._sendToSignIn,h.fold(k.c,U.y)),this._toggleNonPriorityCards,this._showIgnoreFormEffect))},this.hovered=this.actionEvents.pipe(B.h(_.l.isHoverAction),W.b((function(){return M._ops.flush()})),z.R((function(e,t){return"hover"===t.kind?h.some(t.id):(0,s.pipe)(e,h.filter((function(e){return e!==t.id})))}),h.none),X.B()),this.flushTransitionTo=function(){return M._flushCompleteTransition.next()},this.flushPositionAnimation=function(){return M._flushPositionAnimation.next()},this._subs.push(this._handleAlertFeedbacks(),this._handleTakeawayFeedbacks(),this._handleIngoreFormSubmit(),this._handleAlertIgnore(E),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen()),(0,s.pipe)(d,f.bw((function(e){return M._subs.push(M._handleMuteCategories(e))})))}return e.prototype._applyStartVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,s.pipe)(G.l.update(e,r,(function(e){return n._checksFeedCapabilities.transitionTo(i)(e)})),g.fold((function(){return e}),o.identity))}),e)},e.prototype._applyCompleteVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,s.pipe)(e.get(r),h.map((function(e){return e.value})),h.fold((function(){return g.right(e)}),(function(t){return"removed"===t.visualState.transition.type?g.right(e.remove(r)):G.l.update(e,r,(function(e){return e.visualState.transitionId===i?n._checksFeedCapabilities.completeTransition(i)(e):e}))})),g.fold((function(){return e}),o.identity))}),e)},e.prototype._handleAlertFeedbacks=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isAlertFeedbackAction)).subscribe((function(t){var n=t.alertId,r=t.feedbackType;return e._sendFeedback(n,{kind:r})}))},e.prototype._handleTakeawayFeedbacks=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isTakeawayAction)).subscribe((function(t){switch(t.type){case _.l.Type.takeawayCorrectlyDetected:return e._sendFeedback(t.alertId,{kind:u.PZ.ACCEPTED,replacementText:t.takeawayText});case _.l.Type.takeawayIncorrectlyDetected:return e._sendFeedback(t.alertId,{kind:u.PZ.IGNORE});case _.l.Type.takeawayDismiss:return e._sendFeedback(t.alertId,{kind:u.PZ.IGNORE,pnameQualifier:t.isLikelyToBeRead?u.N_.likelyToBeReadTakeaway:u.N_.unlikelyToBeReadTakeaway});case _.l.Type.takeawayResolve:return e._sendFeedback(t.alertId,{kind:u.PZ.ACKNOWLEDGED,pnameQualifier:t.isLikelyToBeRead?u.N_.likelyToBeReadTakeaway:u.N_.unlikelyToBeReadTakeaway});default:(0,p.vE)(t)}}))},e.prototype._handleIngoreFormSubmit=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isAlertIgnoreFeedbackFormSubmit)).subscribe((function(t){var n=t.alertId,r=t.reason;return e._sendFeedback(n,{kind:u.PZ.IGNORE,reason:r})}))},e.prototype._handleMuteCategories=function(e){var t=this;return this.actionEvents.pipe(B.h(_.l.isMuteCategoryAction)).subscribe((function(n){return(0,s.pipe)(e.muteCategories([n.categoryId],!0),g.fold(t._log.handler("error calling categories model to mute category").error,o.constVoid))}))},e.prototype._applyAlerts=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isAlertApplyAction)).subscribe((function(t){return(0,s.pipe)(e._alertsService.apply(t.alertId,t.alternativeIndex,y.l$.sidebar,b.J.getSubTypeFromLens(e._lensState.get().currentLens.id)),g.fold(e._log.handler("error calling alert service to apply an alert").error,o.constVoid))}))},e.prototype._dismissAlertsBatch=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isDismissAlertsBatchAction)).subscribe((function(t){return(0,s.pipe)(e._alertsService.dismissBatch(t.alerts,b.J.getSubTypeFromLens(e._lensState.get().currentLens.id)),g.fold(e._log.handler("error calling alert service to dismiss alerts batch").error,o.constVoid))}))},e.prototype._newFeatureSeen=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isOnboardingClose)).subscribe((function(t){return(0,s.pipe)(e._markOnboardingAsSeen(t.value))}))},e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=function(){var e=this;this.animate=l.hg.create(!0),this.clockwise=l.hg.create(!0),this.toggleAnimations=function(){return e.animate.modify((function(e){return!e}))},this.completePositionAnimation=new c.xQ,this.actionEvents=new c.xQ,this.flushTransitionTo=o.constVoid,this.sideEffect={id:"cardsViewModelMock",when:w.R.isWithAlertsId,what:Z.nL.Effect.Applicator.create(k.c())},this.changePosition=new c.xQ,this.dispose=m.ZT};e.Mock=t,function(e){e.sendToUpgrade=function(e,t,n){return function(r){return r.pipe(B.h((function(e){return e.type===_.l.Type.toUpgrade})),L.U((function(){return function(r){return n(),e.actions.openUrl(new S(t.funnel.plans).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenaliPremiumPreviewCard"})),r}})))}},e.sendToSignIn=function(e,t){return function(n){return n.pipe(B.h((function(e){return e.type===_.l.Type.toSignIn})),L.U((function(){return function(n){return e.actions.openUrl(new S(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n}})))}}}(e.Experiments||(e.Experiments={}))}(J||(J={}));var Q=function(e,t){return function(n){return function(i){return(0,s.pipe)(i.eligibleForDismissSurvey,a.of,r.chain((function(e){return(0,s.pipe)(n,a.map((function(t){return t?h.none:h.some(e)})))})),r.fold((function(){return e(i.alertId)}),(function(e){return t({id:i.id,options:e})})))}}}},24740:(e,t,n)=>{"use strict";n.d(t,{$:()=>W});var r,i=n(489),a=n(45980),o=n(73805),s=n(36991),c=n(67394),l=n(64909),u=n(65772),d=n(80229),p=n(17753),f=n(22232),m=n(59312),h=n(95574),g=n(53521);function v(e,t){var n=t.text;t.ops.reduce((function(t,n,r){return c.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):c.JU.isInsertGap(n)?(e.insertGap("",n,r),t):c.JU.isInsert(n)?t:c.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):c.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,f.vE)(n)}),n)}function y(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,o.pipe)(e,i.last,l.fold((function(){y(t.text)||e.push(t)}),(function(n){n.type===t.type?n.text+=t.text:e.push(t)})))}function w(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[];return v({insertString:function(t,n){if(n.type===c.JU.Type.Main)throw new k("Remove transform contains main insert",e)},insertGap:function(){throw new k("Remove transform contains gap insert",e)},retain:function(e,t){t.type!==c.JU.Type.Optional&&b(n,{type:g.GP.Text,text:e})},remove:function(e,t){var r=t.type;b(n,{type:r!==c.JU.Type.Main||y(e)?g.GP.Text:g.GP.Delete,text:e})}},t),n})),i.flatten)})),u.chain((0,a.flow)(u.fromPredicate((function(e){return e.length>0}),(function(){return new k("Remove transform contains no data",e)})),u.map((function(e){return{type:r.Type.Remove,remove:e}})))))}function _(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[];return v({insertString:function(t,n){if(n.type===c.JU.Type.Main)throw new k("Multi-remove transform contains main insert",e)},insertGap:function(){throw new k("Multi-remove transform contains gap insert",e)},retain:function(e){b(n,{type:g.GP.Text,text:e})},remove:function(e,t){var r=t.type;b(n,{type:r!==c.JU.Type.Main||y(e)?g.GP.Text:g.GP.Delete,text:e})}},t),n})))})),u.chain((0,a.flow)(u.fromPredicate((function(e){return e.length>=2&&e.every((function(e){return e.length>=2}))}),(function(){return new k("Incomplete multi-remove",e)})),u.map((function(e){return{type:r.Type.RemoveOr,removes:e}})))))}function C(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[];return v({insertString:function(e,t){var r=t.type;b(n,{type:r!==c.JU.Type.Optional?g.GP.Insert:g.GP.Text,text:e})},insertGap:function(){throw new k("Insert transform contains gap insert",e)},retain:function(e,t){(t.type!==c.JU.Type.Optional||n.length>0)&&b(n,{type:g.GP.Text,text:e})},remove:function(t,n){if(n.type===c.JU.Type.Main)throw new k("Insert transform contains main delete",e)}},t),n})))})),u.chain((0,a.flow)(d.fromArray,u.fromOption((function(){return new k("Incomplete insert",e)})),u.map((function(e){return{type:r.Type.Insert,inserts:e}})))))}function S(e){var t=e.reduce((function(e,t){var n=t[0],r=t[1],i=n.map((function(e){return e.text})).join("");return e.substitutions.push(i),e.inserts.push(r),i.length>e.longestSubstitution.length&&(e.longestSubstitution=i),e}),{substitutions:[],inserts:[],longestSubstitution:""}),n=t.substitutions,a=t.longestSubstitution,s=t.inserts,c=(0,o.pipe)(n,d.map((function(e){return a.split(e).join("")})));return(0,o.pipe)(i.zipWith(s,c,(function(e,t){return t&&e.push({type:g.GP.Text,text:t}),e})),d.fromArray,u.fromOption((function(){return new Error("Substitution processing error")})),u.map((function(e){return{type:r.Type.Substitution,remove:[{type:g.GP.Delete,text:a}],inserts:e}})))}function x(e){if(!("list"in e))return l.none;switch(e.list){case"bullet":case"dashed":case"ordered":return l.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return l.none}}function A(e){return(0,o.pipe)(e,u.fromPredicate((function(e){return 1===e.length}),(function(){return new k("Expected full-sentence transform to have 1 alternative",e)})),u.map((0,a.flow)(d.head,(function(t){var n={blockStart:0,ops:[],kind:g._k.PlainText};return v({insertString:function(e,t){var r=e.split("\n");if(1===r.length)n.ops.push({type:g.GP.Insert,text:e});else for(var i=(0,o.pipe)(t.attributes,x,l.fold((function(){return a.constVoid}),(function(e){var t=e.kind,r=e.indent;return function(){n.ops.splice(n.blockStart,1,{type:g.GP.List,kind:t,indent:r}),n={kind:g._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}}}))),s=0,c=r.length-1;s<=c;s++){var u=r[s];u&&n.ops.push({type:g.GP.Insert,text:u}),s<c&&(i(),n.blockStart=n.ops.length,n.ops.push({type:g.GP.Insert,text:"\n"}))}},insertGap:function(){throw new k("Full sentence transform contains gap insert",e)},retain:function(e){n.ops.push({type:g.GP.Text,text:e})},remove:function(e){n.ops.push({type:g.GP.Delete,text:e})}},t),n}))),u.chain((0,a.flow)(l.fromPredicate((function(e){return e.ops.length>0})),u.fromOption((function(){return new k("Got empty full sentence transform",e)})),u.map((function(e){var t=e.ops,n=e.kind;return{type:r.Type.FullSentence,ops:t,kind:n}})))))}function I(e){return(0,o.pipe)(h.vM((function(){return(0,f.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,o.pipe)(e,d.head,(function(e){var t=[],n=[],r=!1;return v({insertString:function(e,i){var a=i.type;b(r?n:t,{type:a!==c.JU.Type.Optional?g.GP.Insert:g.GP.Text,text:e})},insertGap:function(){(0,f.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain:function(e,i){var a=i.type,o=r?n:t;(a!==c.JU.Type.Optional||o.length>0)&&b(o,{type:g.GP.Text,text:e})},remove:a.constVoid},e),(0,f.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,f.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))})),u.map((function(e){var t=e.left,n=e.right;return{type:r.Type.OneGap,left:t,right:n}})),u.mapLeft(k.fromError(e)))}!function(e){!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.FullSentence=4]="FullSentence",e[e.OneGap=5]="OneGap"}(e.Type||(e.Type={})),function(e){e.parse=function(t){var n=t[0];if(n.isFullSentence)return e.FullSentence;switch(n.type){case c.r3.Type.Insert:return e.Insert;case c.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case c.r3.Type.Substitution:return n.ops.find(c.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,f.vE)(n.type)}}}(e.Type||(e.Type={})),e.create=function(t){var n=e.Type.parse(t);switch(n){case e.Type.Remove:return w(t);case e.Type.RemoveOr:return _(t);case e.Type.Insert:return C(t);case e.Type.Substitution:return function(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[[],[]];return v({insertString:function(e,t){t.type!==c.JU.Type.Optional&&b(n[1],{type:g.GP.Insert,text:"\n"===e?"¶ ":e})},insertGap:function(){throw new k("Substitution transform contains gap insert",e)},remove:function(e){b(n[0],{type:g.GP.Delete,text:e})},retain:function(e,t){if(t.type!==c.JU.Type.Optional||0!==n[0].length){var r={type:g.GP.Text,text:e};n[0].push(r),n[1].push(r)}}},t),(0,f.kG)(n[0].length>0,"Substituted part is empty"),(0,f.kG)(n[1].length>0,"Inserts are empty"),n})))})),u.chain(S),u.mapLeft(k.fromError(e)))}(t);case e.Type.FullSentence:return A(t);case e.Type.OneGap:return I(t);default:return(0,f.vE)(n)}}}(r||(r={}));var k=function(e){function t(t,n){var r=e.call(this,t)||this;return r.alternatives=n,r}return(0,m.__extends)(t,e),t.fromError=function(e){return function(n){var r=new t(n.message,e);return r.stack=n.stack,r}},t.prototype.toString=function(){return"Hydration error: "+this.message+"\n  ops: "+this.alternatives.map((function(e){return e.ops.map(c.JU.anonymize)}))},t}(f.sH),E=n(8125),T=n(92932),R=function(e,t){switch(e.kind){case"replacement":return function(e,t){(0,f.kG)((0,E.Dw)(e),"transforms should have at least one element");var n=e[0];return L(n)>-1?g.nV.create(M(n),e.map(N),t,!0):g.zE.create(e,t)}(e.content.map((function(e){return[{type:g.GP.Insert,text:e}]})),t);case"transform":return function(e,t){(0,f.kG)((0,E.Dw)(e),"transforms should have at least one element");var n=e[0];return L(n)>-1?g.nV.create(M(n),e.map(N),t):function(e){return 2===e.length&&P(e)}(e)?g.fi.create(e[0],e[1],t):P(e)?g.zE.create(e,t):g.n6.create(e,t)}(e.content.map(D),t);default:return(0,f.vE)(e.kind)}};function L(e){return e.findIndex((function(e){return"arrow"===e.type}))}function M(e){return e.slice(0,L(e))}function N(e){return e.slice(L(e)+1)}function F(e){return e.every((function(e){return"delete"!==e.type}))}function P(e){return e.every(F)}function O(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}var B=[O("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:g.GP.Delete,text:e[2]}})),O("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:g.GP.Insert,text:e[2]}})),O("(→)",(function(e){return{type:g.GP.Arrow}})),O("([^<>→]+)",(function(e){return{type:g.GP.Text,text:e[1]}}))];function D(e){function t(e){for(var t=0,n=B;t<n.length;t++){var r=n[t],i=e.match(r.re);if(null!==i)return[r.createResult(i),i[i.length-1]]}}function n(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map((function(e){return t.indexOf(e)}));if(n.findIndex((function(e){return 0===e}))>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter((function(e){return e>0})),(0,E.Dw)(n)){var r=Math.min.apply(Math,n);return[{type:g.GP.Text,text:t.substring(0,r)},t.substring(r)]}return[{type:g.GP.Text,text:t},""]}for(var r=[],i=e,a=!1,o=0,s=void 0;(0,E.Dw)(i);){var c=t(i);void 0===c&&(a=!0);var l=c||n(i),u=l[0],d=l[1];s&&s.type===g.GP.Text&&u.type===g.GP.Text?s.text+=u.text:(s&&s.type===g.GP.Delete&&u.type===g.GP.Insert&&(r.push({type:g.GP.Arrow}),o++),r.push(u)),u.type===g.GP.Arrow&&o++,s=r[r.length-1],i=d}return(a||!(0,E.Dw)(r)||o>1)&&T.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:o}),r}var W=(0,a.flow)((function(e){return(0,a.flow)((function(t){return H(e,p.eT.isFullSentence(t.cardType))(t.alternatives)}),u.chain(r.create))}),(function(e){return function(t){return(0,o.pipe)(t.content,u.fold((function(e){return u.right(R(e,t.todo))}),(0,a.flow)(e,u.map((function(e){return function(e,t){switch(e.type){case r.Type.Substitution:return g.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?g.fi.create(e.inserts[0],e.inserts[1],t):g.zE.create(e.inserts,t);case r.Type.Remove:return g.n6.create([e.remove],t);case r.Type.RemoveOr:return g.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case g._k.WithFormatting:return g.i3.createWithFormatting(e.ops,t);case g._k.PlainText:return g.i3.createPlainText(e.ops,t);default:return(0,f.vE)(e)}}(e,t);case r.Type.OneGap:return g.G7.create(e,t);default:return(0,f.vE)(e)}}(e,t.todo)})))))}}));function H(e,t){var n=(0,a.flow)(e,(function(e){return e.delta.reduce((function(e,t){return s.s.isInsertString(t)?e+t.insert:e}),"")}));return(0,a.flow)(function(e,t){return function(n){return(0,o.pipe)(n,i.filterMap((function(n){return(0,o.pipe)(n.type,l.map((function(r){var i=n.ops[0];if(i&&c.JU.isOptionalRetain(i)){var a=c.JU.length(i);return{text:e(a,n.lengthAffected-a),ops:n.ops.slice(1),type:r,isFullSentence:t}}return{text:e(0,n.lengthAffected),ops:n.ops,type:r,isFullSentence:t}})))})),d.fromArray)}}(n,t),u.fromOption((function(){return new Error("Alternative array is empty")})))}},50634:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r,i=n(42654);!function(e){e.eq=(0,i.getStructEq)({alert:(0,i.contramap)((function(e){return e.id}))(i.eqStrict),highlightIndex:i.eqStrict}),e.getEq=function(){return e.eq}}(r||(r={}))},19284:(e,t,n)=>{"use strict";n.d(t,{Py:()=>D,vM:()=>H,u0:()=>B,Dv:()=>P,VC:()=>O});var r,i,a=n(59312),o=n(22902),s=n(45980),c=n(73805),l=n(42726),u=n(22232),d=n(8125),p=n(83078),f=n(64909),m=n(65772),h=n(92932),g=n(71102),v=n(42654),y=n(41199);!function(e){var t,n,r;e.eq=v.fromEquals((function(t,r){return e.isActive(t)&&e.isActive(r)?g.getEq(n.eq).equals(t.alerts,r.alerts)&&t.count===r.count&&t.appearanceBehavior===r.appearanceBehavior&&t.kind===r.kind&&t.showNewLabel===r.showNewLabel&&t.applied===r.applied:t.kind===r.kind})),function(e){e.deactivated="deactivated",e.minimized="minimized",e.expanded="expanded"}(t=e.Kind||(e.Kind={})),function(e){e.eq=v.fromEquals((function(e,t){return y.$.eq.equals(e.alert,t.alert)}))}(n=e.AlertInBulk||(e.AlertInBulk={})),e.isExpanded=function(e){return e.kind===t.expanded},e.isMinimized=function(e){return e.kind===t.minimized},e.isDeactivated=function(e){return e.kind===t.deactivated},e.isActive=function(t){return(0,s.not)(e.isDeactivated)(t)},e.isVisibleInViewport=function(t){return e.isActive(t)&&t.appearanceBehavior===r.visibleInViewport},e.isInTransition=function(t){return e.isActive(t)&&t.appearanceBehavior===r.inTransition},e.isCollapsedInMiniButton=function(t){return e.isActive(t)&&r.isCollapsedInMiniButton(t.appearanceBehavior)},function(e){e.visibleInViewport="visibleInViewport",e.invisible="invisible",e.firstTimeCollapse="firstTimeCollapse",e.collapseInMiniButton="collapseInMiniButton",e.inTransition="inTransition"}(r=e.AppearanceBehavior||(e.AppearanceBehavior={})),function(e){e.isInvisible=function(t){return[e.invisible,e.inTransition].includes(t)},e.isCollapsedInMiniButton=function(t){return[e.collapseInMiniButton,e.firstTimeCollapse].includes(t)}}(r=e.AppearanceBehavior||(e.AppearanceBehavior={}))}(r||(r={})),function(e){!function(e){e.apply="apply",e.dismiss="dismiss",e.bulkUndo="bulkUndo",e.ignore="ignore",e.highlight="highlight",e.individualUndo="individualUndo",e.showPanel="showPanel",e.confirmed="confirmed",e.confirmedAll="confirmedAll",e.mount="mount"}(e.Kind||(e.Kind={}))}(i||(i={}));var b=n(17753),w=n(10002),_=n(99391),C=n(73510),S=n(52479),x=n(16118),A=n(50628),I=n(77176),k=n(93508),E=n(85985),T=n(66310),R=n(24209),L=n(2834),M=n(41398),N=n(38524),F=n(78792),P=function(e,t,n){return void 0===n&&(n=function(){return f.none}),function(r){if(!e(r))return t(r);var i=r.currentLens;return i.kind===N._L.abstract?f.none:(0,c.pipe)(i.findNextAlert(),f.alt((function(){return n(r)})),f.map(F.l.toLensAlert))}},O=function(e,t,n,r){return void 0===r&&(r=function(){return!0}),function(i){var a=i.currentLens;return a.kind===N._L.abstract?f.none:a.kind===N._L.persistent?(0,c.pipe)(N.nL.getActiveAlertHighlight(i),f.fold((function(){return a.findNextAlert()}),(function(t){return e.findNextAlertInTextByLens(t,a.id,N.nL.nonPriorityAlertsVisible(i))})),f.alt((function(){return r()&&(N.nL.isInGlobalSuccess(i)||w.R.isOutcomeId(i.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():f.none})),f.map(F.l.toLensAlert)):(0,c.pipe)(function(r){return(0,c.pipe)(r.currentLens.findNextAlert(),f.map(F.l.toLensAlert),f.alt((function(){return(0,c.pipe)(N.nL.getActiveAlertHighlight(r),f.fold((function(){return t(b.bZ.isRegisteredApplicableAlert,"cursor")}),(function(t){return e.findNextAlertInText(t,b.bZ.isApplicableAlert)})),f.map((function(e){return{alert:e.alert,highlightIndex:e.highlightIndex,lensId:n.get()}})))})))}(i),f.alt((function(){return(0,c.pipe)(e.findPremiumAlert(),f.map(F.l.toLensAlert))})))}};function B(e,t){return function(n,r){return t.findClosestAlertHighlight(e(r),n)}}var D,W=function(e){return e.pipe(x.G(),A.P((function(e){var t=e[0],n=e[1];return"idle"!==t&&"idle"===n})),I.U((function(){})))},H=function(){function e(e,t){this._subs=new C.w.Keeper,this.firstOpeningOfDocumentWithAlerts=l.hg.create(!1);var n=W(e),r=function(e){return(0,c.pipe)(e,E.h((function(e){return N.nL.hasCards(e)&&f.isSome(N.In.getActiveItem(e.currentLens))})),I.U((function(){})))}(t);this._subs.push((0,c.pipe)(t,A.P((function(e){return N.nL.hasCards(e)})),T.w((function(){return(0,c.pipe)(R.T(r,n),I.U(s.constFalse),k.O(!0))})),L.b(S.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}return e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=function(e){return function(t){if(!N.nL.hasCards(t))return t;switch(e.kind){case N.nL.Effect.FocusBehaviorType.noFocus:return t;case N.nL.Effect.FocusBehaviorType.unFocus:return N.nL.Prism.getLens().set(t.currentLens.unselect(),t);case N.nL.Effect.FocusBehaviorType.focusFirst:return(0,c.pipe)(t.currentLens.findFirstAlert(),f.fold((function(){return t}),(function(e){return N.nL.Prism.getLens().set(t.currentLens.select(e),t)})));case N.nL.Effect.FocusBehaviorType.focusNext:return(0,c.pipe)(t.currentLens.findNextAlert(),f.fold((function(){return t}),(function(e){return N.nL.Prism.getLens().set(t.currentLens.select(e),t)})));case N.nL.Effect.FocusBehaviorType.focusAlert:return N.nL.Prism.getLens().set(t.currentLens.select(e.alertHighlight),t);default:(0,u.vE)(e)}}},n=(0,d.HP)(h.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=function(e,t,r,i,a){var o=W(t),s=t.pipe(k.O("idle"),x.G(),A.P((function(e){return e[0],"idle"===e[1]})),E.h((function(e){return"full"===e[0]})),I.U((function(){}))),l=function(e,t){var n=W(e);return t.bigPaste.pipe(T.w((function(){return n})),I.U((function(){})),_.shareReplay({bufferSize:1,refCount:!0}))}(t,i);return(0,c.pipe)(R.T(o,s,l),M.M(e,a,r),E.h((function(e){e[0];var t=e[1],n=e[2];return e[3]&&!n&&N.nL.hasCards(t)&&f.isNone(N.In.getActiveItem(t.currentLens))})),I.U((function(){return N.nL.Effect.FocusBehavior.focusFirst})),L.b((function(e){return n("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e)})))},e.getSideEffect=function(e){var n=(0,c.pipe)(e,I.U(t));return{id:"autoFocusEffect",when:w.R.isWithAlertsId,what:N.nL.Effect.Applicator.create(n)}},e.whenFirstOpeningDocumentWithAlerts=function(e){return function(){return e.firstOpeningOfDocumentWithAlerts.get()}},e.whenShouldVerifyCurrentLens=function(e){return e.currentLens.shouldVerify&&(0,c.pipe)(N.nL.getActiveAlert(e),f.filter(b.bZ.isInDuplicatedState),f.fold((function(){return n("AutoFocus.stateValidator").debug("Current alert removed, should verify current lens...")}),(function(e){return n("AutoFocus.stateValidator").info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())}))),e.currentLens.shouldVerify},e.whenNoActiveCard=function(e){return e.currentLens.items.size>0&&f.isNone(N.In.getActiveItem(e.currentLens))};var i=function(e){return function(t){return(0,c.pipe)(e,p.bw((function(e){return n("AutoFocus.stateValidator").trace("willShowBulkAccept: ",e.state.get())})),f.map((function(e){return r.isVisibleInViewport(e.state.get())||e.willShowBulkAccept(t)})),p.bw((function(e){return n("AutoFocus.stateValidator").trace("willShowBulkAccept: ",e)})),f.getOrElse(s.constFalse))}};e.behaviorToEffect=function(e){return function(t){return function(r){return(0,c.pipe)(t(r)?e(r):f.none,p.bw((function(e){return n("AutoFocus.stateValidator").debug("'behavior triggered: "+e.kind)})))}}},e.getDefaultBehavior=function(){return(0,c.pipe)([(0,c.pipe)(e.whenShouldVerifyCurrentLens,e.behaviorToEffect((function(){return f.some(N.nL.Effect.FocusBehavior.focusNext)})))],(0,o.fold)((0,o.getFunctionMonoid)(f.getFirstMonoid())()))},e.getFocusFromCacheBehavior=function(t,n,r,a){return(0,c.pipe)([(0,c.pipe)(e.whenShouldVerifyCurrentLens,e.behaviorToEffect((function(){return f.some(N.nL.Effect.FocusBehavior.focusNext)}))),(0,c.pipe)((0,d.W9)((function(){return n.get()}),(0,d.W9)((0,d.W9)((0,d.W9)(e.whenFirstOpeningDocumentWithAlerts(r),(function(){return t})),e.whenNoActiveCard),(0,s.not)(i(a)))),e.behaviorToEffect((function(){return f.some(N.nL.Effect.FocusBehavior.focusFirst)})))],(0,o.fold)((0,o.getFunctionMonoid)(f.getFirstMonoid())()))},e.getFirstApiAlignmentOverride=function(){var e=l.hg.create(!0);return function(t,n){var r=n;return e.get()&&n===b.l$.api&&(r=b.l$.text),e.set(!1),r}},e.getStateTransformer=function(e,t,r,i,o,s){return function(l){var d=l.state,p=l.metadata,h=n("AutoFocus.stateTransformer");if(!N.nL.hasCards(d))return h.trace("state has no cards, returning original state"),m.left({state:d,metadata:p});var g=e(d);if(h.trace("effect: ",{state:d,metadata:p,effect:g}),f.isNone(g))return h.trace("no effect selected, returning original state"),m.left({state:d,metadata:p});if(o(g.value),g.value.kind===N.nL.Effect.FocusBehaviorType.unFocus||g.value.kind===N.nL.Effect.FocusBehaviorType.noFocus)return m.left({state:N.nL.Prism.getLens().set(d.currentLens.unselect(),d),metadata:p});var v=i.get()&&"text"!==d.alertSource;return h.trace("shouldAutoFocus",{autoJumpEnabled:i,alertSource:d.alertSource,shouldAutoFocus:v}),(0,c.pipe)(g,f.chain((function(e){switch(e.kind){case N.nL.Effect.FocusBehaviorType.noFocus:case N.nL.Effect.FocusBehaviorType.unFocus:return f.none;case N.nL.Effect.FocusBehaviorType.focusFirst:return(0,c.pipe)(d.currentLens.findFirstAlert(),f.map((function(e){return(0,a.__assign)((0,a.__assign)({},e),{lensId:d.currentLens.id})})));case N.nL.Effect.FocusBehaviorType.focusNext:return t(d);case N.nL.Effect.FocusBehaviorType.focusAlert:return f.some((0,a.__assign)((0,a.__assign)({},e.alertHighlight),{lensId:d.currentLens.id}));default:(0,u.vE)(e)}})),f.map((function(e){return(0,u.kG)(f.isSome(r.getRegistered(e.alert.id)),"lens alert should be in registered state",(function(){return e.alert.toString()})),e})),f.fold((function(){return d.currentLens.kind===N._L.active?m.right(m.right({lensId:s.get(),alertSource:d.alertSource,options:{order:d.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}})):m.left({state:d,metadata:p})}),(function(e){var t=e.alert,n=e.highlightIndex,r=e.lensId;return d.currentLens.meta.filter(t)?m.left(v?{state:N.nL.Prism.getLens().set(d.currentLens.select({alert:t,highlightIndex:n}),d),metadata:{sourceId:"LSM.updateActiveState"}}:{state:d,metadata:p}):m.right(v?m.left({alertHighlight:{alert:t,highlightIndex:n},alertSource:d.alertSource,options:{lensId:r,order:d.switchOrder,toFocus:N.nL.Effect.FocusBehavior.focusFirst}}):m.right({lensId:r,alertSource:d.alertSource,options:{order:d.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}}))})))}}}(D||(D={}))},50536:(e,t,n)=>{"use strict";n.d(t,{Nf:()=>r,Ls:()=>A,YH:()=>i,IG:()=>a,EB:()=>E,Mq:()=>o});var r,i,a,o,s=n(59312),c=n(22902),l=n(45980),u=n(73805),d=n(60705),p=n(64909),f=n(22232),m=n(83078),h=n(65772),g=n(89943),v=n(92932),y=n(17753),b=n(10002),w=n(58199),_=n(41199),C=n(40644),S=n(17031),x=n(87280);function A(e,t,n,r,i,o,c){var d=function(e){function t(t,n,r){var i=v.C8.Logging.getLogger("CardFactory");return(0,u.pipe)(n,p.filter((function(e){return!r||(0,u.pipe)(t,p.exists((function(t){return e.id===t.id&&e.rev===t.revision})))})),p.alt((function(){return(0,u.pipe)(t,p.chain((function(t){return(0,u.pipe)(e(t),h.fold((function(e){return i.error("Could not hydrate transform",e,{alertId:t.id}),n}),(function(e){return p.some({id:t.id,rev:t.revision,labels:e})})))})))})))}return function(e){var n=e.activeAlert.type===_.$.Type.super||e.activeAlert.type===_.$.Type.plagiarism||e.activeAlert.type===_.$.Type.premium||y.eT.isSimple(e.activeAlert.extraProperties.cardType)?p.none:t(e.activeAlert.getTransform(),e.cachedTransform,!(e.meta.checking!==C.X.Meta.CheckingState.Idle||e.activeAlertRemoved));return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,n,e.userInput)}}(e),g=v.C8.Logging.getLogger("CardFactory");function b(e,t){var n=new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,t,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput);return"focused"===t.transition.type||"expanded"===t.transition.type?d(n):n}function w(e,t){var n=S.t.to(e.visualState,t);return(0,u.pipe)(b(e,n),(function(n){return t.type===e.visualState.transition.type||"expanded"!==t.type&&"focused"!==t.type?n:H(n,x.Z.invalidateHeight(e.positionState))}))}function A(e,t,n,r){var i=new Set(t.map((function(e){return e.id}))),a=new Set(e.removedAlertsIds),o=(0,u.pipe)(n,p.map((function(t){return r.compare(e,t)>0})),p.getOrElse(l.constTrue));i.has(e.activeAlert.id)&&a.add(e.activeAlert.id);var s=e.alerts.reduce((function(t,n,r){return!i.has(n.id)||C.X.isFocused(e)&&n.id===e.activeAlert.id?{remainingAlerts:t.remainingAlerts.concat([n]),activeAlertIndex:t.activeAlertIndex}:{remainingAlerts:t.remainingAlerts,activeAlertIndex:t.activeAlertIndex+(r<e.activeAlertIndex?-1:0)}}),{remainingAlerts:[],activeAlertIndex:e.activeAlertIndex}),c=s.remainingAlerts,d=s.activeAlertIndex,f=C.X.willBeDisposed(e,i)?new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,i,e.cachedTransform,e.userInput):new C.X(e.id,c,d,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,a,e.cachedTransform,e.userInput);return f.scheduledToDispose?w(f,{type:"removed",clockwise:o}):f}function P(e,t,o,l,d,m,h,g){var v=function(e,t){var n=t[e];return(0,f.kG)(!!n,"Active alert index should point to an alert"),n}(o,t),w=F(v),A=(0,s.__spreadArrays)(t).sort(y.bZ.ord.compare).map((function(e){return _.$.fromModelWithTakeawayFeedback(e,c.getTakeawayFeedback(e.id))})),k=A[0];(0,f.kG)(!!k,"The card must contain at least 1 alert");var E=(0,u.pipe)(i,p.chain((function(e){return e.getAlertMuteCategory(t[0].id)}))),T=new C.X(e,A,I(v.id,A),l,x.Z.empty,S.t.initial({type:"rendered",clockwise:!0}),new C.X.Meta.Impl(d.percentile,d.explanation,d.checking,d.ranges,n.features.has(a.Features.enableMuteQuotedAdvice)&&_.$.isInQuotes(k),d.bundleInfo),m,a.toCardRenderOptions(n,m,r(k),g),E,k.getHighlightRanges()[0].end,k.id,new Set,p.none,w);return(0,u.pipe)(h,p.fold((function(){return T}),(function(e){return b(T,e)})))}function O(e,n,r,i,a){var o=n.alert,s=n.highlightIndex;void 0===a&&(a=function(e){return e}),(0,f.kG)(!e.removedAlertsIds.has(o.id),"Cannot select removed alert");var c=e.alerts.filter((function(t){return!e.removedAlertsIds.has(t.id)})),m=(0,u.pipe)(r,p.map((function(t){return i.compare(e,t)>0})),p.getOrElse(l.constTrue)),h=(0,u.pipe)(r,p.exists((function(t){return t.id===e.id}))),g=h?e.positionState:x.Z.invalidateHeight(e.positionState),v=h&&C.X.isCardOpen(e.visualState)?"expanded":"focused",y=(0,u.pipe)(t.getById(o.id),p.chain(F)),b=I(o.id,c),w=(0,u.pipe)(r,p.fold((function(){return S.t.initial({type:v,clockwise:m})}),(function(t){return S.t.to(e.visualState,{type:v,clockwise:m})})));return d(new C.X(e.id,c,b,s,g,w,a(e.meta,o),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,y))}var B=function(e){return t.isRegistered(e.id)};function D(e){var t=e.alerts;return p.fromNullable(t.slice(e.activeAlertIndex+1).find(B))}function W(e){var t=e.alerts;return p.fromNullable(t.slice(0,e.activeAlertIndex).reverse().find(B))}function H(e,t){return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,t,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}return{shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:P,createFromAlert:function(e){return function(t){return P(t.id,[t],0,0,C.X.Meta.empty(y.bZ.isApplicableAlert(t)?t.explanation:void 0),e,p.none,!1)}},createFocused:function(e){return M(e,(function(t,r,i){return P(t,[r],0,i,N(r,n),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!1)}),(function(t,n,r){return P(t,n,r,0,T(n),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!1)}))},createFocusedBundle:function(e){return function(t,n,r,i){return P(t,r,i,0,E(n,r,r[i]),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!0)}},createRendered:function(e){return M(e,(function(t,r){return P(t,[r],0,0,N(r,n),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!1)}),(function(t,n){return P(t,n,0,0,T(n),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!1)}))},createRenderedBundle:function(e){return function(t,n,r){return P(t,r,0,0,E(n,r,r[0]),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!0)}},createAdded:function(e){return M(e,(function(t,r){return P(t,[r],0,0,N(r,n),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!1)}),(function(t,n){return P(t,n,0,0,T(n),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!1)}))},createAddedBundle:function(e){return function(t,n,r){return P(t,r,0,0,E(n,r,r[0]),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!0)}},select:O,prevAlert:W,nextAlert:D,anyRegisteredAlert:function(e){var n=e.alerts;return(0,u.pipe)(n.filter((function(e){return t.isRegistered(e.id)})),(function(e){return e[e.length-1]}),p.fromNullable)},selectNextAlert:function(e,t,n){return void 0===n&&(n=function(e){return e}),e.activeAlertRemoved&&!e.scheduledToDispose?(0,u.pipe)(D(e),m.vx(W(e)),p.map((function(r){return O(e,{alert:r,highlightIndex:0},p.none,t,n)})),p.getOrElse((function(){return e}))):e},unselect:function(e,t,n){var r=(0,u.pipe)(t,p.map((function(t){return n.compare(e,t)>0})),p.getOrElse(l.constTrue)),i=(0,u.pipe)(t,p.exists((function(t){return t.id===e.id})))?e.positionState:x.Z.invalidateHeight(e.positionState);return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,i,e.scheduledToDispose||o&&!_.$.isPriority(e.activeAlert)&&"hidden"===e.visualState.transition.type?e.visualState:S.t.to(e.visualState,{type:"rendered",clockwise:r}),e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addBundleAlerts:function(e,t){(0,f.kG)(e.renderOptions.showBundle,"cannot add new alerts to a non-bundled card");var n=e.alerts.concat(t.map((function(e){return _.$.fromModelWithTakeawayFeedback(e,c.getTakeawayFeedback(e.id))}))).sort(_.$.ord.compare);return new C.X(e.id,n,I(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addPlagiarismAlerts:function(e,t){var n=e.alerts.concat(t.map(_.$.fromModel)).sort(_.$.ord.compare).filter((function(t){var n=_.$.isPlagiarism(t);return n||g.error("Encountered non-plagiarism alert in plagiarism card",{alert:t,cardId:e.id}),n}));return L(new C.X(e.id,n,I(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput),n)},remove:A,changePlagiarismMetaWithAlerts:L,updateWith:function(e,t,r){(0,f.kG)(void 0!==e.alerts.find((function(e){return e.id===t.id})),"can not receive updates for unknown alert",(function(){return t.toString()}));var i=function(e,t){var r;r=y.bZ.getCheckingState(t)===y.bZ.CheckingState.CHECKING?"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type?C.X.Meta.CheckingState.Checking:C.X.Meta.CheckingState.Full:C.X.Meta.CheckingState.Idle;var i=R(t,r,n);return new C.X(e.id,e.alerts.map((function(e){return e.id===t.id?_.$.fromModelWithTakeawayFeedback(t,c.getTakeawayFeedback(e.id)):e})),e.activeAlertIndex,k(e,i),e.positionState,e.visualState,i,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}(e,t);switch(t.state.type){case y.bZ.State.Type.REGISTERED:var a="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?d(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?w(a,{type:"focused",clockwise:i.visualState.transition.clockwise}):a;case y.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((function(e){return y.bZ.isCapiDone(e)&&e.allowUpdate&&y.bZ.isRated(i.activeAlert)}))?A(i,[t],p.none,r):w(i,{type:"presuccess",clockwise:i.visualState.transition.clockwise});case y.bZ.State.Type.APPLIED:case y.bZ.State.Type.BEING_APPLIED:return A(i,[t],p.none,r);default:return(0,f.vE)(t.state)}},changePosition:H,transitionTo:w,completeTransition:function(e,t){return b(e,S.t.complete(e.visualState,t))},hideMuteQuotedAdvice:function(e){return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new C.X.Meta.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1,e.meta.bundleInfo),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},updateUserInput:function(e,t){return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,t)},updateTakeawayFeedback:function(e,t){return new C.X(e.id,e.alerts.map((function(n,r){return r===e.activeAlertIndex?_.$.updateTakeawayFeedback(n,t):n})),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}}}function I(e,t){var n=t.findIndex((function(t){return t.id===e}));return(0,f.kG)(-1!==n,"Alert must exist"),n}function k(e,t){if((0,f.kG)(t.ranges.length>0,"Incorrect card meta: rangeIds empty. Card ID "+e.id+", activeAlert: "+e.activeAlert.toString()),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;var n=e.meta.ranges[e.activeHighlightIndex];return(0,f.kG)(void 0!==n,"AHI not found in rangeIds"),(0,u.pipe)(p.some(t.ranges.findIndex((function(e){return e.meta.id===n.meta.id}))),p.filter((function(e){return-1!==e})),p.alt((function(){return g.OI(t.ranges,n,d.SV.ordEnd)})),p.getOrElse((function(){return t.ranges.length-1})))}function E(e,t,n){var r=t.map((function(e){return e.getHighlightRanges()[0]}));return new C.X.Meta.Impl(w.g.fromRatio(n.progress),n.explanation,C.X.Meta.CheckingState.Idle,r,!1,p.some(e))}function T(e){var t=e.map((function(e){return e.getHighlightRanges()[0]})),n=(0,u.pipe)(e.map((function(e){return w.T.groupSum.concat(w.T.MAX,w.T.groupSum.inverse(e.progress))})),(0,c.fold)(w.T.groupSum),w.g.fromRatio);return new C.X.Meta.Impl(n,"",C.X.Meta.CheckingState.Idle,t,!1,p.none)}function R(e,t,n){var r=n.features.has(a.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new C.X.Meta.Impl(w.g.fromRatio(e.progress),e.explanation,t,e.getHighlightRanges(),r,p.none)}function L(e,t){var n=T(t);return new C.X(e.id,e.alerts,e.activeAlertIndex,k(e,n),e.positionState,e.visualState,n,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}function M(e,t,n){switch(e){case b.R.SpecialId.Plagiarism:return n;case b.R.SpecialId.AllAlerts:case b.R.SpecialId.Correctness:case b.R.SpecialId.Clarity:case b.R.SpecialId.Engagement:case b.R.SpecialId.Delivery:case b.R.SpecialId.CorrectnessPriority:case b.R.SpecialId.ClarityPriority:case b.R.SpecialId.EngagementPriority:case b.R.SpecialId.DeliveryPriority:case b.R.SpecialId.Priority:case b.R.SpecialId.PredictionTakeaways:case b.R.SpecialId.PredictionEmogenie:case b.R.SpecialId.Vox:case b.R.SpecialId.VoxPriority:case b.R.SpecialId.RealTimeProofit:return t;default:return(0,f.vE)(e)}}function N(e,t){return R(e,y.bZ.getCheckingState(e)===y.bZ.CheckingState.IDLE?C.X.Meta.CheckingState.Idle:C.X.Meta.CheckingState.Full,t)}function F(e){return y.bZ.isOneGap(e)&&""!==e.gapValue?p.some(e.gapValue):p.none}!function(e){e.mock={getTakeawayFeedback:function(){return p.none}}}(r||(r={})),function(e){e.yellow="yellow",e.gray="gray"}(i||(i={})),function(e){var t;e.toCardRenderOptions=function(e,n,r,i){var a=new Set;return(b.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==b.R.SpecialId.Plagiarism)&&a.add(C.X.RenderOptions.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&a.add(C.X.RenderOptions.Features.enableMuteQuotedAdvice),e.features.has(t.showBulkAcceptIcon)&&a.add(C.X.RenderOptions.Features.showBulkAcceptIcon),e.features.has(t.showAnonymousUserFooters)&&a.add(C.X.RenderOptions.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&a.add(C.X.RenderOptions.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&a.add(C.X.RenderOptions.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&a.add(C.X.RenderOptions.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&a.add(C.X.RenderOptions.Features.showPersistentPremiumCardLabels),{features:a,layoutDensity:e.cardLayoutDensityMode,isNew:r,upgradeDemoPremiumNotice:e.upgradeDemoPremiumNotice,showBundle:i}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showBulkAcceptIcon="showBulkAcceptIcon",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:C.X.RenderOptions.Density.cozy,shouldAnimateAlertApply:y.bZ.isAccepted,upgradeDemoPremiumNotice:i.yellow}}(a||(a={})),function(e){e.snapshot=function(e){return{cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,u.pipe)(e.alerts.map((function(e){return e.id}))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex}}}(o||(o={}))},10584:(e,t,n)=>{"use strict";n.d(t,{R7:()=>d});var r=n(64909),i=n(10002),a=n(66910),o=n(52479),s=n(77176),c=n(38524),l=n(13338),u={cardsBeyondViewport:5,cardsAroundActive:100},d=function(e,t,n,d,p,f){void 0===p&&(p=u),void 0===f&&(f=o.b2.rafScheduler);var m=function(e){return!e.positionState.visible&&e.visualState.incomplete?(d.next({type:a.l.Type.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e},h=e.pipe(s.U(c.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return r.some({currentLens:t,alertSource:n})})))),g=(0,l.nM)(h,t.viewport,t.scrollTop,t.paddingTop,f).pipe(s.U((function(e){return{viewport:e.viewport,scrollTop:e.scrollTop,paddingTop:e.paddingTop,completeTransition:m}})),s.U((0,l.GC)({cardsBeyondViewport:p.cardsBeyondViewport,cardsAroundActive:p.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:i.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(g)}}},32917:(e,t,n)=>{"use strict";n.d(t,{i$:()=>f,YA:()=>m});var r=n(45980),i=n(73805),a=n(64909),o=n(52479),s=n(55935),c=n(93508),l=n(99391),u=n(38524),d=n(71517),p=n(46616),f=function(e){return o.Hl(e.scrollTop.pipe(s.T(1)),100,!0).pipe(c.O(!1),l.shareReplay({bufferSize:1,refCount:!0}))},m=function(e,t){var n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),a.chain((function(e){var t=e.items,o=e.cardsHeight;return(0,i.pipe)(t.getAt(0),a.map((function(e){var t=(0,r.flow)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:t,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(o))(t)}})))})))}},41394:(e,t,n)=>{"use strict";n.d(t,{o:()=>v});var r=n(73805),i=n(42726),a=n(65772),o=n(8125),s=n(92932),c=n(32952),l=n(79462),u=n(14611),d=n(16118),p=n(77176),f=n(93508),m=n(2834),h=n(76974),g=n(71517),v=function(e){var t=this;this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.hg.create(0),this.paddingTop=i.hg.create(0),this.viewport=i.hg.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new c.xQ,this.moveCardsBy=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),t.scrollOffset.next(e),a.right(void 0)},this.moveCardsByAnimated=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),l.y.create((function(n){return(0,r.pipe)(t._validateOffset(e,t),a.fold((function(e){return n.thrownError(e),o.ZT}),(function(){var r=2*t.viewport.get().height,i=Math.abs(e)>r?(e>0?1:-1)*r:e,a=e-i,o=u.f.createAnimationObservable(0,i,200).pipe(d.G(),p.U((function(e){var t=e[0];return e[1]-t})),f.O(a),m.b((function(e){return t.scrollOffset.next(e)}))).subscribe({error:function(e){return n.error(e)},complete:function(){return n.complete()}});return function(){return o.unsubscribe()}})))}))}};!function(){function e(){this.scrollOffset=h.of(42)}e.prototype.getContentOffset=function(e){throw new Error("Method not implemented.")},e.prototype.moveCardsBy=function(e,t){throw new Error("Method not implemented.")},e.prototype.moveCardsByAnimated=function(e,t){throw new Error("Method not implemented.")}}()},71517:(e,t,n)=>{"use strict";n.d(t,{r:()=>r,L:()=>i});var r,i,a=n(42654),o=n(19542),s=n(64681);!function(e){!function(e){e.ISO=(0,s.k4)()}(e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(a.eqNumber).equals}(e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(e.CardTop||(e.CardTop={})),e.concatC=function(e){return function(t){return e+t}};var t=function(e){return new o.aD(e)};e.converters=function(n,r,i){var a=t(e.concatC(i)).get,o=t(e.concatC(-n)).get;return{windowToViewport:t(e.concatC(-r)).get,viewportToWindow:t(e.concatC(r)).get,cardTopToViewport:o,viewportToCardTop:t(e.concatC(n)).get,absTopToViewportTop:function(e){return o(a(e))},absTopToCardTop:a}}}(i||(i={}))},46616:(e,t,n)=>{"use strict";n.d(t,{Db:()=>i});var r,i,a,o=n(42654),s=n(71517);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){var t=function(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=s.L.converters(e,s.r.FromWindowTop.ISO.unwrap(t.top),n)};e.Impl=t}(i||(i={})),function(e){var t=(0,o.getStructEq)({top:o.eqNumber,height:o.eqNumber});e.eqDimensionsTuple=(0,o.getTupleEq)(t,t)}(a||(a={}))},13338:(e,t,n)=>{"use strict";n.d(t,{S4:()=>w,Bk:()=>_,v_:()=>S,Sd:()=>x,nM:()=>k,GC:()=>E});var r=n(45980),i=n(73805),a=n(83078),o=n(64909),s=n(42654),c=n(89943),l=n(95053),u=n(77176),d=n(28043),p=n(66310),f=n(52479),m=n(2844),h=n(85985),g=n(87280),v=n(17031),y=n(38524),b=n(71517),w=function(e){return-1!==["focused","expanded"].indexOf(e.visualState.transition.type)&&!e.scheduledToDispose},_=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),a.wo((function(e){return!e.scheduledToDispose})))},C=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),a.wo((function(e){return!e.scheduledToDispose})))};function S(e){var t=e.cardTop,n=e.cardHeight,r=e.viewportHeight,i=e.padding,a=b.L.FromViewportTop.ISO.unwrap(t),o=a+n;return n>r?a:a<0?n+i.before<r?a-i.before:a:o>r?n+i.after<r?o-r+i.after:o-r:a<i.before?n+i.after+i.before<r?a-i.before:n+i.after<r?a-i.after:i.before:r-o<i.after&&n+i.after<r?i.after-(r-o):0}var x=function(e){return e.pipe(u.U(o.filter((function(e){var t=e.currentLens;return C(t)}))))},A=o.getEq(s.getStructEq({id:s.fromEquals(s.strictEqual),positionState:s.getStructEq({height:s.fromEquals(s.strictEqual),absTop:s.fromEquals(s.strictEqual)}),visualState:v.t.eq})),I=o.getEq(s.fromEquals((function(e,t){return A.equals(y.In.getActiveItem(e),y.In.getActiveItem(t))&&e.items.size===t.items.size&&c.Hx(e.items.keys(),t.items.keys(),(function(e,t){return e===t}))}))),k=function(e,t,n,r,a){return e.pipe(u.U(o.map((function(e){return e.currentLens.id}))),d.x(s.eqStrict.equals),u.U(o.isSome),p.w(f.Ft(m.aj(t,n,r,x(e).pipe(u.U(o.map((function(e){return e.currentLens}))),d.x(I.equals),p.w(a))))),h.h((function(e){e[0],e[1],e[2];var t=e[3];return(0,i.pipe)(t,o.exists(C))})),u.U((function(e){return{viewport:e[0],scrollTop:e[1],paddingTop:e[2]}})))},E=function(e){var t=e.cardsBeyondViewport,n=e.cardsAroundActive,s=e.changePosition;return function(e){var c=e.viewport,u=e.scrollTop,d=e.paddingTop,p=e.completeTransition;return function(e){var f=e.currentLens,m=function(e,t,n,r){return e.size<2||Math.floor(t.height/Math.min(a.MH(e.getAt(0)).positionState.height,a.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,l.aW.lowerBound(e,(function(e){return e.positionState.absTop+e.positionState.height<n}))-r),to:Math.min(e.size,l.aW.lowerBound(e,(function(e){return e.positionState.absTop<n+t.height}))+r)}}(f.items,c,u-d,t),h=!1,v=f.items.map((function(e,t,a){var c,l,u=(0,r.flow)((c=s,l=e.positionState.watched||function(e){return m.from<=e&&m.to>e||(0,i.pipe)(f.cardIndex,o.exists((function(t){return e>=t-n&&e<=t+n})))}(a),function(e){return e.positionState.visible!==l?c.changePosition(g.Z.changeVisible(e.positionState,l))(e):e}),function(e){return function(t){return!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(g.Z.changeAnimationInProgress(t.positionState,!1))(t):t}}(s),p)(e);return u!==e?(h=!0,u):e}));return h?y.nL.Prism.lensItems.set(v,e):e}}}},62712:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});var r,i=n(71102),a=n(73805),o=n(42654),s=n(22232),c=n(64909),l=n(78090),u=n(89881),d=n(87280),p=n(17031);!function(e){e.id="BulkAcceptItemId";var t=i.getEq(o.fromEquals((function(e,t){return e.alert.id===t.alert.id})));e.eqByAlerts=o.fromEquals((function(e,n){return e.alerts.length===n.alerts.length&&t.equals(e.alerts,n.alerts)})),e.eq=o.fromEquals((function(t,n){return e.eqByAlerts.equals(t,n)&&d.Z.eq.equals(t.positionState,n.positionState)&&p.t.eq.equals(t.visualState,n.visualState)&&t.visibilityState===n.visibilityState})),e.isBulkAcceptItem=function(e){return e.kind===u.h.bulkAccept},e.updateAlerts=function(e,t){return new f(t,e.visibilityState,e.positionState,e.visualState,e.showNewLabel)},e.changePosition=function(e){return function(t){return new f(e.alerts,e.visibilityState,t,e.visualState,e.showNewLabel)}},e.completeTransition=function(e,t){return new f(e.alerts,e.visibilityState,e.positionState,p.t.complete(e.visualState,t),e.showNewLabel)},e.transitionTo=function(e,t){return new f(e.alerts,e.visibilityState,e.positionState,p.t.to(e.visualState,t),e.showNewLabel)},e.select=function(e,t){(0,s.kG)("dismissed"!==e.visibilityState,"Cannot select dismissed Bulk Accept Item");var n=(0,a.pipe)(t,c.exists((function(t){return t.id===e.id})))?e.positionState:d.Z.invalidateHeight(e.positionState),r={type:"focused",clockwise:!0},i=(0,a.pipe)(t,c.fold((function(){return p.t.initial(r)}),(function(){return p.t.to(e.visualState,r)})));return new f(e.alerts,e.visibilityState,n,i,e.showNewLabel)},e.unselect=function(e,t){var n=(0,a.pipe)(t,c.exists((function(t){return t.id===e.id})))?e.positionState:d.Z.invalidateHeight(e.positionState),r="hidden"===e.visualState.transition.type?e.visualState:p.t.to(e.visualState,{type:"rendered",clockwise:!0});return new f(e.alerts,e.visibilityState,n,r,e.showNewLabel)}}(r||(r={}));var f=function(){function e(e,t,n,i,a){this.alerts=e,this.visibilityState=t,this.positionState=n,this.visualState=i,this.showNewLabel=a,this.kind=u.h.bulkAccept,this.id=r.id}return e.prototype.equals=function(e){return r.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,l.AC)(this.alerts.map((function(e){return e.alert.id})).join())},e}()},78792:(e,t,n)=>{"use strict";n.d(t,{l:()=>L});var r=n(59312),i=n(95686),a=n(45980),o=n(73805),s=n(65772),c=n(64909),l=n(22232),u=n(92932),d=n(10002),p=n(32952),f=n(77176),m=n(76974),h=n(95300),g=n(24209),v=n(99391),y=n(66310),b=n(52479),w=n(69935),_=n(91224),C=n(41398),S=n(2834),x=n(28043),A=n(598),I=n(83401),k=n(41199),E=n(40644),T=n(38524),R=n(20490),L=function(){function e(e,t,n,l,A,I){var E=this;this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=l,this._stateSideEffects=A,this._stateTransformer=I,this.focusLens=function(e,t,n){void 0===n&&(n={toFocus:T.Zz.defaultOptions.focusBehavior}),E._log.debug("focusLens "+e),E._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=function(e,t,n){E._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=u.C8.Logging.getLogger("FocusedLensManagerImpl"),this._switchLensActions=new p.xQ,this._switchAlertActions=new p.xQ,this._addMetadata=function(e){return function(t){return t.pipe(f.U((function(t){return{source:t,metadata:e}})))}},this._focusLensEffect=function(e){var t=e.lensId,n=e.alertSource,r=e.options,i=r.toFocus,a=void 0===i?T.Zz.defaultOptions.focusBehavior:i,s=r.order;if(E._log.debug("_focusLensEffect ",{alertSource:n,lensId:t}),d.R.isClosedId(t))return(0,o.pipe)(m.of(T.nL.Effect.Applicator.Source.override((0,R.T)())),E._addMetadata({sourceId:"LSM.focusLensEffect"}));var c=E._state.get(),l=c.patch({switchOrder:s||c.switchOrder,alertSource:n});return(0,o.pipe)(E._stateProvider.getLensEventsByLensId(l,t,{focusBehavior:a}),E._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=function(e){var t=e.alertHighlight,n=e.alertSource,r=e.options;E._log.isEnabled(u.zW.LogLevel.TRACE)&&E._log.trace("focusAlert("+t.alert+")");var i=E._state.get(),a=i.patch({switchOrder:r.order||i.switchOrder,alertSource:n});return(0,o.pipe)(E._stateProvider.getLensEventsByAlert(a,function(e,t,n){if(e===d.R.SpecialId.Priority||e===d.R.SpecialId.PredictionTakeaways||e===d.R.SpecialId.PredictionEmogenie||e===d.R.SpecialId.RealTimeProofit)return e;if(void 0!==n)return n;if(e===d.R.SpecialId.Closed||e===d.R.SpecialId.AllAlerts)return d.R.SpecialId.AllAlerts;return t}(i.currentLens.id,t.alert.lensId,r.lensId),t),E._addMetadata({sourceId:"LSM.focusAlertEffect"}))};var L=this._state.get(),M=new h.X(L);this._effects=g.T.apply(v,(0,r.__spreadArrays)(this._stateSideEffects.map((function(e){var t=e.when,n=e.what,r=e.id;return E._state.view("currentLens","id").view(t).pipe(y.w(b.Ft((0,o.pipe)(E._effectToApplicator(n),E._addMetadata({sourceId:r})))))})),[g.T(this._switchAlertActions.pipe(f.U(this._focusAlertEffect)),this._switchLensActions.pipe(f.U(this._focusLensEffect))).pipe(w.B())])),this._subs=[this._effects.pipe(_.K((function(e,t){return E._log.error("Got error from effects: ",e),t})),C.M(M,(function(e,t){var n=e.source,r=e.metadata;return{state:n(t),metadata:r}})),_.K((function(e,t){return E._log.error("Got error while applying new state: ",e),t})),f.U(this._stateTransformer),_.K((function(e,t){return E._log.error("Got error while transforming state: ",e),t}))).subscribe((function(e){return(0,o.pipe)(e,s.fold((function(e){var t=e.state,n=e.metadata;E._log.isEnabled(u.zW.LogLevel.TRACE)&&E._log.trace("lens state from: "+n.sourceId,t),(0,o.pipe)(E._checkState(t),s.fold((function(e){return E._log.error("incorrect state transition detected",{error:e,state:t})}),(function(){return M.next(t)})))}),s.fold((function(e){return E._switchAlertActions.next(e)}),(function(e){return E._switchLensActions.next(e)}))))})),(0,o.pipe)(M,f.U(T.nL.getActiveAlert),S.b((function(e){return E._log.trace("active alert: ",e)})),x.x(c.getEq(k.$.eq).equals),y.w(b.aI((function(e){return(0,o.pipe)(E._alertsService.takeReference(e,"activeCard"),s.mapLeft((function(e){return E._log.error("can not take alertRef",e)})),s.fold(i.of(a.constVoid),(function(e){return e.dispose})))})))).subscribe(),(0,o.pipe)(M,f.U(b.wW(this._state))).subscribe()],T.nL.hasCards(L)&&(0,o.pipe)(T.nL.getActiveAlertHighlight(L),c.filter((function(e){return E._alertsReader.isRegistered(e.alert.id)})),c.fold((function(){return E._switchLensActions.next({lensId:L.currentLens.id,alertSource:L.alertSource,options:{order:L.switchOrder,toFocus:T.nL.Effect.FocusBehavior.noFocus}})}),(function(e){return E._switchAlertActions.next({alertHighlight:e,alertSource:L.alertSource,options:{lensId:L.currentLens.id,order:L.switchOrder}})})))}return e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._effectToApplicator=function(e){var t=this;switch(e.type){case T.nL.Effect.Type.Applicator:return e.source;case T.nL.Effect.Type.SwitchLens:return e.source.pipe(S.b((function(e){return t._switchLensActions.next(e)})),A.c(I.F()));case T.nL.Effect.Type.SwitchAlert:return e.source.pipe(S.b((function(e){return t._switchAlertActions.next(e)})),A.c(I.F()));default:return(0,l.vE)(e)}},e.prototype._checkState=function(e){try{if(T.nL.hasCards(e)){var t=e.currentLens.items.filter(E.X.isFocused);(0,l.kG)(t.size<=1,"cannot have more than one focused card",(function(){return JSON.stringify(t)}))}}catch(e){return s.left(e)}return s.right(void 0)},e.toLensAlert=function(e){var t=e.alert;return{alert:t,highlightIndex:e.highlightIndex,lensId:t.lensId}},e}()},20490:(e,t,n)=>{"use strict";n.d(t,{T:()=>E,o:()=>T});var r=n(59312),i=n(45980),a=n(73805),o=n(22232),s=n(92843),c=n(64909),l=n(8125),u=n(83078),d=n(92932),p=n(41120),f=n(17753),m=n(10002),h=n(76779),g=n(66654),v=n(76974),y=n(85985),b=n(28043),w=n(77176),_=n(24209),C=n(16118),S=n(66310),x=n(93508),A=n(41199),I=n(38524),k=n(31346),E=function(){return I.nL.create({alertSource:f.l$.api,switchOrder:"lensOrder",currentLens:k.BI.create(i.constFalse)})},T=function(){function e(e,t,n,o,s,c,l,u){var p=this;this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=o,this._lensPreviewVM=s,this._lensViewFactory=c,this._alertsHandlerFactory=l,this._alertsFilterService=u,this._transformAlertsDiffToApplicator=function(e){return function(t){return function(n){return I.nL.hasCards(n)?n.patch({currentLens:e(t,(0,i.not)(f.bZ.isMuted))(n.currentLens)}):n}}},this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._lensAlerts=function(e){var t=p._alertsFilterService.alertVisibleInSidebar(e.id);return(0,a.pipe)(p._checkingState.get(),h.p.reduce([],(function(e,n){var i=n.alert;return t(i)?(0,r.__spreadArrays)(e,[i]):e})),(function(e){return e.sort(f.bZ.ord.compare)}))}}return e._mapByActiveLensId=function(e,t,n,r){if(m.R.isOutcomeId(e))return r();switch(e){case m.R.SpecialId.Plagiarism:return t();case m.R.SpecialId.Premium:return n();case m.R.SpecialId.AllAlerts:case m.R.SpecialId.Priority:case m.R.SpecialId.PredictionTakeaways:case m.R.SpecialId.PredictionEmogenie:case m.R.SpecialId.RealTimeProofit:return r();default:return(0,o.vE)(e)}},e._conditionedApplicator=function(e,t){return function(n){return function(r){return e(r,n)?t(n)(r):r}}},e._filterALEvents=function(e){return function(t){return v.of((0,a.pipe)(t,h.p.Diff.filter((function(t){return e(t.alert)})))).pipe(y.h((0,i.not)(s.v.isEmpty)))}},e.prototype.emptyState=function(e){return void 0===e&&(e=m.R.SpecialId.AllAlerts),I.nL.create({currentLens:this._createLens(e,this._lensPreviewVM.getLens(e).get(),[],c.none),alertSource:f.l$.api,switchOrder:"lensOrder"})},e.prototype.getLensEventsByLensId=function(e,t,n){var r=this;void 0===n&&(n={});var i=this._getActiveLensMeta(t),o=this._lensAlerts(i),s=this._createState(e,c.none,i,t,o),l=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,s):c.none;e.currentLens.id===t&&I.nL.hasCards(e)&&e.currentLens.activeAlertsCount!==o.length&&this._log.warn("Lens contains inconsistent number of alerts",i.id);var u=I.nL.hasCards(s)?(0,a.pipe)(l,c.fold((function(){return s}),(function(n){return r._createState(e,c.some(n),i,t,o)}))):s;return this._generateEventsFromState(u,this._alertsHandlerFactory(t))},e.prototype.getLensEventsByAlert=function(e,t,n){(0,o.kG)(c.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);var r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&I.nL.hasCards(e)?I.nL.Prism.getLens().set(e.currentLens.select(n),e):this._createState(e,c.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))},e.prototype.findClosestAlertHighlight=function(e,t){var n=this;return(0,a.pipe)(this._positionManager.findClosestToPosition(e,(function(e){return p.P.is(e)&&p.x.isVisible(e)&&!p.x.isApplied(e)&&(0,a.pipe)(n._alertsReader.getRegistered(e.meta.alertId),c.exists((function(r){return n._alertsFilterService.alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((function(t){return t.meta.id===e.meta.id}))})))})),c.chain((function(e){return(0,a.pipe)(n._alertsReader.getRegistered(e.meta.alertId),c.map((function(t){var r={alert:A.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((function(t){return t.meta.id===e.meta.id}))};return r.highlightIndex<0&&(n._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(n._positionManager.findRanges((function(e){return p.P.is(e)&&e.meta.alertId===t.id}))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r})))})))},e.prototype.findNextAlertInText=function(e,t){var n=e.alert,r=e.highlightIndex,i=n.getHighlightRanges();return(0,o.kG)(r<i.length,"AHI is out of highlightRanges length","hr length: "+i.length+", ahi: "+r),this.findClosestAlertHighlight(i[r].end,t)},e.prototype.findNextAlertInTextByLens=function(e,t,n){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,n))},e.prototype.findPremiumAlert=function(){return this._lensPreviewVM.getLens(m.R.SpecialId.Premium).get().count>0?(0,a.pipe)(this._checkingState.get(),h.p.find((0,i.flow)(f.bZ.fromAlertModel,(0,l.W9)(f.bZ.isRegistered,f.bZ.isPremium))),c.map((function(e){return{alert:A.$.fromModel(e.alert),highlightIndex:0}}))):c.none},e.prototype.hasZeroFreeAlerts=function(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount},e.prototype._getMetaChangesObservable=function(t){return I.nL.isPersistent(t)?this._lensPreviewVM.getLens(t.currentLens.id).view(e._updateMetaSource(t.currentLens.id)):I.nL.isLensview(t)?this._lenses.pipe(b.x(g.w.eq.equals),w.U((0,i.flow)(g.w.lookup(t.currentLens.id),c.map(e._updateMetaSource(t.currentLens.id)),c.getOrElse((function(){return I.nL.Effect.Applicator.Source.identity}))))):I.nL.Effect.Applicator.Source.empty},e.prototype._generateEventsFromState=function(t,n){var r=this;return _.T(this._checkingState.pipe(C.G(),w.U((function(e){var t=e[0],n=e[1];return h.p.diff(t,n)})),S.w(e._filterALEvents(t.currentLens.meta.filter)),w.U(e._conditionedApplicator((function(e,t){var n=(0,a.pipe)(t,h.p.Diff.filter((0,i.not)((function(t){return I.nL.fitsAlert(e)(t.alert)}))));return s.v.isEmpty(n)||r._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:h.p.Diff.show.show(n)}),s.v.isEmpty(n)}),this._transformAlertsDiffToApplicator(n)))),this._getMetaChangesObservable(t)).pipe(x.O(I.nL.Effect.Applicator.Source.override(t)))},e.prototype._getActiveLensMeta=function(t){var n=this,r=e._mapByActiveLensId(t,(function(){return n._lensPreviewVM.getLens(m.R.SpecialId.Plagiarism).get()}),(function(){return n._lensPreviewVM.getLens(m.R.SpecialId.Premium).get()}),(function(){return n._lensPreviewVM.getLens(t).get()}));return(0,o.kG)(void 0!==r,"unknown lensId:"+t),r},e.prototype._createState=function(e,t,n,r,i){var s=this,l=e.alertSource,d=e.switchOrder;(0,o.kG)(u.wo((function(e){var t=e.alert;return c.isSome(s._alertsReader.getInteractable(t.id))}))(t),"we can create state only with alert in registered state",(function(){return(0,a.pipe)(t,c.fold((function(){return"null"}),(function(e){return e.toString()})))}));var p=this._createLens(r,n,i,t);return I.nL.create({currentLens:p,alertSource:l,switchOrder:d})},e.prototype._createLens=function(e,t,n,r){var i=(0,a.pipe)(r,c.map((function(e){var t=e.alert,r=e.highlightIndex;return{alertIndex:n.findIndex((0,I.Tl)(t)),highlightIndex:r}})));return this._lensViewFactory.create(e,t,n,i)},e.prototype._getAlertToFocus=function(e,t){switch(e.kind){case I.nL.Effect.FocusBehaviorType.noFocus:case I.nL.Effect.FocusBehaviorType.unFocus:return c.none;case I.nL.Effect.FocusBehaviorType.focusFirst:return I.nL.hasCards(t)?t.currentLens.findFirstAlert():c.none;case I.nL.Effect.FocusBehaviorType.focusNext:return I.nL.hasCards(t)?t.currentLens.findNextAlert():c.none;case I.nL.Effect.FocusBehaviorType.focusAlert:return c.some(e.alertHighlight);default:(0,o.vE)(e)}},e._updateMetaSource=function(e){return function(t){return function(n){return e===n.currentLens.id?I.nL.Prism.getLens().set(n.currentLens.updateMeta(t),n):n}}},e}()},55969:(e,t,n)=>{"use strict";n.d(t,{is:()=>o,kn:()=>s,ad:()=>c,gi:()=>l});var r=n(22232),i=n(10002),a=n(31346),o=function(e,t){return function(n){if(i.R.isOutcomeId(n))return a.vj.WithSuccess.getAlertHandler(e,t);switch(n){case i.R.SpecialId.Plagiarism:return a.vj.Plagiarism.getAlertsHandler();case i.R.SpecialId.Premium:return a.vj.Premium.getAlertsHandler();case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return a.vj.WithSuccess.getAlertHandler(e,t);default:return(0,r.vE)(n)}}},s=function(e,t){return function(n){return e(n)?a.vj.Bundles.getAlertsHandler():t(n)}},c=(function(){function e(e,t,n,r,i){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._inner=r,this._capabilities=i}e.prototype.create=function(e,t,n,r){return i.R.isOutcomeId(e)||i.R.isAllAlerts(e)?a.rN.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._alertsReader,this._capabilities):this._inner.create(e,t,n,r)}}(),function(){function e(e,t,n,r,i,a){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._lensPredicate=r,this._inner=i,this._capabilities=a}return e.prototype.create=function(e,t,n,r){return this._lensPredicate(t)?a.d8.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._alertsReader,this._capabilities):this._inner.create(e,t,n,r)},e}()),l=function(){function e(e,t,n,r){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._capabilities=r}return e.prototype.create=function(e,t,n,o){var s=this,c=function(){return a.Z$.create(e,t,n.filter(s._alertsFilterService.alertVisibleInSidebar(e)),o,s._cardFactory,s._alertsReader,s._capabilities)};if(i.R.isOutcomeId(e))return c();switch(e){case i.R.SpecialId.Plagiarism:return a.Y6.create(t,n,o,this._cardFactory,this._alertsReader,this._capabilities);case i.R.SpecialId.Premium:return a.Ti.create(t,n,this._cardFactory,this._alertsReader);case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return c();default:return(0,r.vE)(e)}},e}()},31346:(e,t,n)=>{"use strict";n.d(t,{Z$:()=>R,d8:()=>L,Ti:()=>M,Y6:()=>N,BI:()=>F,rN:()=>P,vj:()=>r});var r,i=n(59312),a=n(26001),o=n(489),s=n(42654),c=n(45980),l=n(73805),u=n(84966),d=n(22232),p=n(83078),f=n(64909),m=n(8125),h=n(89943),g=n(65772),v=n(92843),y=n(17753),b=n(10002),w=n(95053),_=n(78090),C=n(40250),S=n(41199),x=n(40644),A=n(50536),I=n(87280),k=n(89881),E=n(62712),T=n(38524),R=function(){function e(t,n,r,i,a,o,s,c,u,f){this.id=t,this.meta=n,this.cardIndex=r,this.items=i,this.animation=a,this.isCardsHeightValid=o,this.cardsHeight=s,this._cardFactory=c,this._alertsReader=u,this._capabilities=f,this._remove=e.remove,this.type=T.Nm.lensview,this.kind=T._L.persistent,this.withPriorityList=!1,this.itemsOrd=e._ord,(0,d.kG)((0,l.pipe)(this.cardIndex,p.wo((function(e){return e>-1}))),"card index should be non negative number")}return e.initCardsHash=function(e,t,n,r,i,a){var o=this;(0,d.kG)((0,l.pipe)(r,p.wo((function(e){var t=e.alertIndex;return void 0!==n[t]}))),"Can not find alert for provided alertIndex");var s=w.aW.create(n.map((function(n,a){return(0,l.pipe)(r,f.exists((function(e){var t=e.alertIndex;return a===t})))?i.createFocused(e)(o.getCardId(t,n),n,(0,l.pipe)(r,f.fold((function(){return 0}),(function(e){return e.highlightIndex})))):i.createRendered(e)(o.getCardId(t,n),n)})),x.X.getId,a.compare);return{cardIndex:(0,l.pipe)(r,f.chain((function(e){var t=e.alertIndex;return s.find((function(e){return e.activeAlert.id===n[t].id}))})),f.map((function(e){return e.index}))),hash:s}},e.create=function(t,n,r,i,a,o,s){var c=e.initCardsHash(t,n,r,i,a,e._ord),l=c.hash;return new e(t,n,c.cardIndex,l,T.wj.skip,!1,0,a,o,s)},e.getCardId=function(e,t){return e.id+"_"+t.id},Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.exists((function(e){return y.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(T.In.getActiveItem(this),f.exists((function(e){return e.scheduledToDispose})))||f.isNone(this.items.find((function(e){return!e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,l.pipe)(r.getRegularCard(this.items,this.cardIndex),f.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),f.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.prototype.getCardId=function(t){return e.getCardId(this.meta,t)},e.prototype.releaseAlert=function(e){return this._remove([e])(this)},e.prototype.onAnimationFinish=function(t){return(0,d.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(e.isAlertVisible,this._capabilities)(t)(this)},e.prototype.select=function(e){var t=this,n=O(this),r=C.l.find(this.items,(0,m.W9)(B,(function(t){return t.activeAlert.id===e.alert.id})));(0,d.kG)(f.isSome(r),"Can not find card for provided alert. Unknown card or it is already disposed.",(function(){return e.alert.toString()}));var i=p.MH(r),a=i.value,o=i.index,s=(0,l.pipe)(n,f.map((function(e){return t.items.add((0,l.pipe)(e,t._capabilities.unselect({nextCard:f.some(a),ord:t.itemsOrd})))})),f.getOrElse((function(){return t.items}))).add((0,l.pipe)(a,this._capabilities.select({alertHighlight:e,previousCard:n,ord:this.itemsOrd,meta:f.none})));return new this.constructor(this.id,this.meta,f.some(o),s,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.unselect=function(){var e=this,t=(0,l.pipe)(O(this),f.map((function(t){return e.items.add(e._cardFactory.unselect(t,f.none,e.itemsOrd))})),f.getOrElse((function(){return e.items})));return new this.constructor(this.id,this.meta,f.none,t,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.findNextAlert=function(){var e=this;return(0,l.pipe)(this.cardIndex,f.chain((function(t){return(0,l.pipe)(h.dn(e.items.values(),t,(0,m.W9)(x.X.canBeFocused(e._alertsReader),x.X.isAlertCard)))})),f.map((function(e){return{alert:e.value.activeAlert,highlightIndex:0}})))},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter((0,m.W9)(x.X.canBeFocused(this._alertsReader),B)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(e){return new this.constructor(this.id,b.R.WithAlerts.setMeta(e)(this.meta),this.cardIndex,this.items,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeCardsHeight=function(e,t){return new this.constructor(this.id,this.meta,this.cardIndex,this.items,T.wj.proceed,t,e,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeVisibleItems=function(e){var t=(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.chain((function(t){return(0,l.pipe)(e.get(t.id),f.map((function(e){return e.index})))})));return new this.constructor(this.id,this.meta,t,e,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+D(T.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(x.X.eq).equals(T.In.getActiveItemWithAlert(this),T.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},Object.defineProperty(e.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.size||f.isNone(this.items.find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),e._ord=x.X.defaultOrd,e.add=function(t,n,i){return function(a){return function(o){var c=a.map((function(a){var s=n.createAdded(o.id)(e.getCardId(o.meta,a),a);return t(o,a)?s:r.Priority.makeCardInvisible(s,i)})),u=o.items.add(c),d=(0,l.pipe)(T.In.getActiveItemWithAlert(o),f.map((function(e){var t=e.id;return p.MH(u.get(t)).index}))),m=f.getEq(s.eqNumber).equals(d,o.cardIndex)?T.wj.force:T.wj.skip;return new e(o.id,o.meta,d,u,m,o.isCardsHeightValid,o.cardsHeight,n,o._alertsReader,o._capabilities)}}},e.remove=function(t){return function(n){var r=new Set(t.map((function(e){return e.id}))),i=n.items.map((function(e){return x.X.isAlertCard(e)&&r.has(e.activeAlert.id)?n._cardFactory.remove(e,[e.activeAlert],O(n),n.itemsOrd):e})),a=(0,l.pipe)(n.cardIndex,f.chain((function(e){return(0,l.pipe)(i.findRightFrom((function(e){return e.scheduledToDispose}),e),f.map((function(e){return e.index})))})),f.isSome)?T.wj.skip:T.wj.force;return new e(n.id,n.meta,n.cardIndex,i,a,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.update=function(t,n,r){return function(i){return function(a){return e._updateWithAlerts(t,r)(i.filter((0,m.ff)(n.shouldAnimateAlertApply)))(a)}}},e._updateWithAlerts=function(t,n){return function(i){return function(a){var s=(0,l.pipe)(i,r.filterAlertInLens(a),o.map((function(t){return[e.getCardId(a.meta,t),t]})),o.reduce(a.items,(function(e,i){var o=i[0],s=i[1];return(0,l.pipe)(C.l.update(e,o,(function(e){return a._cardFactory.updateWith(e,s,a.itemsOrd)})),g.fold((function(){var i=a._cardFactory.createAdded(a.id)(o,s);return e.add(t(a,s)?i:r.Priority.makeCardInvisible(i,n))}),c.identity))}))),u=(0,l.pipe)(T.In.getActiveItemWithAlert(a),f.map((function(e){var t=e.id;return p.MH(s.get(t)).index})));return new e(a.id,a.meta,u,s,T.wj.proceed,a.isCardsHeightValid,a.cardsHeight,a._cardFactory,a._alertsReader,a._capabilities)}}},e.isAlertVisible=function(e,t){return!0},e}(),L=function(){function e(e,t,n,r,i,a,o,s,c,u){this.id=e,this.meta=t,this.cardIndex=n,this.items=r,this.animation=i,this.isCardsHeightValid=a,this.cardsHeight=o,this._cardFactory=s,this._alertsReader=c,this._capabilities=u,this.type=T.Nm.lensview,this.kind=T._L.persistent,this.itemsOrd=x.X.Bundle.ord,this.withPriorityList=!1,(0,d.kG)((0,l.pipe)(this.cardIndex,p.wo((function(e){return e>-1}))),"card index should be non negative number")}return e.initCardsHash=function(t,n,r,i){(0,d.kG)((0,l.pipe)(r,p.wo((function(e){var t=e.alertIndex;return void 0!==n[t]}))),"Can not find alert for provided alertIndex");var a=e._groupAlertsInBundles(n),o=(0,l.pipe)(r,f.map((function(e){var t=e.alertIndex;return(0,d.kG)(void 0!==n[t],"Can not find alert for provided alertIndex"),n[t]}))),s=f.none,c=w.aW.empty(x.X.getId,e._ord.compare),u=Array.from(a.entries()).reduce((function(e,n){var r=n[0],a=n[1],c=a.map((function(e){e[0];return e[1]})),u=a[0][0];return(0,l.pipe)(o,f.map((function(e){return c.indexOf(e)})),f.filter((function(e){return e>-1})),f.fold((function(){return e.add(i.createRenderedBundle(t)(r,u,c))}),(function(n){var a=i.createFocusedBundle(t)(r,u,c,n);return s=f.some(r),e.add(a)})))}),c);return{cardIndex:(0,l.pipe)(s,f.chain((function(e){return(0,l.pipe)(u.get(e),f.map((function(e){return e.index})))}))),cards:u}},e.create=function(t,n,r,i,a,o,s){var c=e.initCardsHash(t,r,i,a),l=c.cards;return new e(t,n,c.cardIndex,l,T.wj.skip,!1,0,a,o,s)},e.getCardId=function(e){return e.id},e._groupAlertsInBundles=function(e){var t=this,n=e.map((function(e){return[x.X.Bundle.getAlertOutcomeBundle(e),e]}));return w.vM((function(e){var n=e[0];e[1];return t.getCardId(n)}),n)},e.add=function(t){return function(n){var r=e._groupAlertsInBundles(t),i=Array.from(r.entries()).reduce((function(e,t){var r=t[0],i=t[1],a=i.map((function(e){e[0];return e[1]})),o=i[0][0];return(0,l.pipe)(C.l.update(e,r,(function(e){var t=n._cardFactory.addBundleAlerts(e,a);return x.X.Bundle.isExtendableWithAlerts(t)?t:n._cardFactory.transitionTo(t,{type:"added",clockwise:!0})})),g.fold((function(){return e.add(n._cardFactory.createAddedBundle(n.id)(r,o,a))}),c.identity))}),n.items),a=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return p.MH(i.get(t)).index}))),o=f.getEq(s.eqNumber).equals(a,n.cardIndex)?T.wj.force:T.wj.skip;return new e(n.id,n.meta,a,i,o,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.remove=function(t){return function(n){var r=e._groupAlertsInBundles(t),i=Array.from(r.entries()).reduce((function(t,r){var i=r[0],a=r[1];return(0,l.pipe)(C.l.update(t,i,(function(t){var r=n._cardFactory.remove(t,a.map((function(e){e[0];return e[1]})),O(n),e._ord);return(0,l.pipe)(T.In.getActiveItem(n),f.exists((function(e){return e.id===r.id})))?n._cardFactory.selectNextAlert(r,e._ord,(function(e,t){return(0,A.EB)(x.X.Bundle.getAlertOutcomeBundle(t),r.alerts,t)})):r})),g.fold((function(){return t}),c.identity))}),n.items);return new e(n.id,n.meta,n.cardIndex,i,T.wj.force,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.update=function(t){return function(n){return e._updateWithAlerts(t.filter((0,m.ff)(n._cardFactory.shouldAnimateAlertApply)))(n)}},e._updateWithAlerts=function(t){return function(n){var i=(0,l.pipe)(t,r.filterAlertInLens(n),o.partition(y.bZ.isRegistered)),a=i.left,s=i.right,u=e._groupAlertsInBundles(s),d=Array.from(u.entries()).reduce((function(e,t){var r=t[0],i=t[1],a=i.map((function(e){e[0];return e[1]})),o=i[0][0];return(0,l.pipe)(C.l.update(e,r,c.identity),g.fold((function(){return e.add(n._cardFactory.createAddedBundle(n.id)(r,o,a))}),c.identity))}),e.remove(a)(n).items),p=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return(0,l.pipe)(d.get(t),f.map((function(e){return e.index})),f.getOrElse((function(){return 0})))})));return new e(n.id,n.meta,p,d,T.wj.proceed,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(T.In.getActiveItem(this),f.exists((function(e){return e.scheduledToDispose})))||f.isNone(this.items.find((function(e){return!e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,l.pipe)(r.getRegularCard(this.items,this.cardIndex),f.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),f.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.prototype.getCardId=function(e){return x.X.Bundle.getAlertOutcomeBundle(e).id},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(t){return(0,d.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(t)(this)},e.prototype.select=function(t){var n=this,r=x.X.Bundle.getAlertOutcomeBundle(t.alert),i=C.l.get(this.items,e.getCardId(r),B);(0,d.kG)(f.isSome(i),"Cannot select unknown alert");var a=p.MH(i),o=a.value,s=a.index,c=(0,l.pipe)(O(this),f.map((function(e){return n.items.add((0,l.pipe)(e,n._capabilities.unselect({nextCard:f.some(o),ord:n.itemsOrd})))})),f.getOrElse((function(){return n.items}))).add((0,l.pipe)(o,this._capabilities.select({alertHighlight:t,previousCard:O(this),ord:this.itemsOrd,meta:f.some((0,A.EB)(r,o.alerts,t.alert))})));return new this.constructor(this.id,this.meta,f.some(s),c,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.unselect=function(){var e=this,t=(0,l.pipe)(O(this),f.map((function(t){return e.items.add((0,l.pipe)(t,e._capabilities.unselect({nextCard:f.none,ord:e.itemsOrd})))})),f.getOrElse((function(){return e.items})));return new this.constructor(this.id,this.meta,f.none,t,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.findNextAlert=function(){var e=this;return(0,l.pipe)((0,a.gz)(f.option)(O(this),this.cardIndex),f.chain((function(t){var n=t[0],r=t[1];return(0,l.pipe)(e._cardFactory.nextAlert(n),f.alt((function(){return e._cardFactory.prevAlert(n)})),f.alt((function(){return(0,l.pipe)(h.XT(e.items.values(),r+1,(0,m.W9)(x.X.canBeFocused(e._alertsReader),x.X.isAlertCard)),f.alt((function(){return h.XT(e.items.values(),0,(0,m.W9)(x.X.canBeFocused(e._alertsReader),x.X.isAlertCard))})),f.map((function(e){return e.value.alerts[0]})))})))})),p.vx((0,l.pipe)(C.l.find(this.items,(0,m.W9)(x.X.canBeFocused(this._alertsReader),B)),f.map((function(e){return e.value.alerts[0]})))),f.map((function(e){return{alert:e,highlightIndex:0}})))},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter((0,m.W9)(x.X.canBeFocused(this._alertsReader),B)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(e){return new this.constructor(this.id,b.R.WithAlerts.setMeta(e)(this.meta),this.cardIndex,this.items,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeCardsHeight=function(e,t){return new this.constructor(this.id,this.meta,this.cardIndex,this.items,T.wj.proceed,t,e,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeVisibleItems=function(e){var t=(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.chain((function(t){return(0,l.pipe)(e.get(t.id),f.map((function(e){return e.index})))})));return new this.constructor(this.id,this.meta,t,e,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+D(T.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(x.X.eq).equals(T.In.getActiveItemWithAlert(this),T.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},Object.defineProperty(e.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.size||f.isNone(this.items.find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),e._ord=x.X.Bundle.ord,e}(),M=function(){function e(t,n,r,i,a,o,s){this.meta=t,this.items=n,this.animation=r,this.isCardsHeightValid=i,this.cardsHeight=a,this._cardFactory=o,this._alertsReader=s,this.kind=T._L.active,this.type=T.Nm.advanced,this.id=b.R.SpecialId.Premium,this.cardIndex=f.none,this.card=this.cardIndex,this.itemsOrd=e._ord,(0,d.kG)(this.items.size>0,"PremiumLensViewImpl should have at least one card")}return e.create=function(t,n,r,i){return new e(t,w.aW.create(n.map(r.createFromAlert(b.R.SpecialId.Premium)),(function(e){return e.id}),e._ord.compare),T.wj.skip,!1,0,r,i)},Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(this.findNextAlert(),f.isNone)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),e.add=function(t){return function(n){var r=t.map(n._cardFactory.createFromAlert(n.id));return new e(n.meta,n.items.add(r),T.wj.proceed,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader)}},e.remove=function(t){return function(n){var r=new Set(t.map((function(e){return e.id}))),i=n.items.map((function(t){return r.has(t.activeAlert.id)?n._cardFactory.remove(t,[t.activeAlert],f.none,e._ord):t}));return new e(n.meta,i,n.animation,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader)}},e.update=function(t){return function(n){var r=h.uK(t,y.bZ.isRegistered),i=r[0],a=r[1];return(0,l.pipe)(n,e.remove(a),e.add(i))}},e.prototype.getCardId=function(e){return e.id},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(e){throw new Error("It's not possible to animate premium alerts")},e.prototype.select=function(e){return this},e.prototype.unselect=function(){return this},e.prototype.changeCardsHeight=function(t,n){return new e(this.meta,this.items,this.animation,n,t,this._cardFactory,this._alertsReader)},e.prototype.changeVisibleItems=function(t){return new e(this.meta,t,this.animation,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader)},e.prototype.findNextAlert=function(){return(0,l.pipe)(this.items.find(x.X.canBeFocused(this._alertsReader)),f.map((function(e){return{alert:e.value.activeAlert,highlightIndex:e.value.activeHighlightIndex}})))},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter(x.X.canBeFocused(this._alertsReader)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(t){return new e(b.R.WithAlerts.setMeta(t)(this.meta),this.items,this.animation,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+D(this.card))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(x.X.eq).equals(this.card,e.card)&&this.meta.equals(e.meta)&&this.items.equals(e.items)},e._ord=x.X.defaultOrd,e}(),N=function(){function e(t,n,r,i,a,o,s,c,l){var u=this;this.meta=t,this.cardIndex=n,this.items=r,this.animation=i,this.isCardsHeightValid=a,this.cardsHeight=o,this._cardFactory=s,this._alertsReader=c,this._capabilities=l,this._updateCardWithLensMeta=function(e){return u._cardFactory.changePlagiarismMetaWithAlerts(e,e.alerts.filter(S.$.isPlagiarism))},this.kind=T._L.persistent,this.type=T.Nm.plagiarism,this.id=b.R.SpecialId.Plagiarism,this.itemsOrd=e._ord}return e.create=function(t,n,r,i,a,o){(0,d.kG)(t.id===b.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",t.id);var s=w.aW.empty(x.X.getId,e._ord.compare),c=this.groupAlertsByCardId(n),u=(0,l.pipe)(r,f.map((function(e){var t=e.alertIndex;return(0,d.kG)(void 0!==n[t],"Can not find alert for provided alertIndex"),n[t]}))),p=f.none,m=Array.from(c.entries()).reduce((function(e,t){var n=t[0],r=t[1];return(0,l.pipe)(u,f.map((function(e){return r.indexOf(e)})),f.filter((function(e){return e>-1})),f.fold((function(){return e.add(i.createRendered(b.R.SpecialId.Plagiarism)(n,r))}),(function(t){var a=i.createFocused(b.R.SpecialId.Plagiarism)(n,r,t);return p=f.some(n),e.add(a)})))}),s);return new e(t,(0,l.pipe)(p,f.chain((function(e){return(0,l.pipe)(m.get(e),f.map((function(e){return e.index})))}))),m,T.wj.skip,!1,0,i,a,o)},e.groupAlertsByCardId=function(e){return w.vM("cardId",e)},Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(T.In.getActiveItem(this),f.exists((function(e){return e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,l.pipe)(r.getRegularCard(this.items,this.cardIndex),f.filter((function(e){return e.positionState.isHeightValid})),f.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.add=function(t){return function(n){var r=e.groupAlertsByCardId(t),i=Array.from(r.entries()).reduce((function(e,t){var r=t[0],i=t[1];return(0,l.pipe)(C.l.update(e,r,(function(e){return n._cardFactory.addPlagiarismAlerts(e,i)})),g.fold((function(){return e.add(n._cardFactory.createAdded(b.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),n.items),a=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return p.MH(i.get(t)).index}))),o=f.getEq(s.eqNumber).equals(a,n.cardIndex)?T.wj.force:T.wj.skip;return new e(n.meta,a,i,o,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.remove=function(t){return function(n){var r=e.groupAlertsByCardId(t),i=Array.from(r.entries()).reduce((function(t,r){var i=r[0],a=r[1];return(0,l.pipe)(C.l.update(t,i,(function(t){var r=n._updateCardWithLensMeta(n._cardFactory.remove(t,a,O(n),e._ord));return(0,l.pipe)(T.In.getActiveItem(n),f.exists((function(e){return e.id===r.id})))?n._cardFactory.selectNextAlert(r,e._ord):r})),g.fold((function(){return t}),c.identity))}),n.items);return new e(n.meta,n.cardIndex,i,T.wj.force,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.prototype.getCardId=function(e){return e.cardId},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(t){return(0,d.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(t)(this)},e.update=function(t){return function(n){return e._updateWithAlerts(t.filter((0,m.ff)(n._cardFactory.shouldAnimateAlertApply)))(n)}},e._updateWithAlerts=function(t){return function(n){var r=h.uK(t,y.bZ.isRegistered),i=r[0],a=r[1],o=e.groupAlertsByCardId(i),s=Array.from(o.entries()).reduce((function(e,t){var r=t[0],i=t[1];return(0,l.pipe)(C.l.update(e,r,n._updateCardWithLensMeta),g.fold((function(){return e.add(n._cardFactory.createAdded(b.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),e.remove(a)(n).items),u=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return(0,l.pipe)(s.get(t),f.map((function(e){return e.index})),f.getOrElse((function(){return 0})))})));return new e(n.meta,u,s,T.wj.proceed,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.prototype.updateMeta=function(t){var n=this.items.map(this._updateCardWithLensMeta);return new e(b.R.WithAlerts.setMeta(t)(this.meta),this.cardIndex,n,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.select=function(t){var n=this;(0,d.kG)(t.alert.type===S.$.Type.plagiarism,"cannot highlight non-plagiarism alert");var r=C.l.get(this.items,t.alert.cardId,B);(0,d.kG)(f.isSome(r),"Cannot select unknown alert");var i=p.MH(r),a=i.value,o=i.index,s=(0,l.pipe)(O(this),f.map((function(t){return n.items.add((0,l.pipe)(t,n._capabilities.unselect({nextCard:f.some(a),ord:e._ord})))})),f.getOrElse((function(){return n.items}))).add((0,l.pipe)(a,this._capabilities.select({previousCard:O(this),alertHighlight:t,ord:e._ord,meta:f.none})));return new e(this.meta,f.some(o),s,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.unselect=function(){var t=this,n=(0,l.pipe)(O(this),f.map((function(n){return t.items.add((0,l.pipe)(n,t._capabilities.unselect({nextCard:f.none,ord:e._ord})))})),f.getOrElse((function(){return t.items})));return new e(this.meta,f.none,n,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeCardsHeight=function(t,n){return new e(this.meta,this.cardIndex,this.items,T.wj.proceed,n,t,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeVisibleItems=function(t){var n=(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.chain((function(e){return(0,l.pipe)(t.get(e.id),f.map((function(e){return e.index})))})));return new e(this.meta,n,t,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.findNextAlert=function(){var e=this;return(0,d.kG)(f.isSome(T.In.getActiveItemWithAlert(this))===f.isSome(this.cardIndex),"Lens is in wrong state"),(0,l.pipe)((0,a.gz)(f.option)(T.In.getActiveItemWithAlert(this),this.cardIndex),f.chain((function(t){var n=t[0],r=t[1];return(0,l.pipe)(e._cardFactory.nextAlert(n),f.alt((function(){return e._cardFactory.prevAlert(n)})),f.alt((function(){return(0,l.pipe)(h.dn(e.items.values(),r,(0,m.W9)(x.X.canBeFocused(e._alertsReader),x.X.isAlertCard)),f.map((function(e){return e.value.activeAlert})))})))})),p.vx((0,l.pipe)(C.l.find(this.items,(0,m.W9)(x.X.canBeFocused(this._alertsReader),B)),f.map((function(e){return e.value.activeAlert})))),f.map((function(e){return{alert:e,highlightIndex:0}})))},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+D(T.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter((0,m.W9)(x.X.canBeFocused(this._alertsReader),B)).getAt(0),f.map((function(e){return{alert:e.alerts[0],highlightIndex:0}})))},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(x.X.eq).equals(T.In.getActiveItemWithAlert(this),T.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},e._ord=x.X.defaultOrd,e}(),F=function(){function e(e){this.kind=T._L.abstract,this.type=T.Nm.closed,this.id=b.R.SpecialId.Closed,this.meta=b.R.createStaticLens({id:b.R.SpecialId.Closed,title:"Closed"},b.R.Meta.group.empty,e)}return e.create=function(t){return e.value||(e.value=new e(t)),e.value},e.prototype.hashCode=function(){return(0,_.AC)(this.id)},e.prototype.equals=function(e){return this.id===e.id},e}(),P=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.itemsOrd=t._cardsOrd,n.withPriorityList=!0,n}return(0,i.__extends)(t,e),t.create=function(e,n,i,a,o,s,c){var u=(0,l.pipe)(a,f.map((function(e){var t=e.alertIndex;return i[t]})),f.chain(f.fromNullable),f.map((function(e){return"all"===e.view})),f.getOrElse((function(){return!1}))),d=R.initCardsHash(e,n,i,a,o,t._cardsOrd).hash,p=r.Priority.ensureExpandCardIsPresent(e,d,s,o);return p=r.Priority.syncVisibleCards(p,u,u,o,c),new t(e,n,(0,l.pipe)(a,f.chain((function(e){var t=e.alertIndex;return C.l.find(p,(0,m.W9)(B,(function(e){return e.activeAlert.id===i[t].id})))})),f.map((function(e){return e.index}))),p,T.wj.skip,!1,0,o,s,c)},Object.defineProperty(t.prototype,"isNonPriorityListOpened",{get:function(){return t.isNonPriorityListOpened(this)},enumerable:!1,configurable:!0}),t.isNonPriorityListOpened=function(e){return(0,l.pipe)(e.items.get(x.X.Priority.expandCardId),f.map((function(e){return"rendered"===e.value.visualState.transition.type})),f.getOrElse((function(){return!1})))},Object.defineProperty(t.prototype,"onlyNonPriorityAlertsLeft",{get:function(){return 0!==this.meta.count&&0===this.meta.priorityCount&&0===this.items.filter((function(e){return!x.X.Priority.isStaticCard(e)&&x.X.isAlertCard(e)&&S.$.isPriority(e.activeAlert)&&!e.scheduledToDispose})).size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusedCardIsNonPriority",{get:function(){return t.focusedCardIsNonPriority(this)},enumerable:!1,configurable:!0}),t.focusedCardIsNonPriority=function(e){return(0,l.pipe)(T.In.getActiveItemWithAlert(e),f.map((function(e){return!S.$.isPriority(e.activeAlert)})),f.getOrElse((function(){return!1})))},t.prototype.toggleNonPriorityList=function(){var e=this.isNonPriorityListOpened,n=r.Priority.syncVisibleCards(this.items,!e,!e&&this.focusedCardIsNonPriority,this._cardFactory,this._capabilities);return new t(this.id,this.meta,this.cardIndex,n,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.isNonPriorityListOpened===t.isNonPriorityListOpened},t.prototype.select=function(n){var i=e.prototype.select.call(this,n),a=this.isNonPriorityListOpened||!S.$.isPriority(n.alert),o=r.Priority.syncVisibleCards(i.items,a,!S.$.isPriority(n.alert),this._cardFactory,this._capabilities);return new t(i.id,i.meta,i.cardIndex,o,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},t.prototype.onAnimationFinish=function(e){(0,d.kG)(e.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");var n=R._updateWithAlerts(t.isAlertVisible,this._capabilities)(e)(this),i=r.Priority.syncVisibleCards(n.items,this.isNonPriorityListOpened,this.focusedCardIsNonPriority,this._cardFactory,this._capabilities);return new t(n.id,n.meta,n.cardIndex,i,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},Object.defineProperty(t.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.filter((0,m.ff)(x.X.Priority.isStaticCard)).size||f.isNone(this.items.filter((0,m.ff)(x.X.Priority.isStaticCard)).find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),t.prototype.findFirstAlert=function(){var e=(0,m.W9)((0,m.ff)(x.X.Priority.isStaticCard),x.X.canBeFocused(this._alertsReader)),t=this.isNonPriorityListOpened?e:(0,m.W9)(e,x.X.isPriority);return(0,l.pipe)(this.items.filter((0,m.W9)(t,B)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},t.prototype.findNextAlert=function(){var e=this,t=this.isNonPriorityListOpened&&this.onlyNonPriorityAlertsLeft?c.constTrue:function(e){return S.$.isPriority(e.activeAlert)},n=(0,m.W9)(x.X.canBeFocused(this._alertsReader),t);return(0,l.pipe)((0,a.gz)(f.option)(T.In.getActiveItemWithAlert(this),this.cardIndex),f.chain((function(t){var r=t[0],i=t[1];return(0,l.pipe)(e._cardFactory.nextAlert(r),f.alt((function(){return e._cardFactory.prevAlert(r)})),f.alt((function(){return(0,l.pipe)(h.XT(e.items.values(),i+1,(0,m.W9)(n,x.X.isAlertCard)),f.alt((function(){return h.XT(e.items.values().filter(n),0,(0,m.W9)(n,x.X.isAlertCard))})),f.map((function(e){return e.value.alerts[0]})))})))})),p.vx((0,l.pipe)(C.l.find(this.items,(0,m.W9)(n,B)),f.map((function(e){return e.value.alerts[0]})))),f.map((function(e){return{alert:e,highlightIndex:0}})))},Object.defineProperty(t.prototype,"activeAlertsCount",{get:function(){return(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.exists((function(e){return y.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleAlertsCount",{get:function(){return(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.exists((function(e){return y.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.isNonPriorityListOpened?this.meta.count:this.meta.priorityCount},enumerable:!1,configurable:!0}),t._cardsOrd=x.X.priorityOrd,t.isAlertVisible=function(e,t){return(0,T.yi)(e)&&("priority"===t.view||e.isNonPriorityListOpened)},t}(R);!function(e){var t;!function(t){t.getAlertHandler=function(t,n,r){return void 0===r&&(r=c.constTrue),function(i,a){var o=e.applyWithFilter(a,e.applyDiff);return function(e){return(0,l.pipe)(e,o(i,R.add(r,t,n),R.update(r,t,n),R.remove))}}}}(t=e.WithSuccess||(e.WithSuccess={})),function(t){t.getAlertsHandler=function(){return function(t,n){return function(r){var i=e.applyWithFilter(n,e.applyDiff);return(0,l.pipe)(r,i(t,L.add,L.update,L.remove))}}}}(e.Bundles||(e.Bundles={})),function(n){function r(t,n,r){return function(i){var a=e.Priority.ensureExpandCardIsPresent(i.id,i.items,n,t);a=e.Priority.syncVisibleCards(a,P.isNonPriorityListOpened(i),P.focusedCardIsNonPriority(i),t,r);var o=(0,l.pipe)(T.In.getActiveItemWithAlert(i),f.chain((function(e){return a.find((function(t){return x.X.isAlertCard(t)&&t.activeAlert.id===e.activeAlert.id}))})),f.map((function(e){return e.index})));return new P(i.id,i.meta,o,a,T.wj.proceed,i.isCardsHeightValid,i.cardsHeight,t,n,r)}}function i(e,t){return"removed"===e.visualState.transition.type?e:t.transitionTo({type:"hidden",clockwise:!1})(e)}n.getAlertHandler=function(e,n,i){return function(a,o){return(0,c.flow)(t.getAlertHandler(e,i,P.isAlertVisible)(a,o),r(e,n,i))}},n.getSyncVisibleCardsHandler=r,n.makeCardInvisible=i,n.ensureExpandCardIsPresent=function(e,t,n,r){if(t.has(x.X.Priority.expandCardId)||0===t.size)return t;var i=p.MH(n.getById(p.MH(t.getAt(0)).activeAlert.id)),a=(0,l.pipe)(i.copy(),(function(e){return e.id="dummy_alert",e._state={type:y.bZ.State.Type.REGISTERED,checkingState:y.bZ.CheckingState.IDLE},e._deregisterRanges(),e._deregisterAllAlternatives(),e.getHighlightRanges=function(){return[{start:0,end:0,meta:{}}]},e.view=u.wQ.View.all,e})),o=r.createAdded(e)(x.X.Priority.expandCardId,a),s=r.createRendered(e)(x.X.Priority.expandHintCardId,a);return t=(t=t.add(o)).add(s)},n.syncVisibleCards=function(e,t,n,r,a){var o=0===e.filter((function(e){return!E.J.isBulkAcceptItem(e)&&!x.X.Priority.isStaticCard(e)&&!e.scheduledToDispose&&x.X.isAlertCard(e)&&!S.$.isPriority(e.activeAlert)})).size;return e.map((function(e){return x.X.isAlertCard(e)?x.X.Priority.isStaticCard(e)?o?i(e,a):x.X.Priority.isExpand(e)?t||n?r.transitionTo(e,{type:"rendered",clockwise:!1}):r.transitionTo(e,{type:"added",clockwise:!1}):t||n?r.transitionTo(e,{type:"rendered",clockwise:!1}):i(e,a):t||S.$.isPriority(e.activeAlert)?"hidden"===e.visualState.transition.type?r.transitionTo(e,{type:"rendered",clockwise:!0}):e:i(e,a):E.J.isBulkAcceptItem(e)?E.J.transitionTo(e,{type:"rendered",clockwise:!0}):e}))}}(e.Priority||(e.Priority={})),function(t){t.getAlertsHandler=function(){return function(t){return e.applyDiff(t,M.add,M.update,M.remove)}}}(e.Premium||(e.Premium={})),function(t){t.getAlertsHandler=function(){return function(t){return e.applyDiff(t,N.add,N.update,N.remove)}}}(e.Plagiarism||(e.Plagiarism={})),e.applyDiff=function(e,t,n,r){return function(i){return(0,l.pipe)(e,v.v.reduce(i,(function(e,t){var n=t.alert;return r([n])(e)}),(function(e,t,r){var i=r.alert;return n([i])(e)}),(function(e,n){var r=n.alert;return t([r])(e)})))}},e.applyWithFilter=function(e,t){return function(n,r,i,a){var s=(0,c.flow)(o.partition(e),(function(e){return(0,c.flow)(a(e.left),i(e.right))}));return t(n,(function(t){return r(t.filter(e))}),s,a)}},e.calculateCardsHeight=function(e){return(0,l.pipe)(e.getAt(e.size-1),f.map((function(e){return e.positionState.absTop+e.positionState.height})),f.getOrElse((function(){return 0})))},e.getRegularIndex=function(e){return(0,l.pipe)(e,f.map((function(e){return 0===e?1:0})),f.getOrElse((function(){return 0})))};e.getRegularCard=function(t,n){return(0,l.pipe)(t.getAt(e.getRegularIndex(n)),f.map((function(e){return(0,d.kG)(e.positionState.watched,"Regular card should be watched"),e})))};var n=function(t,n){return(0,l.pipe)(t.getAt(e.getRegularIndex(n)),f.filter((function(e){return e.positionState.watched})))};e.getItemsPositionsUpdateTransformer=function(t){return function(n){var r=n.state,i=n.metadata;if(!T.nL.hasCards(r))return g.left({state:r,metadata:i});var a=T.nL.Prism.getLens();return g.left({state:a.modify(e.updateItemsPositions(t),r),metadata:i})}},e.updateItemsPositions=function(t){return function(r){var i=e.getRegularIndex(r.cardIndex),a=T.In.getActiveItem(r),o=(0,l.pipe)(function(e){return(0,l.pipe)(n(e.items,e.cardIndex),f.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),f.map((function(e){return e.positionState.height})))}(r),p.vx((0,l.pipe)(r.items.find((function(e){return e.positionState.watched&&(0,l.pipe)(a,p.wo((function(t){return t.id!==e.id})))})),f.filter((function(e){return e.value.positionState.isHeightValid&&!e.value.scheduledToDispose})),f.map((function(e){return e.value.positionState.height}))))),s=0,c=(0,l.pipe)(a,p.wo((function(e){return e.positionState.isHeightValid}))),u=r.items.map((function(e,n,a){var u=p.FX(a)(r.cardIndex),d=u||a===i,m=e.scheduledToDispose||(u?e.positionState.isHeightValid:f.isSome(o)),h=e.scheduledToDispose?0:u?e.positionState.height:(0,l.pipe)(o,f.getOrElse((function(){return e.positionState.height}))),g={absTop:u||c?s:e.positionState.absTop,height:h,animationInProgress:r.animation(e,a),visible:e.positionState.visible,isHeightValid:m,watched:d};return s+=h,I.Z.eq.equals(e.positionState,g)?e:t.changePosition(g)(e)})),d=e.calculateCardsHeight(u),m=(0,l.pipe)(a,p.wo((function(e){return e.positionState.isHeightValid})))&&(0,l.pipe)(u.getAt(i),p.wo((function(e){return e.positionState.isHeightValid})));return r.changeVisibleItems(u).changeCardsHeight(d,m)}},e.filterAlertInLens=function(e){return o.filter((function(t){return y.bZ.isNotRemoved(t)||e.items.has(e.getCardId(t))}))}}(r||(r={}));var O=T.In.getActiveItemOfType(B);function B(e){return e.kind===k.h.alertCard}function D(e){return(0,l.pipe)(e,f.fold((function(){return 2433880}),(function(e){return null==e?9735524:e.hashCode()<<2})))}},26268:(e,t,n)=>{"use strict";n.d(t,{tn:()=>r,$A:()=>i,EQ:()=>a});var r,i,a,o=n(45980),s=n(73805),c=n(65772),l=n(8125),u=n(95574),d=n(22232),p=n(64909),f=n(83078),m=n(17753),h=n(10002),g=n(32952),v=n(28043),y=n(66310),b=n(40151),w=n(79462),_=n(78674),C=n(77176),S=n(598),x=n(83401),A=n(52479),I=n(99391),k=n(2834),E=n(40250),T=n(41199),R=n(50634),L=n(40644),M=n(38524);!function(e){!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(e.Type||(e.Type={}))}(r||(r={})),function(e){var t=function(){function e(){this.events=new g.xQ,this.focusAlertHighlight=function(){return c.left(new Error("Method not implemented."))},this.highlightAlertHighlight=function(){return c.left(new Error("Method not implemented."))},this.moveCursorToHighlight=l.ZT}return e.prototype.ensureAlertHighlightInViewport=function(){throw new Error("Method not implemented.")},e.prototype.getMarkByAlert=function(e){throw new Error("Method not implemented.")},e.prototype.getAlertByMark=function(e){throw new Error("Method not implemented.")},e}();e.Mock=t,e.getHighlightIndex=function(e,t){return(0,s.pipe)(t,c.mapLeft((function(){return new Error("Mark is collapsed")})),c.chain((function(t){return u.vM((function(){var n=m.bZ.isSuperAlert(e)||m.bZ.isPremium(e)&&e.highlightTexts.length>1?e.getHighlightRanges().findIndex((function(e){return e.start===t.start&&e.end===t.end})):0;return(0,d.kG)(-1!==n,"Could not find higlight index by Range for provided Alert",(function(){return JSON.stringify({alertRanges:e.getHighlightRanges(),targetRange:t})})),n}))})))}}(i||(i={})),function(e){e.getHighlightSubscribtion=function(e,t,n){return e.pipe(v.x(p.getEq(T.$.ord).equals),y.w((function(e){return(0,s.pipe)(e,p.fold(b.c,(function(e){return w.y.create((function(){return n.debug("highlight mark: "+e.id),(0,s.pipe)(t.highlightAlertHighlight(e),c.fold((function(t){return n.error("Cannot highlight mark: "+e.id,t),l.ZT}),(function(t){return function(){n.debug("unhighlight mark: "+e.id),t.dispose()}})))}))})))})))},e.highlightMarkByHighlightedCard=function(t,n,r,i,a){var s=e.getHighlightSubscribtion(t.hovered.pipe(_.b(100),C.U((0,o.flow)(p.chain((function(e){var t=n.get();return M.nL.hasCards(t)?E.l.find(t.currentLens.items,(0,l.W9)(L.X.isAlertCard,(function(t){return t.id===e}))):p.none})),p.map((function(e){return e.value.activeAlert})),p.filter((function(e){return i.isRegistered(e.id)}))))),r,a);return{id:"highlightMarkByHighlightedAlert",when:h.R.isWithAlertsId,what:M.nL.Effect.Applicator.create(s.pipe(S.c(x.F())))}},e.focusMarkByActiveAlert=function(e,t,n,r){var i=e.view(M.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return(0,s.pipe)(M.In.getActiveItemWithAlert(t),p.map((function(e){return{alert:e.activeAlert,source:n,highlightIndex:e.activeHighlightIndex}})))}))).pipe(y.w(A.b2.rafScheduler),I.skipBy(p.getEq(R.E.getEq())),C.U(p.filter((function(e){return p.isSome(n.getRegistered(e.alert.id))}))),k.b(f.bw((function(e){return r.trace("new alert highlight: ",e)}))),y.w(p.fold((function(){return r.debug("Nothing to focus"),b.c()}),(function(e){return w.y.create((function(){return r.debug("Focus mark: "+e.alert.id+" | "+e.highlightIndex),e.source===m.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,s.pipe)(t.focusAlertHighlight(e),c.fold((function(t){return r.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),l.ZT}),(function(t){return function(){r.debug("Unfocus mark: "+e.alert.id+" | "+e.highlightIndex+"'"),t.dispose()}})))}))}))));return{id:"focusMarkByActiveAlert",when:h.R.isWithAlertsId,what:M.nL.Effect.Applicator.create(i.pipe(S.c(x.F())))}}}(a||(a={}))},65247:(e,t,n)=>{"use strict";n.d(t,{x:()=>u,O:()=>y});var r,i=n(22788),a=n(18208),o=n(68983),s=n(10002),c=n(58199);function l(e){return e+" "+a._6(e,"alert","alerts")}var u,d=function(e,t){return function(n,r,i,a){var o=a?n.count:n.priorityCount;return o>0?l(o):i&u.IsDocumentEmpty?e:t}},p={description:"Improves spelling, grammar, and punctuation.",stateMessage:d("No alerts","Looking good")},f={description:"Helps make your writing easier to understand.",stateMessage:function(e,t,n){var r=(0,o.W)(i.lt(c.g.ord))(t);if(n&u.IsDocumentEmpty)return"So far so good";if(e.count>0){if(c.g.isMin(t))return l(e.count);if(r(c.g.fromNumber(20)))return"Unclear";if(r(c.g.fromNumber(70)))return"A bit unclear";if(r(c.g.fromNumber(85)))return"Mostly clear";if(r(c.g.fromNumber(95)))return"Clear"}return"Very clear"}},m={description:"Helps make your writing more interesting and effective.",stateMessage:function(e,t,n){var r=n&u.IsFreeUser,a=c.g.isMin(t),s=(0,o.W)(i.lt(c.g.ord))(t);if(n&u.IsDocumentEmpty||r&&a)return"Nothing yet";if(r||e.count>0){if(a)return l(e.count);if(s(c.g.fromNumber(20)))return"Bland";if(s(c.g.fromNumber(80)))return"A bit bland";if(s(c.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},h={description:"Helps you make the right impression on your reader.",stateMessage:function(e,t,n){var r=n&u.IsFreeUser,a=c.g.isMin(t),s=(0,o.W)(i.lt(c.g.ord))(t);if(n&u.IsDocumentEmpty||r&&a)return"Nothing yet";if(r||e.count>0){if(a)return l(e.count);if(s(c.g.fromNumber(20)))return"Serious issues";if(s(c.g.fromNumber(40)))return"Very off";if(s(c.g.fromNumber(95)))return"Slightly off"}return"Just right"}},g={description:"Your organization’s writing guidelines.",stateMessage:d("Nothing yet","All good")},v=((r={})[s.R.SpecialId.Correctness]=p,r[s.R.SpecialId.CorrectnessPriority]=p,r[s.R.SpecialId.Clarity]=f,r[s.R.SpecialId.ClarityPriority]=f,r[s.R.SpecialId.Engagement]=m,r[s.R.SpecialId.EngagementPriority]=m,r[s.R.SpecialId.Delivery]=h,r[s.R.SpecialId.DeliveryPriority]=h,r[s.R.SpecialId.Vox]=g,r[s.R.SpecialId.VoxPriority]=g,r[s.R.SpecialId.Plagiarism]={description:"Checks for similarities to published writing.",stateMessage:function(e,t,n){return n&u.IsLensVisited&&!(n&u.IsDocumentEmpty)?n&u.IsLensActive?c.g.isMin(t)?"100% original":t+"% unoriginal":"Recheck":"Not checked yet"}},r[s.R.SpecialId.Premium]={description:"Offers more suggestions on how to improve your writing.",stateMessage:function(e,t,n){return n&u.IsDocumentEmpty?"Advanced checks":e.count+" more "+a._6(e.count,"alert","alerts")}},r);function y(e){return v[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(u||(u={}))},87325:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r,i=n(45980),a=n(64909),o=n(42726);!function(e){!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){var t=function(){this.downloadStarted=o.hg.create(!1),this.beginDownload=i.constVoid,this.tryToInterrupt=i.constVoid,this.generateReport=function(){throw new Error("Method not implemented.")},this.reportData=o.hg.create(a.none),this.dedHTML="",this.dispose=i.constVoid};e.Mock=t}(e.ViewModel||(e.ViewModel={}))}(r||(r={}));var s,c=n(76974);!function(e){var t;!function(e){!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){var n=function(e,n){void 0===e&&(e={type:t.Type.EMPTY}),void 0===n&&(n=a.some(new r.ViewModel.Mock)),this.statisticsState=e,this.reportViewModel=n,this.state=c.of(this.statisticsState),this.onModalClose=i.constVoid};e.Mock=n}(e.ViewModel||(e.ViewModel={}))}(s||(s={}))},15228:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var r,i=n(73805),a=n(42726),o=n(84966),s=n(64909),c=n(10002),l=n(38524),u=n(32952),d=n(85985),p=n(77176),f=n(66310),m=n(52479),h=n(93508),g=n(16118),v=n(76974),y=n(50628),b=n(17343),w=n(66265),_=n(2834);!function(){function e(e,t,n,v,y){var b=this;this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this.nonPriorityOptions=v,this.mutedAlertsOptions=y,this._getTextAmount=function(e){return 0===e?r.TextAmount.zero:e<=o.hD?r.TextAmount.small:r.TextAmount.large},this._subs=[],this.successState=a.hg.create({type:r.SuccessType.zero}),this.textAmount=a.hg.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:c.R.isWithAlertsId,what:l.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((function(e){return e.type===r.ActionType.More})),p.U((function(){return function(e){var t=e.patch({currentLens:(0,l.yi)(e.currentLens)?e.currentLens.toggleNonPriorityList():e.currentLens});return(0,i.pipe)(t.currentLens.findFirstAlert(),s.fold((function(){return t}),(function(e){return t.patch({currentLens:t.currentLens.select(e)})})))}}))))},this._currentLens=this._state.view((function(e){return{isSuccess:l.nL.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:l.nL.isLensview(e)&&0!==e.currentLens.activeAlertsCount,isAllAlerts:c.R.isMainLens(e.currentLens.id)}})),this._listenTextSize=function(){return b._currentLens.view((function(e){return e.isSuccess})).pipe(f.w(m.Ft(b._documentModel.documentLength.view("trimmed"))),p.U(b._getTextAmount)).subscribe(m.wW(b.textAmount))},this._lensSwitch=this._currentLens.pipe(h.O(this._currentLens.get()),g.G(),p.U((function(e){var t=e[0],n=e[1];return n.isSuccess?s.fromNullable({prevLensType:t.type,nonPriorityAlertsLeft:n.nonPriorityAlertsLeft,isAllAlerts:n.isAllAlerts}):s.none}))),this._textAmountToSuccessType=function(e){return e===r.TextAmount.zero?{type:r.SuccessType.zero}:e===r.TextAmount.large?{type:r.SuccessType.large}:{type:r.SuccessType.small}},this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,i.pipe)(v,s.map((function(e){return{hasNonPriorityAlerts:b._state.view((function(e){return l.nL.isWithPriorityList(e)&&e.currentLens.onlyNonPriorityAlertsLeft})),reviewNonPriorityAlerts:function(){e.trackNonPriorityToggle(),b.actionEvents.next({type:r.ActionType.More})}}}))),this.mutedAlerts=(0,i.pipe)(y,s.map((function(){return{reviewMutedSuggestions:function(){},mutedSuggestionsCount:b._state.view((function(e){return e.currentLens.meta.mutedCount}))}})))}e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._listenSuccessStateChange=function(){var e=this;return this._lensSwitch.pipe(w.cp((function(t){return e.textAmount.pipe(p.U(e._textAmountToSuccessType),h.O(t.prevLensType===l.Nm.lensview?{type:r.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:e._textAmountToSuccessType(e.textAmount.get())),g.G(),p.U((function(e){var t=e[0],n=e[1];return t.type===r.SuccessType.applied&&n.type!==r.SuccessType.zero?t:n})),f.w((function(t,n){return 0===n?v.of(t):(i=t).type===r.SuccessType.applied||i.type===r.SuccessType.zero?v.of(i):e._documentModel.checkingState.pipe(d.h((function(e){return"checking"!==e})),y.P(),b.h(i));var i})),_.b((function(t){e._trackSuccessStateChanged(t.type===r.SuccessType.applied?"applied":t.type===r.SuccessType.zero?"nothingToCheck":"noIssues")})))}))).subscribe(m.wW(this.successState))}}();!function(e){var t,n;!function(e){e.More="More"}(e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(t=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(n=e.SuccessType||(e.SuccessType={}));var r=function(){function e(){this.textAmount=a.hg.create(t.zero),this.successState=a.hg.create({type:n.zero}),this.mutedSuggestionsCount=a.hg.create(0),this.hasNonPriorityAlerts=a.hg.create(!1)}return e.prototype.reviewMutedSuggestions=function(){throw new Error("Method not implemented.")},e.prototype.reviewNonPriorityAlerts=function(){throw new Error("Method not implemented.")},e.prototype.dispose=function(){throw new Error("Method not implemented.")},e}();e.Mock=r}(r||(r={}))},64437:(e,t,n)=>{"use strict";n.d(t,{g:()=>v,m:()=>y});var r=n(59312),i=n(90351),a=n(22823),o=n(71031),s=n(13097),c={position:"relative",borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:"0 "+a.u.rem(.625)+" "+a.u.rem(s.mJ)+" 0 rgba(198, 203, 222, .45)"},l={$nest:{"&:before":{position:"absolute",width:a.u.px(10),height:a.u.px(10),borderRadius:a.u.percent(50),content:"''",transform:"scale(.5)"}}},u={$nest:{"&:before":{backgroundColor:o.kl}}},d={$nest:{"&:before":{backgroundColor:o.AX}}},p={$nest:{"&:before":{backgroundColor:i.Il.CoreRed50}}},f={$nest:{"&:before":{backgroundColor:i.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:i.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:i.Il.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:i.Il.CoreNeutral50}}},v={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=(0,r.__assign)((0,r.__assign)({},a.u.stylesheet({dot:[l],dotAdvanced:[d],dotCritical:[u],dotCorrectness:[p],dotClarity:[f],dotEngagement:[m],dotDelivery:[h],dotVox:[g]})),{fullCard:a.u.joinClasses([v.fullCardSelector,a.u.style(c)])})},90600:(e,t,n)=>{"use strict";n.d(t,{d:()=>I});var r=n(59312),i=n(27378),a=n(42726),o=n(64909),s=n(19962),c=n(92932),l=n(71517),u=n(73510),d=n(77176),p=n(24209),f=n(18625),m=n(66310),h=n(40151),g=n(16528),v=n(2834),y=n(49708),b=n(93508),w=n(17343),_=n(52479),C=n(76974),S=n(99391),x=n(67434),A=n(57091),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._log=c.C8.Logging.getLogger("CardsListConnectorView",c.zW.LogLevel.DEBUG),t._subs=new u.w.Keeper,t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.isMaster&&this._setMaster()},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:n}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",n),this.forceUpdate((function(){t._setMaster(),t._log.trace("view force update complete",n)}))):(this._log.trace("set master view",n),this._setMaster()):(this._log.trace("release master view",n),this._clearSubs())},t.prototype.componentWillUnmount=function(){this._clearSubs()},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.height;return i.createElement(a.F.div,{"data-purpose":"card-list-connector",style:r.pipe(d.U((function(e){return{height:e}}))),className:t},n)},t.prototype._setMaster=function(){this._setSubs()},t.prototype._setSubs=function(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())},t.prototype._clearSubs=function(){this._subs.dispose()},t}(i.Component);!function(e){!function(e){e.create=function(){return a.hg.create({scrollProvider:o.none,scrollConsumer:o.none,viewport:o.none,title:o.none})}}(e.Elements||(e.Elements={})),e.boundedScrollListener=function(e,t){return p.T(f.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(m.w(o.fold(h.c,(function(e){return g.YC(e).pipe(d.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),v.b((function(t){return e.viewport.set({top:l.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(m.w(o.fold(h.c,(function(t){return y.R(t,"scroll").pipe(d.U((function(){return t.scrollTop})),b.O(t.scrollTop),v.b((function(t){return e.scrollTop.set(t)})),w.h(_.PU))})))),t.view("title").pipe(m.w(o.fold((function(){return C.of(s.UL.empty)}),(function(e){return g.YC(e)}))),d.U((function(e){return e.height})),S.shareReplay({bufferSize:1,refCount:!0}),v.b((function(t){return e.paddingTop.set(t)}))),t.view("scrollConsumer").pipe(m.w(o.fold(h.c,(function(t){return e.scrollOffset.pipe(v.b((function(e){t.scrollTop+=e})))}))))).pipe(w.h(void 0))},e.superScrollListener=function(e,t){var n=t.view("title").pipe(m.w(o.fold((function(){return C.of(s.UL.empty)}),(function(e){return g.YC(e)}))),d.U((function(e){return e.height})),S.shareReplay({bufferSize:1,refCount:!0}));return p.T(f.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(m.w(o.fold(h.c,(function(e){return g.YC(e).pipe(d.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),v.b((function(t){return e.viewport.set({top:l.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(m.w(o.fold(h.c,(function(t){return y.R(t,"scroll").pipe(d.U((function(){return t.scrollTop})),b.O(t.scrollTop),v.b((function(t){return e.scrollTop.set(t)})),w.h(_.PU))})))),t.view("scrollConsumer").pipe(m.w(o.fold(h.c,(function(t){return e.scrollOffset.pipe(x.R((function(e,t){return e-t}),0),v.b((function(e){t.style.transform="translateY("+e+"px)"})))}))),A.a(n),v.b((function(t){var n=t[0],r=t[1];return e.paddingTop.set(n+r)})))).pipe(w.h(void 0))}}(I||(I={}))},83305:(e,t,n)=>{"use strict";n.d(t,{TG:()=>J});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),c=n(42726),l=n(22232),u=n(19962),d=n(83078),p=n(64909),f=n(93583),m=n(22168),h=n(8125),g=n(92932);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));var v=function(){function e(){this._steps={},this.cpuAndAnimationOptsExperiment=!1}return e.prototype.isStepEnabled=function(e){return void 0!==this._steps[e]},e.prototype.relaunchAllSteps=function(){g.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")},e.prototype.setState=function(e,t){this.subscribeForStep(e).state.set(t)},e.prototype.subscribeForStep=function(e){var t=c.hg.create(r.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:h.ZT,dotClicked:function(){return t.set(r.Popup)},popupClosed:function(){return t.set(r.Passed)},popupIgnored:function(){return t.set(r.Hidden)},actionTaken:function(){return t.set(r.Passed)}})},e.prototype.getStepCompletionCallback=function(e){throw new Error("Method not implemented.")},e.prototype.changeState=function(e){},e}(),y=n(52479),b=n(77176),w=n(95093),_=n(85985),C=n(598),S=n(41398),x=n(90351),A=n(22823),I=n(71031),k=n(13097),E=x.Il.BackgroundTooltip,T=A.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:"0 0 0 "+A.u.rem(1)+" rgba(95, 139, 250, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),R={width:A.u.rem(1),height:A.u.rem(1),borderRadius:A.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:T+" 2s infinite",$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},L=A.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),M={width:A.u.rem(1),height:A.u.rem(1),borderRadius:A.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:A.u.rem(1),height:A.u.rem(1),borderRadius:A.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:L+" 2s infinite",willChange:"transform"},"&:hover:before":{animation:"none"}}},N={margin:A.u.rem(-1.5)+" 0 0 "+A.u.rem(-1.5),padding:A.u.rem(1),borderRadius:A.u.percent(50),cursor:"pointer",pointerEvents:"all"},F={margin:"0 0 "+A.u.rem(.5),color:x.Il.CoreNeutral0,fontWeight:"bold"},P={color:x.Il.CoreNeutral0,lineHeight:A.u.rem(1.25)},O={display:"flex",padding:A.u.rem(1)+" "+A.u.rem(1.5)+" "+A.u.rem(1.25)+" "+A.u.rem(2),width:A.u.rem(23),borderRadius:A.u.rem(k.fx),background:E,color:x.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},B={marginRight:A.u.rem(2),width:A.u.rem(2),flexShrink:0,alignSelf:"center"},D={stroke:I.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:x.Il.CoreNeutral0,fill:x.Il.CoreNeutral0}}},W={position:"absolute",top:A.u.percent(50),left:A.u.percent(50),zIndex:k.I3},H={position:"relative",zIndex:k.VN},U={zIndex:k.w$},z={position:"absolute",zIndex:k.w$},X=A.u.prefixedStylesheet("onboarding",{pulse:[R],pulseWrapper:[N],header:[F],description:[P],stepWrapper:[O],content:[{display:"inline-block"}],alertIcon:[B],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[D],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[W],containerDiv:[{}],editor:[H],onboardingPopup:[U],notificationContainer:[z],pulseOptimized:[M]}),G=n(39499),V=n(41439),Y=n(38206),q=n(45836),$=function(e){var t=e.alignment,n=e.rect,r=e.onClose,o=e.className,l=e.children,u=e.icon,d=e.pinTargetRect,f=e.hideCloseButton,m=e.onMount;return a.createElement(Y.t.ByRelativeRect,(0,i.__assign)({rect:n,className:X.notificationContainer},Y.t.Alignment.toSelector(t),{pinTargetRect:d,withPin:!0}),a.createElement(c.F.div,(0,i.__assign)({},(0,c.Sh)(X.stepWrapper,o),{mount:m}),(0,s.pipe)(u,p.fold((function(){return a.createElement(V.JO.Grammarly,{className:X.alertIcon})}),(function(e){return a.createElement(e,{className:X.alertIcon})}))),l,!f&&a.createElement(G.zx,{name:"onboard-close",className:X.closeIconWrapper,onClick:function(){return r&&r()}},a.createElement(V.JO.Close,{className:X.closeIcon,width:12}))))},j=function(e){var t=e.title,n=e.description,r=(0,i.__rest)(e,["title","description"]);return a.createElement($,(0,i.__assign)({},r),a.createElement("span",{className:X.content},t&&a.createElement(q.P1,{className:X.header},t),a.createElement(q.XY,{className:X.description},n)))},Z=function(e){var t=e.className,n=e.onClick,r=e.customStyle,o=e.enableOptimizations;return a.createElement(c.F.div,(0,i.__assign)({},(0,c.Sh)(X.pulseWrapper,t),{style:r,onClick:function(){return n&&n()}}),a.createElement("div",{className:o?X.pulseOptimized:X.pulse}))};function J(e){var t=e.stepId,n=e.onboardingViewModel,r=(0,i.__rest)(e,["stepId","onboardingViewModel"]),o=n||a.useContext(J.Context),c=K(t,o),l=a.useContext(m.l.Context).pipe(b.U((function(e){return e.rect})));return(0,s.pipe)(c,p.fold((function(){return a.Children.only(e.children)}),(function(e){return a.createElement(Q,(0,i.__assign)({},r,{onboardingStep:e,enableOptimizations:o.cpuAndAnimationOptsExperiment,viewportRect:l}))})))}var K=function(e,t){return(0,l.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?p.some(t.subscribeForStep(e)):p.none},Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._wrapperElement=c.hg.create(p.none),t._containerElement=c.hg.create(p.none),t._exactTargetRect=c.hg.create(p.none),t._visibilityState=c.hg.create(!t.props.findFirstButton),t._spotStyle=c.hg.create({}),t._onEventActionTaken=function(e,n){return void 0===n&&(n=!0),function(r){var i=e.state.get();if("popup"===i||n&&"dot"===i){var a=r.target;if(u.pK(a))return;var o=n||u.q_(a,X.containerDiv);if(t.props.findFirstButton&&!u.q2(a,"role","button"))return;o&&e.actionTaken()}else"dot"===i&&(r.preventDefault(),r.stopPropagation())}},t}return(0,i.__extends)(t,e),t.prototype.componentWillUnmount=function(){var e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.componentDidMount=function(){var e=this;if(this.props.findFirstButton){var t=this.props.findFirstButton.dotPosition,n=this.props.findFirstButton.buttonOrder;this._subs.push(this.context.pipe(w.T(this.props.onboardingStep.state.pipe(_.h((function(e){return"dot"===e||"popup"===e})))),C.c(y.Dx(n)),S.M(this._wrapperElement,this._containerElement)).subscribe((function(n){var r=n[0],i=n[1],a=n[2];return setTimeout((function(){(0,s.pipe)(i,p.map((function(n){(0,s.pipe)(a,p.map((function(i){var a=i.querySelectorAll('[role="button"]'),s=a.length>0&&(void 0===r?a[a.length-1]:a[r]);if(s){var c=u.UL.fromEl((0,o.unsafeCoerce)(s)),d=u.UL.fromEl(n);switch(e._exactTargetRect.set(p.some(c)),t){case"rightTop":e._spotStyle.set({top:0,left:c.left-d.left+c.width});break;case"center":e._spotStyle.set({top:c.top-d.top+c.height/2,left:c.left-d.left+c.width/2});break;default:(0,l.vE)(t)}e._visibilityState.set(!0)}})))})))}),500)})))}},t.prototype.render=function(){var e=this,t=this.props.onboardingStep;return a.createElement(c.F.div,(0,i.__assign)({key:"onboarding-wrapper"},(0,c.Sh)(X.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:function(t){return e._wrapperElement.set(p.fromNullable(t))}}),a.createElement("div",(0,i.__assign)({key:"container",ref:function(t){return e._containerElement.set(p.fromNullable(t))}},(0,c.Sh)(X.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(t,"onclick"===this.props.eventType),onMouseEnter:function(n){return"onhover"===e.props.eventType&&e._onEventActionTaken(t,!1)(n)}}),this.props.children),c.hg.combine(t.state,this._visibilityState,(function(n,r){if(!r)return null;switch(n){case"dot":var o=e.props.themes&&e.props.themes.spotClassName;return e.props.onboardingStep.dotShown(),a.createElement(Z,(0,i.__assign)({customStyle:e._spotStyle,key:"spot",enableOptimizations:e.props.enableOptimizations},(0,c.Sh)(X.onboardingSpot,o),{onClick:function(){return t.dotClicked()}}));case"popup":return a.createElement(j,{key:"step",title:e.props.title,alignment:e.props.alignment,rect:e._containerElement.view(p.fold((function(){return u.UL.empty}),u.UL.fromEl)),className:e.props.themes&&e.props.themes.notificationClassName,description:e.props.message,icon:p.fromNullable(e.props.icon),onClose:function(){return t.popupClosed()},pinTargetRect:e._exactTargetRect.view(d.Fc)});default:return null}})))},t.contextType=f.u.Context,t.defaultProps={alignment:"left"},t}(a.Component);!function(e){e.Context=a.createContext(null),e.ContextMock=function(t){var n=t.children;return a.createElement(e.Context.Provider,{value:new v,children:n})}}(J||(J={}))},25781:(e,t,n)=>{"use strict";var r,i;n.d(t,{R:()=>r}),function(e){e.ESC_CODE=27}(r||(r={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},51072:(e,t,n)=>{"use strict";n.d(t,{Vi:()=>i});var r=n(95574);function i(e){return e().then(r.MH)}},84347:(e,t,n)=>{"use strict";e.exports=n(87612)},17123:e=>{"use strict";var t={};t.create=function(e,t){var n=document.createElement(e);return n.className=t,n},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,n){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,n)}))},e.exports=t},97490:e=>{"use strict";var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);var r={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,n?Object.assign({},r,n):r)},t.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var n=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===n&&(n=new t(e),this.eventElements.push(n)),n},n.prototype.bind=function(e,t,n,r){this.eventElement(e).bind(t,n,r)},n.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=n},48928:e=>{"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,n)=>{"use strict";var r=n(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function a(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},87612:(e,t,n)=>{"use strict";var r=n(81489),i=n(41835),a=n(64114);e.exports={initialize:i,update:a,destroy:r}},48300:e=>{"use strict";e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109);e.exports=function(e){var t=a.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),a.remove(e))}},3708:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var o=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;a(e,"top",e.scrollTop+o*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var o=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;a(e,"left",e.scrollLeft+o*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},35672:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);function c(e,t){var n=null,a=null;var c=function(i){!function(i){var a=n+i*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=a<0?0:a>o?o:a;var c=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;s(e,"left",c)}(i.pageX-a),o(e),i.stopPropagation(),i.preventDefault()},l=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarX,"mousedown",(function(o){a=o.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",l),o.stopPropagation(),o.preventDefault()}))}function l(e,t){var n=null,a=null;var c=function(i){!function(i){var a=n+i*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=a<0?0:a>o?o:a;var c=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));s(e,"top",c)}(i.pageY-a),o(e),i.stopPropagation(),i.preventDefault()},l=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarY,"mousedown",(function(o){a=o.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",l),o.stopPropagation(),o.preventDefault()}))}e.exports=function(e){var t=a.get(e);c(e,t),l(e,t)}},94742:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);function c(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)){var c=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||c){var l=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(r.isEditable(l))return}var u=0,d=0;switch(a.which){case 37:u=a.metaKey?-t.contentWidth:a.altKey?-t.containerWidth:-30;break;case 38:d=a.metaKey?t.contentHeight:a.altKey?t.containerHeight:30;break;case 39:u=a.metaKey?t.contentWidth:a.altKey?t.containerWidth:30;break;case 40:d=a.metaKey?-t.contentHeight:a.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=a.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=a.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=a.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-d),s(e,"left",e.scrollLeft+u),o(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(u,d)&&a.preventDefault()}}}))}e.exports=function(e){c(e,a.get(e))}},83476:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);function o(e,t){var n=!1;function r(r){var o=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),s=o[0],c=o[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var a=r.scrollHeight-r.clientHeight;if(a>0&&!(0===r.scrollTop&&n>0||r.scrollTop===a&&n<0))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===o&&t>0))return!0}return!1})(s,c)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a(e,"top",c?e.scrollTop-c*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-c*t.settings.wheelSpeed),n=!0):(a(e,"top",e.scrollTop-c*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(s,c))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){o(e,r.get(e))}},15335:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},23405:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),o=r[0],s=r[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?a(e,"top",s?e.scrollTop-s*t.settings.wheelSpeed:e.scrollTop+o*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&a(e,"left",o?e.scrollLeft+o*t.settings.wheelSpeed:e.scrollLeft-s*t.settings.wheelSpeed):(a(e,"top",e.scrollTop-s*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+o*t.settings.wheelSpeed)),i(e)}void 0!==window.onwheel?t.event.bind(e,"wheel",n,{passive:!0}):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n,{passive:!0})}(e,r.get(e))}},19539:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),a=n(86057),o=n(21459);function s(e,t){var n=null,s={top:0,left:0};function c(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var l=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?l=!0:(l=!1,c())})),t.event.bind(window,"mouseup",(function(){l&&(l=!1,c())})),t.event.bind(window,"keyup",(function(){l&&(l=!1,c())})),t.event.bind(window,"mousemove",(function(t){if(l){var u={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<d.left+3?(s.left=-5,r.startScrolling(e,"x")):u.x>d.right-3?(s.left=5,r.startScrolling(e,"x")):s.left=0,u.y<d.top+3?(s.top=d.top+3-u.y<5?-5:-20,r.startScrolling(e,"y")):u.y>d.bottom-3?(s.top=u.y-d.bottom+3<5?5:20,r.startScrolling(e,"y")):s.top=0,0===s.top&&0===s.left?c():n||(n=setInterval((function(){i.get(e)?(o(e,"top",e.scrollTop+s.top),o(e,"left",e.scrollLeft+s.left),a(e)):clearInterval(n)}),50))}}))}e.exports=function(e){s(e,i.get(e))}},76905:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),a=n(86057),o=n(21459);function s(e,t,n,r){function s(t,n){o(e,"top",e.scrollTop-n),o(e,"left",e.scrollLeft-t),a(e)}var c={},l=0,u={},d=null,p=!1,f=!1;function m(){p=!0}function h(){p=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function v(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function y(e){if(v(e)){f=!0;var t=g(e);c.pageX=t.pageX,c.pageY=t.pageY,l=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(n){if(!f&&t.settings.swipePropagation&&y(n),!p&&f&&v(n)){var r=g(n),i={pageX:r.pageX,pageY:r.pageY},a=i.pageX-c.pageX,o=i.pageY-c.pageY;s(a,o),c=i;var d=(new Date).getTime(),m=d-l;m>0&&(u.x=a/m,u.y=o/m,l=d),function(n,r){var i=e.scrollTop,a=e.scrollLeft,o=Math.abs(n),s=Math.abs(r);if(s>o){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(o>s&&(n<0&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!t.settings.swipePropagation;return!0}(a,o)&&(n.stopPropagation(),n.preventDefault())}}function w(){!p&&f&&(f=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(d):(s(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(d)}),10)))}n?(t.event.bind(window,"touchstart",m),t.event.bind(window,"touchend",h),t.event.bind(e,"touchstart",y),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",m),t.event.bind(window,"pointerup",h),t.event.bind(e,"pointerdown",y),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",m),t.event.bind(window,"MSPointerUp",h),t.event.bind(e,"MSPointerDown",y),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&s(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},41835:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a={"click-rail":n(3708),"drag-scrollbar":n(35672),keyboard:n(94742),wheel:n(83476),passiveWheel:n(23405),touch:n(76905),selection:n(19539)},o=n(15335);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){a[t](e)})),o(e),i(e)}},6109:(e,t,n)=>{"use strict";var r=n(95889),i=n(48300),a=n(17123),o=n(97490),s=n(48928),c={};function l(e,t){var n,s,c=this;for(var l in c.settings=i(),t)c.settings[l]=t[l];function u(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}c.containerWidth=null,c.containerHeight=null,c.contentWidth=null,c.contentHeight=null,c.isRtl="rtl"===a.css(e,"direction"),c.isNegativeScroll=(s=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=s,n),c.negativeScrollAdjustment=c.isNegativeScroll?e.scrollWidth-e.clientWidth:0,c.event=new o,c.ownerDocument=e.ownerDocument||document,c.scrollbarXRail=a.appendTo(a.create("div","ps__scrollbar-x-rail"),e),c.scrollbarX=a.appendTo(a.create("div","ps__scrollbar-x"),c.scrollbarXRail),c.scrollbarX.setAttribute("tabindex",0),c.event.bind(c.scrollbarX,"focus",u),c.event.bind(c.scrollbarX,"blur",d),c.scrollbarXActive=null,c.scrollbarXWidth=null,c.scrollbarXLeft=null,c.scrollbarXBottom=r.toInt(a.css(c.scrollbarXRail,"bottom")),c.isScrollbarXUsingBottom=c.scrollbarXBottom==c.scrollbarXBottom,c.scrollbarXTop=c.isScrollbarXUsingBottom?null:r.toInt(a.css(c.scrollbarXRail,"top")),c.railBorderXWidth=r.toInt(a.css(c.scrollbarXRail,"borderLeftWidth"))+r.toInt(a.css(c.scrollbarXRail,"borderRightWidth")),a.css(c.scrollbarXRail,"display","block"),c.railXMarginWidth=r.toInt(a.css(c.scrollbarXRail,"marginLeft"))+r.toInt(a.css(c.scrollbarXRail,"marginRight")),a.css(c.scrollbarXRail,"display",""),c.railXWidth=null,c.railXRatio=null,c.scrollbarYRail=a.appendTo(a.create("div","ps__scrollbar-y-rail"),e),c.scrollbarY=a.appendTo(a.create("div","ps__scrollbar-y"),c.scrollbarYRail),c.scrollbarY.setAttribute("tabindex",0),c.event.bind(c.scrollbarY,"focus",u),c.event.bind(c.scrollbarY,"blur",d),c.scrollbarYActive=null,c.scrollbarYHeight=null,c.scrollbarYTop=null,c.scrollbarYRight=r.toInt(a.css(c.scrollbarYRail,"right")),c.isScrollbarYUsingRight=c.scrollbarYRight==c.scrollbarYRight,c.scrollbarYLeft=c.isScrollbarYUsingRight?null:r.toInt(a.css(c.scrollbarYRail,"left")),c.scrollbarYOuterWidth=c.isRtl?r.outerWidth(c.scrollbarY):null,c.railBorderYWidth=r.toInt(a.css(c.scrollbarYRail,"borderTopWidth"))+r.toInt(a.css(c.scrollbarYRail,"borderBottomWidth")),a.css(c.scrollbarYRail,"display","block"),c.railYMarginHeight=r.toInt(a.css(c.scrollbarYRail,"marginTop"))+r.toInt(a.css(c.scrollbarYRail,"marginBottom")),a.css(c.scrollbarYRail,"display",""),c.railYHeight=null,c.railYRatio=null}function u(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=s();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),c[n]=new l(e,t),c[n]},t.remove=function(e){delete c[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return c[u(e)]}},86057:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(21459);function s(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=a.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=s(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=s(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,o(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,o(e,"top",0))}},21459:(e,t,n)=>{"use strict";var r=n(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var a=r.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&((n=a.contentHeight-a.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&((n=a.contentWidth-a.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===a.lastTop&&(a.lastTop=e.scrollTop),void 0===a.lastLeft&&(a.lastLeft=e.scrollLeft),"top"===t&&n<a.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>a.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<a.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>a.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==a.lastTop&&(e.scrollTop=a.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==a.lastLeft&&(e.scrollLeft=a.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);e.exports=function(e){var t=a.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),o(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},96558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicativeComposition=void 0;var r=n(3025);t.getApplicativeComposition=function(e,t){return{map:r.getFunctorComposition(e,t).map,of:function(n){return e.of(t.of(n))},ap:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.ap(e,n)}})),r)}}}},72635:(e,t,n)=>{"use strict";t.D=void 0;var r=n(96558),i=n(64909);t.D=function(e){var t=r.getApplicativeComposition(e,i.Applicative),n=e.of(i.none);return{map:t.map,ap:t.ap,of:t.of,chain:function(t,r){return e.chain(t,i.fold((function(){return n}),r))},alt:function(t,n){return e.chain(t,i.fold(n,(function(t){return e.of(i.some(t))})))},fold:function(t,n,r){return e.chain(t,i.fold(n,r))},getOrElse:function(t,n){return e.chain(t,i.fold(n,e.of))},fromM:function(t){return e.map(t,i.some)},none:function(){return n}}}},18756:(e,t,n)=>{"use strict";function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>o});function a(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return a(t)}return r(e)?e.hashCode():o(String(e))}function o(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class s extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:""+n,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=s,this.__proto__=s.prototype}errors(){return this.errorsRef.slice()}}Error;class c extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=c,this.__proto__=c.prototype}}Error;class l extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=l,this.__proto__=l.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function f(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function m(e,t,n){const r=e,i=r.prototype,a="fantasy-land/",o="equals",s=a+o,c="map",l=a+c,u="ap",d=a+u,p=a+"of",m="chain",h=a+m,g="chainRec",v=a+g;i.equals?i[s]=i.equals:n&&(i[s]=f(n.equals)),i.map?i[l]=i.map:t&&(i[l]=f(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=f(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[h]=i.chain:t&&(i[h]=f(t.chain)),r.chainRec?r[v]=r.chainRec:t&&(r[v]=t.chainRec)}class h{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:v(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new c("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?v(this.value):b(this.value)}toOption(){return this._isRight?S(this.value):x}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?a(this.value)<<2:a(this.value)<<3}static pure(e){return new y(e)}static left(e){return v(e)}static right(e){return b(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:b(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:b(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:b(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:b(a(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,a,o){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:a.isLeft()?a:b(o(e.value,t.value,n.value,r.value,i.value,a.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return b(r.value);n=r.value}}}class g extends h{constructor(e){super(e,"left")}}function v(e){return new g(e)}class y extends h{constructor(e){super(e,"right")}}function b(e){return new y(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:h.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>h.tailRecM(t,(t=>e(h.left,h.right,t)))};m(h,w,w);class _{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new c("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?x:S(e(this.value))}flatMap(e){return this._isEmpty?x:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?x:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:a(this.value)<<2}static of(e){return null!=e?S(e):x}static some(e){return new _(e,!1)}static none(){return x}static empty(){return x}static pure(e){return S(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?S(n(e.value,t.value)):x}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?S(r(e.value,t.value,n.value)):x}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?S(i(e.value,t.value,n.value,r.value)):x}static map5(e,t,n,r,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?S(a(e.value,t.value,n.value,r.value,i.value)):x}static map6(e,t,n,r,i,a,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?S(o(e.value,t.value,n.value,r.value,i.value,a.value)):x}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return x;{const t=e.value;if(t.isRight())return S(t.value);n=t.value}}}}class C extends _{constructor(e){super(e,!1)}}function S(e){return new C(e)}const x=new class extends _{constructor(){super(void 0,!0)}},A={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:_.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>_.tailRecM(t,(t=>e(h.left,h.right,t)))};m(_,A,A);class I{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?R(new c("try.failed()")):E(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:R(new c("Predicate does not hold for "+this.value))}catch(e){return R(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return R(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?I.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:I.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return R(e)}}toOption(){return this._isSuccess?S(this.value):x}toEither(){return this._isSuccess?b(this.value):v(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,a(this.value)}static of(e){try{return E(e())}catch(e){return R(e)}}static pure(e){return I.success(e)}static unit(){return M}static success(e){return E(e)}static failure(e){return R(e)}static raise(e){return R(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return E(n(e.value,t.value))}catch(e){return R(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return E(r(e.value,t.value,n.value))}catch(e){return R(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return E(i(e.value,t.value,n.value,r.value))}catch(e){return R(e)}}static map5(e,t,n,r,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return E(a(e.value,t.value,n.value,r.value,i.value))}catch(e){return R(e)}}static map6(e,t,n,r,i,a,o){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;try{return E(o(e.value,t.value,n.value,r.value,i.value,a.value))}catch(e){return R(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return E(r.value);n=r.value}catch(e){return R(e)}}}class k extends I{constructor(e){super(e,"success")}}function E(e){return new k(e)}class T extends I{constructor(e){super(e,"failure")}}function R(e){return new T(e)}const L={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:I.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>I.tailRecM(t,(t=>e(h.left,h.right,t)))};m(I,L,L);const M=E(void 0);class N{static of(e){return new F(e)}static empty(){return O}static collection(...e){return new D(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new s(t)}}class F extends N{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class P{constructor(){this._funIsDummy=!0}cancel(){}}const O=new P;class B{static of(e){return new W(e)}static empty(){return new H}static alreadyCanceled(){return U}static collection(...e){return new D(e)}}class D extends B{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{N.cancelAll(this._refs)}finally{delete this._refs}}}class W extends F{isCanceled(){return null===this.thunk}}class H extends B{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const U=new class extends P{isCanceled(){return!0}};new class extends P{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class z{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof z){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new z}static of(e){return new z(N.of(e))}}class X{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{N.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||N.empty()}static empty(){return new X}static collection(...e){return new X(e)}}class G{constructor(e){this._underlying=e||O,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=O,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof P||t.update(e)}else this.cancel();return this}static empty(){return new G}}class V{toString(){return this.label.toUpperCase()}}const Y=1e3,q=1e6,$=1e3*q,j=60*$,Z=60*j,J=24*Z,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,n){return e>n?K:e<-n?-9007199254740992:e*t}const te=new class extends V{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(q/1))}toSeconds(e){return Q(e/($/1))}toMinutes(e){return Q(e/(j/1))}toHours(e){return Q(e/(Z/1))}toDays(e){return Q(e/(J/1))}};const ne=new class extends V{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/($/Y))}toMinutes(e){return Q(e/(j/Y))}toHours(e){return Q(e/(Z/Y))}toDays(e){return Q(e/(J/Y))}};const re=new class extends V{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,q/1,Q(K/(q/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(Z/q))}toDays(e){return Q(e/(J/q))}};const ie=new class extends V{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,$/1,Q(K/($/1)))}toMicros(e){return ee(e,$/Y,Q(K/($/Y)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const ae=new class extends V{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,j/1,Q(K/(j/1)))}toMicros(e){return ee(e,j/Y,Q(K/(j/Y)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const oe=new class extends V{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/Y,Q(K/(Z/Y)))}toMillis(e){return ee(e,Z/q,Q(K/(Z/q)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const se=new class extends V{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/Y,Q(K/(J/Y)))}toMillis(e){return ee(e,J/q,Q(K/(J/q)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class ce{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return ne.convert(this.duration,this.unit)}toMillis(){return re.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return ae.convert(this.duration,this.unit)}toHours(){return oe.convert(this.duration,this.unit)}toDays(){return se.convert(this.duration,this.unit)}convertTo(e){return new ce(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return ce.negInf();case-1/0:return ce.inf();default:return new ce(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new ce(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?ce.millis(e):e}static zero(){return new ce(0,se)}static inf(){return new ce(1/0,se)}static negInf(){return new ce(-1/0,se)}static nanos(e){return new ce(e,te)}static micros(e){return new ce(e,ne)}static millis(e){return new ce(e,re)}static seconds(e){return new ce(e,ie)}static minutes(e){return new ce(e,ae)}static hours(e){return new ce(e,oe)}static days(e){return new ce(e,se)}}class le{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new le(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class fe{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,a)=>i.update(e.scheduleOnce(a,(()=>{n(),r(e,i,t)}))),i=z.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,a)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const o=e.currentTimeMillis()-i,s=Math.max(0,a-o);r(e,t,a,s)}))),i=z.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}fe.global=le.of((()=>ve));class me{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*o(this.type)+this.recommendedBatchSize}static synchronous(){return new me("synchronous")}static alwaysAsync(){return new me("alwaysAsync")}static batched(e){return new me("batched",e)}}me.global=le.of((()=>me.batched()));class he{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class ge extends fe{constructor(e=!1,t=me.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new he(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ye(e,this.reportFailure)):e=>setTimeout(ye(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,ce.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return N.of((()=>clearTimeout(r)))}withExecutionModel(e){return new ge(this._useSetImmediate,e)}}const ve=new ge(!0);function ye(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(v,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(Ie(t,(e=>be.raise(e,n)),n),Ie(e,(e=>be.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(ce.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(n,this._scheduler)}static of(e,t=fe.global.get()){const n=xe.empty(t);return t.executeAsync((()=>n.tryComplete(I.of(e)))),n.future()}static pure(e,t=fe.global.get()){return new we(E(e),t)}static raise(e,t=fe.global.get()){return new we(R(e),t)}static create(e,t=fe.global.get()){const n=xe.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=fe.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new we(E(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=fe.global.get()){return be.create((n=>t.scheduleOnce(e,(()=>n(E(void 0))))),t)}static tailRecM(e,t,n=fe.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),n):be.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=fe.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(E(e))),(e=>t(R(e))))}),t)}static fromTry(e,t=fe.global.get()){return new we(e,t)}static firstCompletedOf(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=Ee(e,t);if(0===r.length)return n(R(new u("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const a=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,ke(r,t,a),n(e))}))}return N.of((()=>ke(r,t)))}catch(e){n(R(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=fe.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),r).flatMap((e=>Te(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=Ee(e,t);if(0===r.length)return n(E([]));const i=N.of((()=>ke(r,t)));let a=!1,o=0,s=[];for(let e=0;e<r.length;e++){const c=e;r[e].onComplete((e=>{o+=1,e.isSuccess()?a||(s[c]=e.get(),a=o===r.length,a&&n(E(s))):a?t.reportFailure(e.failed().get()):(a=!0,i.cancel(),n(e))}))}return i}catch(e){n(R(e))}}),t)}(e,t)}static map2(e,t,n,r=fe.global.get()){return be.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=fe.global.get()){return be.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,a=fe.global.get()){return be.sequence([e,t,n,r],a).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a,o=fe.global.get()){return be.sequence([e,t,n,r,i],o).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o,s=fe.global.get()){return be.sequence([e,t,n,r,i,a],s).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return S(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return Ae(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class _e{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return x;case"complete":return S(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Ce={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(h.left,h.right,t)))};m(be,Ce);class Se extends be{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Se(this._state,this._cancelable,e)}transformWith(e,t){return Ae(this,e,t,this._scheduler,this._cancelable)}}class xe{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new l("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(E(e))}success(e){return this.complete(E(e))}tryFailure(e){return this.tryComplete(R(e))}failure(e){return this.complete(R(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Se(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new xe(this._state,e)}static empty(e=fe.global.get()){return new xe(new _e,e)}static completed(e,t=fe.global.get()){const n=new _e;return n.id="complete",n.ref=e,new xe(n,t)}}function Ae(e,t,n,r,i){const a=xe.empty(r),o=new G(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof G?e.chainTo(o):!e||e instanceof P||o.update(e)}else o.clear();i instanceof Se?i._state.chainTo(a._state,r):i.onComplete(a.tryComplete)})),a.future(o)}function Ie(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?be.fromPromise(i,n):be.pure(i,n):be.pure(r,n)}}function ke(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function Ee(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw ke(n,t),e}}function Te(e,t,n,r,i,a){if(i>=e.length)return be.pure(a,r);let o=[],s=0;try{for(;i<e.length&&s<n;)o.push(t(e[i++])),s+=1;const c=be.sequence(o,r).map((e=>{for(let t=0;t<e.length;t++)a.push(e[t])}));return i>=e.length?c.map((()=>a)):c.flatMap((()=>Te(e,t,n,r,i,a)))}catch(e){return ke(o,r),be.raise(e)}}const Re={next:()=>({done:!0})};function Le(e){if(!e)return Re;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Re;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class Me{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=He(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Ne(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const a=t;n=a.f,t=a.source}}(this)}map(e){return new De(this,(t=>Me.now(e(t))))}flatMap(e){return new De(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Pe(this.get);default:return new Pe((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Me.always(e)}static pure(e){return Me.now(e)}static now(e){return new Ne(e)}static unit(){return Fe}static always(e){return new Oe(e)}static once(e){return new Pe(e)}static suspend(e){return new Be(e)}static defer(e){return Me.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Me.now(e.get()):Me.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Me.of((()=>Le(e))).flatMap((e=>Ue([],e)))}(e)}static map2(e,t,n){return Me.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return Me.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return Me.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return Me.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o){return Me.sequence([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Ne extends Me{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Fe=new Ne(void 0);class Pe extends Me{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Oe extends Me{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Be extends Me{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class De extends Me{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const We={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Me.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Me.tailRecM(t,(t=>e(h.left,h.right,t)))};function He(e,t){return e||(t&&t.length>0?t.pop():null)}function Ue(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?Me.pure(e):Ue(e,t))))}if(r)return Me.pure(e)}}m(Me,We);class ze{run(e=fe.global.get()){return function(e,t){let n=e,r=null,i=null;const a=t.executionModel.recommendedBatchSize-1;let o=t.batchIndex;for(;;)if(n instanceof I){if(n.isSuccess()){const e=et(r,i);if(!e)return t.batchIndex=o,be.pure(n.get());try{n=e(n.get())}catch(e){n=new Xe(I.failure(e))}}else{const e=n.failed().get(),a=tt(r,i);if(!a)return t.batchIndex=o,be.raise(e);try{n=a(e)}catch(e){n=new Xe(I.failure(e))}}r=null;const e=o+1&a;if(!e)return ot(n,t,r,i,!0);o=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=I.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return ot(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=fe.global.get()){return at(this,t,null,e,null,null,null)||N.empty()}attempt(){return this.transform((e=>h.left(e)),h.right)}asyncBoundary(e){return this.flatMap((t=>ze.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return ze.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>ze.delayedTick(e).flatMap((()=>ze.raise(t)))),(t=>ze.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(S(t)).flatMap((()=>ze.raise(t)))),(t=>e(x).map((()=>t))))}doOnCancel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(N.of((()=>e.run(r)))),ze.unsafeStart(this,t,st(r,i,n))}))}))}executeForked(e){return ze.fork(this,e)}executeWithModel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new Ze(r,t.connection,t.options);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}executeWithOptions(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new Ze(r,t.connection,e);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}flatMap(e){return new qe(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new qe(this,(t=>ze.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new Ve(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new je(this,!1):e;default:return new je(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new Ve(this.thunk,!0);default:return new je(this,!0)}}recover(e){return this.recoverWith((t=>ze.now(e(t))))}recoverWith(e){return this.transformWith(e,ze.now)}timeout(e){const t=ze.raise(new p(ce.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,ze.delayedTick(e).flatMap((()=>t))];return ze.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>ze.now(e(t))),(e=>ze.now(t(e))))}transformWith(e,t){return new qe(this,t,e)}static always(e){return new Ye(e)}static async(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=st(r,i,n);try{const n=e(r,t);i.push(n||N.empty())}catch(e){t(R(e))}}))}))}static asyncUnsafe(e){return new $e(e)}static defer(e){return ze.unit().flatMap((()=>e()))}static deferAction(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=ze.raise(e)}r.trampoline((()=>ze.unsafeStart(i,t,n)))}))}static deferFuture(e){return ze.suspend((()=>ze.fromFuture(e())))}static deferFutureAction(e){return ze.deferAction((t=>ze.fromFuture(e(t))))}static delayedTick(e){return ze.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(I.unit())}));r.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?ze.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):ze.fromTry(e.value().get())}static fromTry(e){return new Xe(e)}static fork(e,t){return ze.shift(t).flatMap((()=>e))}static map2(e,t,n){return ze.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return ze.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return ze.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return ze.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o){return ze.sequence([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new Xe(E(e))}static of(e){return ze.always(e)}static once(e){return new Ve(e,!1)}static parMap2(e,t,n){return ze.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return ze.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return ze.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,a){return ze.gather([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,a,o){return ze.gather([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return ze.now(e)}static raise(e){return new Xe(R(e))}static sequence(e){return function(e){return ze.of((()=>Le(e))).flatMap((e=>lt([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return ze.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?ze.now(e.get()):ze.tailRecM(e.swap().get(),t)))}catch(e){return ze.raise(e)}}static unit(){return Ge}static unsafeStart(e,t,n){return at(e,t.scheduler,t,n,null,null,null)}}class Xe extends ze{constructor(e){super(),this.value=e,this._tag="pure"}}const Ge=new Xe(I.unit());class Ve extends ze{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new Ve(this._thunk,!1):this}runTry(){if(this._thunk){const e=I.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class Ye extends ze{constructor(e){super(),this.thunk=e,this._tag="always"}}class qe extends ze{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class $e extends ze{constructor(e){super(),this.register=e,this._tag="async"}}class je extends ze{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Ze{constructor(e,t=new X,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:ze.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>ze.tailRecM(t,(t=>e(h.left,h.right,t)))};function Ke(e){return ze.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(I.unit())))}))}m(ze,Je);const Qe=Ke();function et(e,t){let n=void 0;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function tt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class nt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,at(new Xe(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function rt(e,t,n,r,i,a,o){if(!t.shouldCancel()){t.scheduler.batchIndex=o;const s=r||new nt(t,n);s.prepare(i,a),e(t,s.asFunction)}}function it(e,t,n,r,i,a){t.shouldCancel()||t.scheduler.executeAsync((()=>{at(e,t.scheduler,t,n,r,i,a)}))}function at(e,t,n,r,i,a,o){let s=e,c=a,l=o;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(s instanceof I){if(s.isSuccess()){const e=et(c,l);if(!e)return t.batchIndex=d,r(s);try{s=e(s.get())}catch(e){s=I.failure(e)}}else{const e=tt(c,l);if(!e)return t.batchIndex=d,r(s);try{s=e(s.failed().get())}catch(e){s=I.failure(e)}}c=null;const e=d+1&u;if(!e){const e=n||new Ze(t);return it(s instanceof I?new Xe(s):s,e,r,i,c,l),e.connection}d=e}else switch(s._tag){case"pure":s=s.value;break;case"always":s=I.of(s.thunk);break;case"once":s=s.runTry();break;case"flatMap":const e=s;c&&(l||(l=[]),l.push(c)),c=e.g?[e.f,e.g]:e.f,s=e.source;break;case"async":const a=s,o=n||new Ze(t);return rt(a.register,o,r,i,c,l,d),o.connection;case"memoize":return ct(s,t,n,r,c,l,d)}}function ot(e,t,n,r,i){return be.create((a=>{const o=new Ze(t);return i?it(e,o,a,null,n,r):at(e,t,o,a,null,n,r),o.connection}))}function st(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function ct(e,t,n,r,i,a,o){let s;if(t.batchIndex=o,e.result)s=e.result;else{const n=ot(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,s=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(s=n.value().get(),!s.isSuccess()&&e.onlySuccess||(e.result=s))}at(s instanceof I?new Xe(s):ze.fromFuture(s),t,n,r,null,i,a)}function lt(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?ze.pure(e):lt(e,t))))}if(r)return ze.pure(e)}}function ut(e,t){return ze.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const a=[],o=ue(e);i=!1;for(let e=0;e<o.length;e++){const t=o[e].run(n.scheduler);a.push(t)}const s=t(a,n.scheduler);n.connection.push(s),s.onComplete(st(n.scheduler,n.connection,r))}catch(e){i?r(R(e)):n.scheduler.reportFailure(e)}}))}))}}}]);